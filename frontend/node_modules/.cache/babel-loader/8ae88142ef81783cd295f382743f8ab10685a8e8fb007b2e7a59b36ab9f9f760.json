{"ast":null,"code":"import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Rect, measureText, textElement, PathOption } from '@syncfusion/ej2-svg-base';\nimport { RectOption, CircleOption } from '../../common/utils/helper';\nimport { Animation } from '@syncfusion/ej2-base';\nimport { getAnimationFunction } from '../../common/utils/helper';\n/**\n * class for Bullet chart Scale Group\n */\nvar ScaleGroup = /** @class */function () {\n  function ScaleGroup(bulletChart) {\n    this.comparative = [];\n    //super();\n    this.dataSource = bulletChart.dataSource;\n    this.isVertical = bulletChart.orientation === 'Vertical';\n    this.isTicksInside = bulletChart.tickPosition === 'Inside';\n    this.isLabelsInside = bulletChart.labelPosition === 'Inside';\n    this.isHorizontal = bulletChart.orientation === 'Horizontal';\n    this.isLeft = bulletChart.titlePosition === 'Left';\n    this.isRight = bulletChart.titlePosition === 'Right';\n    this.isTop = bulletChart.titlePosition === 'Top';\n    this.location = 10;\n    this.featureBarBounds = [];\n    this.majorTickSize = bulletChart.majorTickLines.height;\n    this.labelOffset = 15;\n    this.labelSize = 12;\n    this.bulletChart = bulletChart;\n    this.isLabelBelow = !this.bulletChart.opposedPosition;\n    this.scaleOrientation = this.bulletChart.orientation;\n    this.rangeColor = [];\n  }\n  /**\n   * To render range scale of the bulletChart graph\n   *\n   * @param {Element} scaleGroup\n   */\n  ScaleGroup.prototype.drawScaleGroup = function (scaleGroup) {\n    var rangeGroup = this.bulletChart.renderer.createGroup({\n      'id': this.bulletChart.svgObject.id + '_rangeGroup'\n    });\n    var max = this.bulletChart.maximum;\n    var ranges = this.bulletChart.ranges;\n    this.scaleSettingsGroup = scaleGroup;\n    var rect;\n    var bullet = this.bulletChart;\n    var enableRtl = bullet.enableRtl;\n    var initialRect = bullet.initialClipRect;\n    var locX = initialRect.x + (enableRtl && bullet.orientation === 'Horizontal' ? initialRect.width : 0);\n    var locY = initialRect.y + (!enableRtl && bullet.orientation === 'Vertical' ? initialRect.height : 0);\n    var area = 0;\n    bullet.rangeCollection = [];\n    var start = 0;\n    var range = bullet.orientation === 'Horizontal' ? initialRect.width : initialRect.height;\n    var fillRange = bullet.orientation === 'Horizontal' ? initialRect.height : initialRect.width;\n    for (var i = 0; i < ranges.length; i++) {\n      area = range * ((ranges[i].end - start) / max);\n      if (bullet.orientation === 'Horizontal') {\n        locX -= enableRtl ? area : 0;\n      } else {\n        locY -= !enableRtl ? area : 0;\n      }\n      rect = new RectOption(bullet.svgObject.id + '_range_' + i,\n      // tslint:disable-next-line:no-string-literal\n      ranges[i].color || this.bulletChart.themeStyle.rangeStrokes[i]['color'], {\n        width: 1\n      }, ranges[i].opacity, new Rect(locX, locY, bullet.orientation === 'Horizontal' ? area : fillRange, bullet.orientation === 'Horizontal' ? fillRange : area));\n      var svgRect = bullet.renderer.drawRectangle(rect);\n      rangeGroup.appendChild(svgRect);\n      scaleGroup.appendChild(rangeGroup);\n      if (bullet.orientation === 'Horizontal') {\n        locX += enableRtl ? 0 : area;\n      } else {\n        locY += !enableRtl ? 0 : area;\n      }\n      bullet.rangeCollection.push(area);\n      start = ranges[i].end;\n    }\n    return this.bulletChart.rangeCollection;\n  };\n  ScaleGroup.prototype.sortRangeCollection = function (a, b) {\n    return a - b;\n  };\n  /**\n   * To render the feature bar of the bulletChart chart\n   *\n   * @param {number} dataCount Count of the bar.\n   */\n  ScaleGroup.prototype.renderFeatureBar = function (dataCount) {\n    if (dataCount === 0) {\n      return;\n    }\n    this.renderCommonFeatureBar(dataCount, this.isHorizontal);\n  };\n  /**\n   * To render the horizontal feature bar of the bulletChart chart\n   *\n   * @param {number} dataCount Count of the bar.\n   */\n  ScaleGroup.prototype.renderCommonFeatureBar = function (dataCount, isHorizontal) {\n    var categoryValue;\n    var dotWidth = 6;\n    var padding = 5;\n    var bulletChart = this.bulletChart;\n    var initialBoundsStart = isHorizontal ? bulletChart.initialClipRect.y + bulletChart.initialClipRect.height : bulletChart.initialClipRect.x;\n    var lPoint;\n    var featueGroup = bulletChart.renderer.createGroup({\n      'id': bulletChart.svgObject.id + '_featureGroup'\n    });\n    var data;\n    var featureBarSize = (isHorizontal ? bulletChart.initialClipRect.height : bulletChart.initialClipRect.width) / dataCount;\n    var bounds;\n    for (var i = 0; i < dataCount; i++) {\n      data = bulletChart.dataSource[i];\n      categoryValue = data[bulletChart.categoryField];\n      if (isHorizontal) {\n        lPoint = initialBoundsStart - featureBarSize * i - (featureBarSize + bulletChart.valueHeight) / 2;\n      } else {\n        lPoint = initialBoundsStart + featureBarSize * i + featureBarSize / 2 - bulletChart.valueHeight / 2;\n      }\n      bounds = this.calculateFeatureMeasureBounds(data[bulletChart.valueField], categoryValue, isHorizontal);\n      if (data && bulletChart.type === 'Dot') {\n        var value = data[bulletChart.valueField];\n        if (isHorizontal) {\n          bounds.pointX = bounds.pointX + (value > 0 && !bulletChart.enableRtl || value < 0 && bulletChart.enableRtl ? bounds.width : 0) - dotWidth / 2;\n        } else {\n          bounds.pointX = bounds.pointX + (value > 0 && bulletChart.enableRtl || value < 0 && !bulletChart.enableRtl ? bounds.width : 0) - dotWidth / 2;\n        }\n        bounds.width = dotWidth;\n      }\n      // Drawing feature bar rect element\n      if (bounds) {\n        var svgRect = isHorizontal ? this.featureBar(bounds.pointX, lPoint, bounds.width, i) : this.verticalFeatureBar(lPoint, bounds.pointX, bounds.width, i);\n        featueGroup.appendChild(svgRect);\n        this.feature = svgRect;\n        this.scaleSettingsGroup.appendChild(featueGroup);\n        this.featureBarBounds[i] = {\n          x: bounds.pointX,\n          y: lPoint,\n          width: bounds.width,\n          height: bulletChart.valueHeight\n        };\n        // Drawing category text element\n        if (!isNullOrUndefined(categoryValue)) {\n          var categoryTextSize = measureText(categoryValue, bulletChart.categoryLabelStyle);\n          var categorySize = isHorizontal ? categoryTextSize.width : categoryTextSize.height;\n          var initialRect = bulletChart.initialClipRect;\n          var x = void 0;\n          var categoryOptions = void 0;\n          if (isHorizontal) {\n            x = bulletChart.enableRtl ? initialRect.x + initialRect.width + padding + categorySize / 2 : initialRect.x - padding - categorySize / 2;\n            categoryOptions = this.drawcategory(x, lPoint, categoryValue);\n          } else {\n            x = bulletChart.enableRtl ? initialRect.y - padding - categorySize / 2 : initialRect.y + initialRect.height + padding + categorySize / 2;\n            categoryOptions = this.drawcategory(lPoint + bulletChart.valueHeight / 2, x, categoryValue);\n          }\n          textElement(categoryOptions, bulletChart.categoryLabelStyle, bulletChart.categoryLabelStyle.color || bulletChart.themeStyle.categoryFontColor, this.scaleSettingsGroup);\n        }\n      }\n      if (bulletChart.animation.enable) {\n        this.doValueBarAnimation();\n      }\n    }\n  };\n  ScaleGroup.prototype.featureBar = function (pointX, pointY, width, i) {\n    var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, width, this.bulletChart.valueHeight));\n    var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n    svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n    svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n    return svgRect;\n  };\n  ScaleGroup.prototype.verticalFeatureBar = function (pointX, pointY, width, i) {\n    var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, this.bulletChart.valueHeight, width));\n    var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n    svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n    svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n    return svgRect;\n  };\n  ScaleGroup.prototype.drawcategory = function (lPointX, lPointY, categoryValue) {\n    var categoryOptions = {\n      'id': '',\n      'anchor': 'middle',\n      'x': lPointX,\n      'y': lPointY + this.bulletChart.valueHeight,\n      'transform': '',\n      'text': categoryValue,\n      'baseLine': '',\n      'labelRotation': 0\n    };\n    return categoryOptions;\n  };\n  /**\n   * To render comparative symbol of the bulletChart chart\n   *\n   * @param {number} dataCount Data count value.\n   */\n  ScaleGroup.prototype.renderComparativeSymbol = function (dataCount) {\n    if (dataCount === 0) {\n      return;\n    }\n    this.renderCommonComparativeSymbol(dataCount, this.isHorizontal);\n  };\n  ScaleGroup.prototype.renderCommonComparativeSymbol = function (dataCount, isHorizontal) {\n    var bulletChart = this.bulletChart;\n    var value;\n    var rect = bulletChart.initialClipRect;\n    var scaleLength = isHorizontal ? rect.width : rect.height;\n    var y1;\n    var y2;\n    var x1;\n    var pointY = isHorizontal ? rect.y + rect.height : rect.x;\n    var comparativeGroup = bulletChart.renderer.createGroup({\n      'id': bulletChart.svgObject.id + '_comparativeGroup'\n    });\n    var minimum = bulletChart.minimum;\n    var maximum = bulletChart.maximum;\n    var delta = maximum - minimum;\n    var targetWidth = bulletChart.targetWidth;\n    var pointX = isHorizontal ? rect.x - targetWidth / 2 : rect.y + rect.height;\n    var temp;\n    var values = [];\n    var targetTypes = bulletChart.targetTypes;\n    var targetType = 'Rect';\n    var targetTypeLength = targetTypes.length;\n    var featureBarSize = (isHorizontal ? rect.height : rect.width) / dataCount;\n    var svgElement;\n    for (var k = 0; k < dataCount; k++) {\n      value = bulletChart.dataSource[k][bulletChart.targetField];\n      values = values.concat(value);\n      for (var i = 0; i < values.length; i++) {\n        targetType = targetTypes[i % targetTypeLength];\n        if (values[i] >= minimum && values[i] <= maximum) {\n          if (isHorizontal) {\n            temp = pointY - featureBarSize * k - featureBarSize / 2;\n          } else {\n            temp = pointY + featureBarSize * k + featureBarSize / 2;\n          }\n          y1 = temp - targetWidth * 1.5;\n          y2 = temp + targetWidth * 1.5;\n          temp = scaleLength / (delta / (delta - (maximum - values[i])));\n          if (isHorizontal) {\n            x1 = pointX + (bulletChart.enableRtl ? scaleLength - temp : temp);\n          } else {\n            x1 = pointX - (bulletChart.enableRtl ? scaleLength - temp : temp);\n          }\n          svgElement = this.getTargetElement(targetType, isHorizontal, x1, y1, y2, values[i], k);\n          this.comparative.push(svgElement);\n          comparativeGroup.appendChild(svgElement);\n          y1 = 0;\n          y2 = 0;\n        }\n        this.scaleSettingsGroup.appendChild(comparativeGroup);\n      }\n      values = [];\n      if (bulletChart.animation.enable) {\n        this.doTargetBarAnimation(0);\n      }\n    }\n  };\n  ScaleGroup.prototype.getTargetElement = function (targetType, isHorizontal, x1, y1, y2, value, k) {\n    var shapeObject;\n    var shapeElement;\n    var bulletChart = this.bulletChart;\n    var strokeWidth = targetType === 'Cross' ? bulletChart.targetWidth - 1 : 1;\n    var size = targetType === 'Circle' ? bulletChart.targetWidth - 1 : bulletChart.targetWidth;\n    var lx = isHorizontal ? x1 + size / 2 : y1 + (y2 - y1) / 2;\n    var ly = isHorizontal ? y1 + (y2 - y1) / 2 : x1;\n    var id = bulletChart.svgObject.id + '_ComparativeMeasure_' + k;\n    var className = bulletChart.svgObject.id + '_ComparativeMeasure';\n    if (targetType === 'Rect') {\n      shapeObject = isHorizontal ? this.compareMeasure(x1, y1, y2, k, value) : this.compareVMeasure(y1, y2, x1, k);\n      shapeElement = bulletChart.renderer.drawLine(shapeObject);\n    } else if (targetType === 'Circle') {\n      shapeObject = new CircleOption(id, bulletChart.targetColor, {\n        width: 1,\n        color: bulletChart.targetColor || 'black'\n      }, 1, lx, ly, size);\n      shapeElement = bulletChart.renderer.drawCircle(shapeObject);\n    } else {\n      var crossDirection = 'M ' + (lx - size) + ' ' + (ly - size) + ' L ' + (lx + size) + ' ' + (ly + size) + ' M ' + (lx - size) + ' ' + (ly + size) + ' L ' + (lx + size) + ' ' + (ly - size);\n      shapeObject = new PathOption(id, 'transparent', strokeWidth, bulletChart.targetColor, 1, '', crossDirection);\n      shapeElement = bulletChart.renderer.drawPath(shapeObject);\n    }\n    shapeElement.setAttribute('class', className);\n    return shapeElement;\n  };\n  ScaleGroup.prototype.compareMeasure = function (x1, y1, y2, i, value) {\n    var bulletChart = this.bulletChart;\n    var compareMeasureOptions = {\n      'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n      'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n      'x1': value === bulletChart.maximum ? x1 - bulletChart.targetWidth / 2 : value === bulletChart.minimum ? x1 + bulletChart.targetWidth / 2 : x1,\n      'y1': y1,\n      'x2': value === bulletChart.maximum ? x1 - bulletChart.targetWidth / 2 : value === bulletChart.minimum ? x1 + bulletChart.targetWidth / 2 : x1,\n      'y2': y2,\n      'stroke-width': bulletChart.targetWidth,\n      'stroke': bulletChart.targetColor || 'black'\n    };\n    return compareMeasureOptions;\n  };\n  ScaleGroup.prototype.compareVMeasure = function (x1, x2, y1, i) {\n    var bulletChart = this.bulletChart;\n    var compareMeasureOptions = {\n      'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n      'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n      'x1': x1,\n      'y1': y1,\n      'x2': x2,\n      'y2': y1,\n      'stroke-width': bulletChart.targetWidth,\n      'stroke': bulletChart.targetColor || 'black'\n    };\n    return compareMeasureOptions;\n  };\n  /**\n   * To calculate the bounds on vertical and horizontal orientation changes\n   *\n   * @param {number} value Value of the scale.\n   * @param {string} categoryValue Value of the category.\n   * @param {boolean} isHorizontal Boolean value.\n   * @returns {IFeatureMeasureType} calculateFeatureMeasureBounds\n   */\n  ScaleGroup.prototype.calculateFeatureMeasureBounds = function (value, categoryValue, isHorizontal) {\n    var bulletChart = this.bulletChart;\n    var min = bulletChart.minimum;\n    value = value < min && min <= 0 ? min : value;\n    if (value >= min) {\n      var pointX = void 0;\n      var lastPointX = void 0;\n      var width = void 0;\n      var loc = isHorizontal ? bulletChart.initialClipRect.x : bulletChart.initialClipRect.y;\n      var scaleLength = isHorizontal ? bulletChart.initialClipRect.width : bulletChart.initialClipRect.height;\n      var delta = bulletChart.maximum - bulletChart.minimum;\n      var valueDiff = bulletChart.maximum - value;\n      var orientation_1 = (!bulletChart.enableRtl ? 'forward' : 'backward') + this.scaleOrientation.toLowerCase();\n      categoryValue = isNullOrUndefined(categoryValue) ? '' : categoryValue;\n      var stringLength = measureText(categoryValue.toString(), bulletChart.labelStyle).width;\n      switch (orientation_1) {\n        case 'forwardhorizontal':\n        case 'backwardvertical':\n          pointX = loc + (min > 0 ? 0 : scaleLength / delta * Math.abs(min));\n          width = scaleLength / (delta / (min > 0 ? delta - valueDiff : value));\n          if (value < 0) {\n            width = Math.abs(width);\n            pointX -= width;\n          }\n          width = pointX + width < loc + scaleLength ? width : loc + scaleLength - pointX;\n          lastPointX = loc - (orientation_1 === 'forwardhorizontal' ? stringLength / 2 + 5 : this.labelOffset);\n          break;\n        default:\n          pointX = loc + (scaleLength - scaleLength / (delta / (delta - valueDiff)));\n          width = min > 0 ? scaleLength / (delta / (delta - valueDiff)) : scaleLength / (delta / value);\n          if (value < 0) {\n            width = Math.abs(width);\n            pointX -= width;\n          }\n          if (pointX < loc) {\n            width = pointX + width - loc;\n            pointX = loc;\n          }\n          lastPointX = loc + scaleLength + (orientation_1 === 'backwardhorizontal' ? stringLength / 2 + 5 : 5);\n          break;\n      }\n      return {\n        pointX: pointX,\n        width: width,\n        lastPointX: lastPointX\n      };\n    }\n    return null;\n  };\n  /**\n   * Animates the feature bar.\n   *\n   * @returns {void}\n   */\n  ScaleGroup.prototype.doValueBarAnimation = function () {\n    var valueBarElement = this.feature;\n    if (!valueBarElement) {\n      return null;\n    }\n    var animateOption = this.bulletChart.animation;\n    var animateDuration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : animateOption.duration;\n    var effectType = getAnimationFunction('Linear');\n    var isValuePlot = this.bulletChart.dataSource < 0;\n    var valueX;\n    var valueY;\n    var elementBarHeight = valueBarElement.getBoundingClientRect().height;\n    var elementBarWidth = valueBarElement.getBoundingClientRect().width;\n    var centerX;\n    var centerY;\n    var valueActual;\n    if (this.bulletChart.orientation === 'Horizontal' && valueBarElement) {\n      valueY = parseInt(valueBarElement.getAttribute('height'), 10);\n      valueX = parseInt(valueBarElement.getAttribute('x'), 10);\n      centerY = isValuePlot ? valueY : valueY + elementBarHeight;\n      centerX = valueX;\n    }\n    valueBarElement.style.visibility = 'hidden';\n    new Animation({}).animate(valueBarElement, {\n      duration: animateDuration,\n      delay: animateOption.delay,\n      progress: function (args) {\n        if (args.timeStamp >= args.delay) {\n          valueBarElement.style.visibility = 'visible';\n          elementBarWidth = elementBarWidth ? elementBarWidth : 1;\n          valueActual = effectType(args.timeStamp - args.delay, 0, elementBarWidth, args.duration);\n          valueBarElement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY + ') scale(' + valueActual / elementBarWidth + ', 1) translate(' + -centerX + ' ' + -centerY + ')');\n        }\n      },\n      end: function () {\n        valueBarElement.setAttribute('transform', 'translate(0,0)');\n        valueBarElement.style.visibility = 'visible';\n      }\n    });\n  };\n  /**\n   * Animates the comparative bar.\n   *\n   * @param {number} index Defines the feature bar to animate.\n   * @returns {void}\n   */\n  ScaleGroup.prototype.doTargetBarAnimation = function (index) {\n    var x;\n    var y;\n    var centerX;\n    var centerY;\n    var targetBarelement = this.comparative[index];\n    if (!targetBarelement) {\n      return null;\n    }\n    if (this.bulletChart.orientation === 'Horizontal' && targetBarelement) {\n      y = parseFloat(targetBarelement.getAttribute('y1')) + parseFloat(targetBarelement.getAttribute('y2'));\n      x = parseFloat(targetBarelement.getAttribute('x1'));\n      centerY = y;\n      centerX = x;\n    }\n    targetBarelement.style.visibility = 'hidden';\n    this.animateRect(targetBarelement, centerX, centerY, index + 1);\n  };\n  ScaleGroup.prototype.animateRect = function (targetBarelement, centerX, centerY, index) {\n    var _this = this;\n    var effect = getAnimationFunction('Linear');\n    var value;\n    var option = this.bulletChart.animation;\n    var threshold = this.comparative.length;\n    var duration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : option.duration;\n    new Animation({}).animate(targetBarelement, {\n      duration: duration,\n      delay: option.delay,\n      progress: function (args) {\n        if (args.timeStamp >= args.delay) {\n          targetBarelement.style.visibility = 'visible';\n          value = effect(args.timeStamp - args.delay, 0, 1, args.duration);\n          targetBarelement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY / 2 + ') scale(1,' + value + ') translate(' + -centerX + ' ' + -centerY / 2 + ')');\n        }\n      },\n      end: function () {\n        targetBarelement.setAttribute('transform', 'translate(0,0)');\n        if (index < threshold) {\n          _this.doTargetBarAnimation(index + 1);\n        }\n      }\n    });\n  };\n  return ScaleGroup;\n}();\nexport { ScaleGroup };","map":{"version":3,"names":["isNullOrUndefined","Rect","measureText","textElement","PathOption","RectOption","CircleOption","Animation","getAnimationFunction","ScaleGroup","bulletChart","comparative","dataSource","isVertical","orientation","isTicksInside","tickPosition","isLabelsInside","labelPosition","isHorizontal","isLeft","titlePosition","isRight","isTop","location","featureBarBounds","majorTickSize","majorTickLines","height","labelOffset","labelSize","isLabelBelow","opposedPosition","scaleOrientation","rangeColor","prototype","drawScaleGroup","scaleGroup","rangeGroup","renderer","createGroup","svgObject","id","max","maximum","ranges","scaleSettingsGroup","rect","bullet","enableRtl","initialRect","initialClipRect","locX","x","width","locY","y","area","rangeCollection","start","range","fillRange","i","length","end","color","themeStyle","rangeStrokes","opacity","svgRect","drawRectangle","appendChild","push","sortRangeCollection","a","b","renderFeatureBar","dataCount","renderCommonFeatureBar","categoryValue","dotWidth","padding","initialBoundsStart","lPoint","featueGroup","data","featureBarSize","bounds","categoryField","valueHeight","calculateFeatureMeasureBounds","valueField","type","value","pointX","featureBar","verticalFeatureBar","feature","categoryTextSize","categoryLabelStyle","categorySize","categoryOptions","drawcategory","categoryFontColor","animation","enable","doValueBarAnimation","pointY","featureBarOptions","valueFill","valueBorder","setAttribute","lPointX","lPointY","renderComparativeSymbol","renderCommonComparativeSymbol","scaleLength","y1","y2","x1","comparativeGroup","minimum","delta","targetWidth","temp","values","targetTypes","targetType","targetTypeLength","svgElement","k","targetField","concat","getTargetElement","doTargetBarAnimation","shapeObject","shapeElement","strokeWidth","size","lx","ly","className","compareMeasure","compareVMeasure","drawLine","targetColor","drawCircle","crossDirection","drawPath","compareMeasureOptions","x2","min","lastPointX","loc","valueDiff","orientation_1","toLowerCase","stringLength","toString","labelStyle","Math","abs","valueBarElement","animateOption","animateDuration","animateSeries","duration","effectType","isValuePlot","valueX","valueY","elementBarHeight","getBoundingClientRect","elementBarWidth","centerX","centerY","valueActual","parseInt","getAttribute","style","visibility","animate","delay","progress","args","timeStamp","index","targetBarelement","parseFloat","animateRect","_this","effect","option","threshold"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-charts/src/bullet-chart/renderer/scale-render.js"],"sourcesContent":["import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Rect, measureText, textElement, PathOption } from '@syncfusion/ej2-svg-base';\nimport { RectOption, CircleOption } from '../../common/utils/helper';\nimport { Animation } from '@syncfusion/ej2-base';\nimport { getAnimationFunction } from '../../common/utils/helper';\n/**\n * class for Bullet chart Scale Group\n */\nvar ScaleGroup = /** @class */ (function () {\n    function ScaleGroup(bulletChart) {\n        this.comparative = [];\n        //super();\n        this.dataSource = bulletChart.dataSource;\n        this.isVertical = (bulletChart.orientation === 'Vertical');\n        this.isTicksInside = (bulletChart.tickPosition === 'Inside');\n        this.isLabelsInside = (bulletChart.labelPosition === 'Inside');\n        this.isHorizontal = (bulletChart.orientation === 'Horizontal');\n        this.isLeft = bulletChart.titlePosition === 'Left';\n        this.isRight = bulletChart.titlePosition === 'Right';\n        this.isTop = bulletChart.titlePosition === 'Top';\n        this.location = 10;\n        this.featureBarBounds = [];\n        this.majorTickSize = bulletChart.majorTickLines.height;\n        this.labelOffset = 15;\n        this.labelSize = 12;\n        this.bulletChart = bulletChart;\n        this.isLabelBelow = !this.bulletChart.opposedPosition;\n        this.scaleOrientation = this.bulletChart.orientation;\n        this.rangeColor = [];\n    }\n    /**\n     * To render range scale of the bulletChart graph\n     *\n     * @param {Element} scaleGroup\n     */\n    ScaleGroup.prototype.drawScaleGroup = function (scaleGroup) {\n        var rangeGroup = this.bulletChart.renderer.createGroup({ 'id': this.bulletChart.svgObject.id + '_rangeGroup' });\n        var max = this.bulletChart.maximum;\n        var ranges = this.bulletChart.ranges;\n        this.scaleSettingsGroup = scaleGroup;\n        var rect;\n        var bullet = this.bulletChart;\n        var enableRtl = bullet.enableRtl;\n        var initialRect = bullet.initialClipRect;\n        var locX = initialRect.x + ((enableRtl && bullet.orientation === 'Horizontal') ? initialRect.width : 0);\n        var locY = initialRect.y + ((!enableRtl && bullet.orientation === 'Vertical') ? initialRect.height : 0);\n        var area = 0;\n        bullet.rangeCollection = [];\n        var start = 0;\n        var range = (bullet.orientation === 'Horizontal') ? initialRect.width : initialRect.height;\n        var fillRange = (bullet.orientation === 'Horizontal') ? initialRect.height : initialRect.width;\n        for (var i = 0; i < ranges.length; i++) {\n            area = (range) * ((ranges[i].end - start) / max);\n            if (bullet.orientation === 'Horizontal') {\n                locX -= (enableRtl) ? area : 0;\n            }\n            else {\n                locY -= (!enableRtl) ? area : 0;\n            }\n            rect = new RectOption(bullet.svgObject.id + '_range_' + i, \n            // tslint:disable-next-line:no-string-literal\n            ranges[i].color || this.bulletChart.themeStyle.rangeStrokes[i]['color'], { width: 1 }, ranges[i].opacity, new Rect(locX, locY, ((bullet.orientation === 'Horizontal') ? area : fillRange), ((bullet.orientation === 'Horizontal') ? fillRange : area)));\n            var svgRect = bullet.renderer.drawRectangle(rect);\n            rangeGroup.appendChild(svgRect);\n            scaleGroup.appendChild(rangeGroup);\n            if (bullet.orientation === 'Horizontal') {\n                locX += (enableRtl) ? 0 : area;\n            }\n            else {\n                locY += (!enableRtl) ? 0 : area;\n            }\n            bullet.rangeCollection.push(area);\n            start = ranges[i].end;\n        }\n        return this.bulletChart.rangeCollection;\n    };\n    ScaleGroup.prototype.sortRangeCollection = function (a, b) {\n        return (a - b);\n    };\n    /**\n     * To render the feature bar of the bulletChart chart\n     *\n     * @param {number} dataCount Count of the bar.\n     */\n    ScaleGroup.prototype.renderFeatureBar = function (dataCount) {\n        if (dataCount === 0) {\n            return;\n        }\n        this.renderCommonFeatureBar(dataCount, this.isHorizontal);\n    };\n    /**\n     * To render the horizontal feature bar of the bulletChart chart\n     *\n     * @param {number} dataCount Count of the bar.\n     */\n    ScaleGroup.prototype.renderCommonFeatureBar = function (dataCount, isHorizontal) {\n        var categoryValue;\n        var dotWidth = 6;\n        var padding = 5;\n        var bulletChart = this.bulletChart;\n        var initialBoundsStart = isHorizontal ? (bulletChart.initialClipRect.y + bulletChart.initialClipRect.height) :\n            bulletChart.initialClipRect.x;\n        var lPoint;\n        var featueGroup = bulletChart.renderer.createGroup({ 'id': bulletChart.svgObject.id + '_featureGroup' });\n        var data;\n        var featureBarSize = (isHorizontal ? bulletChart.initialClipRect.height : bulletChart.initialClipRect.width) / dataCount;\n        var bounds;\n        for (var i = 0; i < dataCount; i++) {\n            data = bulletChart.dataSource[i];\n            categoryValue = data[bulletChart.categoryField];\n            if (isHorizontal) {\n                lPoint = initialBoundsStart - (featureBarSize * i) - (featureBarSize + bulletChart.valueHeight) / 2;\n            }\n            else {\n                lPoint = initialBoundsStart + (featureBarSize * i) + (featureBarSize / 2) - bulletChart.valueHeight / 2;\n            }\n            bounds = this.calculateFeatureMeasureBounds(data[bulletChart.valueField], categoryValue, isHorizontal);\n            if (data && bulletChart.type === 'Dot') {\n                var value = data[bulletChart.valueField];\n                if (isHorizontal) {\n                    bounds.pointX = bounds.pointX + (((value > 0) && !bulletChart.enableRtl) ||\n                        ((value < 0) && bulletChart.enableRtl) ? (bounds.width) : 0) - dotWidth / 2;\n                }\n                else {\n                    bounds.pointX = bounds.pointX + (((value > 0) && bulletChart.enableRtl) ||\n                        ((value < 0) && !bulletChart.enableRtl) ? (bounds.width) : 0) - dotWidth / 2;\n                }\n                bounds.width = dotWidth;\n            }\n            // Drawing feature bar rect element\n            if (bounds) {\n                var svgRect = isHorizontal ? this.featureBar(bounds.pointX, lPoint, bounds.width, i) :\n                    this.verticalFeatureBar(lPoint, bounds.pointX, bounds.width, i);\n                featueGroup.appendChild(svgRect);\n                this.feature = svgRect;\n                this.scaleSettingsGroup.appendChild(featueGroup);\n                this.featureBarBounds[i] = { x: bounds.pointX, y: lPoint, width: bounds.width, height: bulletChart.valueHeight };\n                // Drawing category text element\n                if (!isNullOrUndefined(categoryValue)) {\n                    var categoryTextSize = measureText(categoryValue, bulletChart.categoryLabelStyle);\n                    var categorySize = isHorizontal ? categoryTextSize.width : categoryTextSize.height;\n                    var initialRect = bulletChart.initialClipRect;\n                    var x = void 0;\n                    var categoryOptions = void 0;\n                    if (isHorizontal) {\n                        x = (bulletChart.enableRtl) ? (initialRect.x + initialRect.width + padding + categorySize / 2) :\n                            initialRect.x - padding - categorySize / 2;\n                        categoryOptions = this.drawcategory(x, lPoint, categoryValue);\n                    }\n                    else {\n                        x = (bulletChart.enableRtl) ? (initialRect.y - padding - categorySize / 2) :\n                            initialRect.y + initialRect.height + padding + categorySize / 2;\n                        categoryOptions = this.drawcategory(lPoint + bulletChart.valueHeight / 2, x, categoryValue);\n                    }\n                    textElement(categoryOptions, bulletChart.categoryLabelStyle, bulletChart.categoryLabelStyle.color || bulletChart.themeStyle.categoryFontColor, this.scaleSettingsGroup);\n                }\n            }\n            if (bulletChart.animation.enable) {\n                this.doValueBarAnimation();\n            }\n        }\n    };\n    ScaleGroup.prototype.featureBar = function (pointX, pointY, width, i) {\n        var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, width, this.bulletChart.valueHeight));\n        var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n        svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n        svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n        return svgRect;\n    };\n    ScaleGroup.prototype.verticalFeatureBar = function (pointX, pointY, width, i) {\n        var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, this.bulletChart.valueHeight, width));\n        var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n        svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n        svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n        return svgRect;\n    };\n    ScaleGroup.prototype.drawcategory = function (lPointX, lPointY, categoryValue) {\n        var categoryOptions = {\n            'id': '',\n            'anchor': 'middle',\n            'x': lPointX,\n            'y': lPointY + (this.bulletChart.valueHeight),\n            'transform': '',\n            'text': categoryValue,\n            'baseLine': '',\n            'labelRotation': 0\n        };\n        return categoryOptions;\n    };\n    /**\n     * To render comparative symbol of the bulletChart chart\n     *\n     * @param {number} dataCount Data count value.\n     */\n    ScaleGroup.prototype.renderComparativeSymbol = function (dataCount) {\n        if (dataCount === 0) {\n            return;\n        }\n        this.renderCommonComparativeSymbol(dataCount, this.isHorizontal);\n    };\n    ScaleGroup.prototype.renderCommonComparativeSymbol = function (dataCount, isHorizontal) {\n        var bulletChart = this.bulletChart;\n        var value;\n        var rect = bulletChart.initialClipRect;\n        var scaleLength = isHorizontal ? rect.width : rect.height;\n        var y1;\n        var y2;\n        var x1;\n        var pointY = isHorizontal ? (rect.y + rect.height) : rect.x;\n        var comparativeGroup = bulletChart.renderer.createGroup({ 'id': bulletChart.svgObject.id + '_comparativeGroup' });\n        var minimum = bulletChart.minimum;\n        var maximum = bulletChart.maximum;\n        var delta = maximum - minimum;\n        var targetWidth = bulletChart.targetWidth;\n        var pointX = isHorizontal ? (rect.x - (targetWidth / 2)) : (rect.y + rect.height);\n        var temp;\n        var values = [];\n        var targetTypes = bulletChart.targetTypes;\n        var targetType = 'Rect';\n        var targetTypeLength = targetTypes.length;\n        var featureBarSize = (isHorizontal ? rect.height : rect.width) / dataCount;\n        var svgElement;\n        for (var k = 0; k < dataCount; k++) {\n            value = bulletChart.dataSource[k][bulletChart.targetField];\n            values = values.concat(value);\n            for (var i = 0; i < values.length; i++) {\n                targetType = targetTypes[i % targetTypeLength];\n                if (values[i] >= minimum && values[i] <= maximum) {\n                    if (isHorizontal) {\n                        temp = pointY - (featureBarSize * k) - (featureBarSize / 2);\n                    }\n                    else {\n                        temp = pointY + (featureBarSize * k) + (featureBarSize / 2);\n                    }\n                    y1 = temp - targetWidth * 1.5;\n                    y2 = temp + targetWidth * 1.5;\n                    temp = (scaleLength / (delta / (delta - (maximum - values[i]))));\n                    if (isHorizontal) {\n                        x1 = pointX + (bulletChart.enableRtl ? (scaleLength - temp) : temp);\n                    }\n                    else {\n                        x1 = pointX - (bulletChart.enableRtl ? (scaleLength - temp) : temp);\n                    }\n                    svgElement = this.getTargetElement(targetType, isHorizontal, x1, y1, y2, values[i], k);\n                    this.comparative.push(svgElement);\n                    comparativeGroup.appendChild(svgElement);\n                    y1 = 0;\n                    y2 = 0;\n                }\n                this.scaleSettingsGroup.appendChild(comparativeGroup);\n            }\n            values = [];\n            if (bulletChart.animation.enable) {\n                this.doTargetBarAnimation(0);\n            }\n        }\n    };\n    ScaleGroup.prototype.getTargetElement = function (targetType, isHorizontal, x1, y1, y2, value, k) {\n        var shapeObject;\n        var shapeElement;\n        var bulletChart = this.bulletChart;\n        var strokeWidth = (targetType === 'Cross') ? bulletChart.targetWidth - 1 : 1;\n        var size = (targetType === 'Circle') ? bulletChart.targetWidth - 1 : bulletChart.targetWidth;\n        var lx = isHorizontal ? x1 + (size / 2) : y1 + ((y2 - y1) / 2);\n        var ly = isHorizontal ? y1 + ((y2 - y1) / 2) : x1;\n        var id = bulletChart.svgObject.id + '_ComparativeMeasure_' + k;\n        var className = bulletChart.svgObject.id + '_ComparativeMeasure';\n        if (targetType === 'Rect') {\n            shapeObject = isHorizontal ? this.compareMeasure(x1, y1, y2, k, value) : this.compareVMeasure(y1, y2, x1, k);\n            shapeElement = bulletChart.renderer.drawLine(shapeObject);\n        }\n        else if (targetType === 'Circle') {\n            shapeObject = new CircleOption(id, bulletChart.targetColor, { width: 1, color: bulletChart.targetColor || 'black' }, 1, lx, ly, size);\n            shapeElement = bulletChart.renderer.drawCircle(shapeObject);\n        }\n        else {\n            var crossDirection = 'M ' + (lx - size) + ' ' + (ly - size) + ' L ' + (lx + size) + ' ' + (ly + size) + ' M ' +\n                (lx - size) + ' ' + (ly + size) + ' L ' + (lx + size) + ' ' + (ly - size);\n            shapeObject = new PathOption(id, 'transparent', strokeWidth, bulletChart.targetColor, 1, '', crossDirection);\n            shapeElement = bulletChart.renderer.drawPath(shapeObject);\n        }\n        shapeElement.setAttribute('class', className);\n        return shapeElement;\n    };\n    ScaleGroup.prototype.compareMeasure = function (x1, y1, y2, i, value) {\n        var bulletChart = this.bulletChart;\n        var compareMeasureOptions = {\n            'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n            'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n            'x1': (value === bulletChart.maximum) ? x1 - (bulletChart.targetWidth / 2) :\n                (value === bulletChart.minimum) ? x1 + (bulletChart.targetWidth / 2) : x1,\n            'y1': y1,\n            'x2': (value === bulletChart.maximum) ? x1 - (bulletChart.targetWidth / 2) :\n                (value === bulletChart.minimum) ? x1 + (bulletChart.targetWidth / 2) : x1,\n            'y2': y2,\n            'stroke-width': bulletChart.targetWidth,\n            'stroke': bulletChart.targetColor || 'black'\n        };\n        return compareMeasureOptions;\n    };\n    ScaleGroup.prototype.compareVMeasure = function (x1, x2, y1, i) {\n        var bulletChart = this.bulletChart;\n        var compareMeasureOptions = {\n            'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n            'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n            'x1': x1,\n            'y1': y1,\n            'x2': x2,\n            'y2': y1,\n            'stroke-width': bulletChart.targetWidth,\n            'stroke': bulletChart.targetColor || 'black'\n        };\n        return compareMeasureOptions;\n    };\n    /**\n     * To calculate the bounds on vertical and horizontal orientation changes\n     *\n     * @param {number} value Value of the scale.\n     * @param {string} categoryValue Value of the category.\n     * @param {boolean} isHorizontal Boolean value.\n     * @returns {IFeatureMeasureType} calculateFeatureMeasureBounds\n     */\n    ScaleGroup.prototype.calculateFeatureMeasureBounds = function (value, categoryValue, isHorizontal) {\n        var bulletChart = this.bulletChart;\n        var min = bulletChart.minimum;\n        value = (value < min && min <= 0) ? min : value;\n        if (value >= min) {\n            var pointX = void 0;\n            var lastPointX = void 0;\n            var width = void 0;\n            var loc = isHorizontal ? bulletChart.initialClipRect.x : bulletChart.initialClipRect.y;\n            var scaleLength = isHorizontal ? bulletChart.initialClipRect.width : bulletChart.initialClipRect.height;\n            var delta = bulletChart.maximum - bulletChart.minimum;\n            var valueDiff = bulletChart.maximum - value;\n            var orientation_1 = ((!bulletChart.enableRtl) ? 'forward' : 'backward') + this.scaleOrientation.toLowerCase();\n            categoryValue = isNullOrUndefined(categoryValue) ? '' : categoryValue;\n            var stringLength = measureText(categoryValue.toString(), bulletChart.labelStyle).width;\n            switch (orientation_1) {\n                case 'forwardhorizontal':\n                case 'backwardvertical':\n                    pointX = loc + ((min > 0) ? 0 : scaleLength / delta * Math.abs(min));\n                    width = scaleLength / (delta / ((min > 0) ? delta - valueDiff : value));\n                    if (value < 0) {\n                        width = Math.abs(width);\n                        pointX -= width;\n                    }\n                    width = (pointX + width < loc + scaleLength) ? width : loc + scaleLength - pointX;\n                    lastPointX = loc - ((orientation_1 === 'forwardhorizontal') ? (stringLength / 2 + 5) :\n                        this.labelOffset);\n                    break;\n                default:\n                    pointX = loc + (scaleLength - scaleLength / (delta / (delta - valueDiff)));\n                    width = (min > 0) ? scaleLength / (delta / (delta - valueDiff)) : scaleLength / (delta / (value));\n                    if (value < 0) {\n                        width = Math.abs(width);\n                        pointX -= width;\n                    }\n                    if (pointX < loc) {\n                        width = pointX + width - loc;\n                        pointX = loc;\n                    }\n                    lastPointX = loc + scaleLength + ((orientation_1 === 'backwardhorizontal') ? (stringLength / 2 +\n                        5) : 5);\n                    break;\n            }\n            return { pointX: pointX, width: width, lastPointX: lastPointX };\n        }\n        return null;\n    };\n    /**\n     * Animates the feature bar.\n     *\n     * @returns {void}\n     */\n    ScaleGroup.prototype.doValueBarAnimation = function () {\n        var valueBarElement = this.feature;\n        if (!valueBarElement) {\n            return null;\n        }\n        var animateOption = this.bulletChart.animation;\n        var animateDuration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : animateOption.duration;\n        var effectType = getAnimationFunction('Linear');\n        var isValuePlot = this.bulletChart.dataSource < 0;\n        var valueX;\n        var valueY;\n        var elementBarHeight = valueBarElement.getBoundingClientRect().height;\n        var elementBarWidth = valueBarElement.getBoundingClientRect().width;\n        var centerX;\n        var centerY;\n        var valueActual;\n        if (this.bulletChart.orientation === 'Horizontal' && valueBarElement) {\n            valueY = parseInt(valueBarElement.getAttribute('height'), 10);\n            valueX = parseInt(valueBarElement.getAttribute('x'), 10);\n            centerY = isValuePlot ? valueY : valueY + elementBarHeight;\n            centerX = valueX;\n        }\n        valueBarElement.style.visibility = 'hidden';\n        new Animation({}).animate(valueBarElement, {\n            duration: animateDuration,\n            delay: animateOption.delay,\n            progress: function (args) {\n                if (args.timeStamp >= args.delay) {\n                    valueBarElement.style.visibility = 'visible';\n                    elementBarWidth = elementBarWidth ? elementBarWidth : 1;\n                    valueActual = effectType(args.timeStamp - args.delay, 0, elementBarWidth, args.duration);\n                    valueBarElement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY +\n                        ') scale(' + (valueActual / elementBarWidth) + ', 1) translate(' + (-centerX) + ' ' + (-centerY) + ')');\n                }\n            },\n            end: function () {\n                valueBarElement.setAttribute('transform', 'translate(0,0)');\n                valueBarElement.style.visibility = 'visible';\n            }\n        });\n    };\n    /**\n     * Animates the comparative bar.\n     *\n     * @param {number} index Defines the feature bar to animate.\n     * @returns {void}\n     */\n    ScaleGroup.prototype.doTargetBarAnimation = function (index) {\n        var x;\n        var y;\n        var centerX;\n        var centerY;\n        var targetBarelement = this.comparative[index];\n        if (!targetBarelement) {\n            return null;\n        }\n        if (this.bulletChart.orientation === 'Horizontal' && targetBarelement) {\n            y = parseFloat(targetBarelement.getAttribute('y1')) + parseFloat(targetBarelement.getAttribute('y2'));\n            x = parseFloat(targetBarelement.getAttribute('x1'));\n            centerY = y;\n            centerX = x;\n        }\n        targetBarelement.style.visibility = 'hidden';\n        this.animateRect(targetBarelement, centerX, centerY, index + 1);\n    };\n    ScaleGroup.prototype.animateRect = function (targetBarelement, centerX, centerY, index) {\n        var _this = this;\n        var effect = getAnimationFunction('Linear');\n        var value;\n        var option = this.bulletChart.animation;\n        var threshold = this.comparative.length;\n        var duration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : option.duration;\n        new Animation({}).animate(targetBarelement, {\n            duration: duration,\n            delay: option.delay,\n            progress: function (args) {\n                if (args.timeStamp >= args.delay) {\n                    targetBarelement.style.visibility = 'visible';\n                    value = effect(args.timeStamp - args.delay, 0, 1, args.duration);\n                    targetBarelement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY / 2 +\n                        ') scale(1,' + (value) + ') translate(' + (-centerX) + ' ' + (-centerY / 2) + ')');\n                }\n            },\n            end: function () {\n                targetBarelement.setAttribute('transform', 'translate(0,0)');\n                if (index < threshold) {\n                    _this.doTargetBarAnimation(index + 1);\n                }\n            }\n        });\n    };\n    return ScaleGroup;\n}());\nexport { ScaleGroup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}