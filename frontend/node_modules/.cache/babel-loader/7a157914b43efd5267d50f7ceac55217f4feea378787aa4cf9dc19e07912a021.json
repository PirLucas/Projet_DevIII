{"ast":null,"code":"import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\nvar ContextMenu = /** @class */function () {\n  /**\n   * Constructor for the ContextMenu module\n   *\n   * @param {IFileManager} parent - Specifies the parent element.\n   * @hidden\n   */\n  function ContextMenu(parent) {\n    this.currentItems = [];\n    this.currentElement = null;\n    this.disabledItems = [];\n    this.parent = parent;\n    this.render();\n  }\n  ContextMenu.prototype.render = function () {\n    this.keyConfigs = {\n      downarrow: 'downarrow',\n      uparrow: 'uparrown'\n    };\n    this.contextMenu = new Menu({\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      target: '#' + this.parent.element.id,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      beforeItemRender: this.onBeforeItemRender.bind(this),\n      select: this.onSelect.bind(this),\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this),\n      cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n    });\n    this.contextMenu.isStringTemplate = true;\n    this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n    this.addEventListener();\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onBeforeItemRender = function (args) {\n    if (args.item.id === this.getMenuId('largeiconsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n    }\n    if (args.item.id === this.getMenuId('detailsview')) {\n      var iconSpan = createElement('span');\n      var element = args.element;\n      element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n      iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n    }\n  };\n  ContextMenu.prototype.onBeforeClose = function () {\n    this.menuTarget = null;\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n    this.disabledItems = [];\n    var selected = false;\n    var uid;\n    // eslint-disable-next-line\n    var data;\n    var treeFolder = false;\n    var target = args.event.target;\n    this.menuTarget = this.targetNodeElement = target;\n    this.currentElement = args.element;\n    if (target.classList.contains('e-spinner-pane')) {\n      target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n      this.menuTarget = this.targetNodeElement = target;\n    }\n    this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n    var view = this.getTargetView(target);\n    this.updateActiveModule();\n    /* istanbul ignore next */\n    if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') || closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID) || closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID)) {\n      args.cancel = true;\n      // eslint:disable-next-line\n    } else if (!(this.parent.view === 'LargeIcons') && this.targetElement && this.targetElement.classList.contains('e-emptyrow')) {\n      this.setLayoutItem(target);\n      /* istanbul ignore next */\n    } else if (closest(target, '.' + CLS.EMPTY)) {\n      this.setLayoutItem(target);\n      // eslint:disable-next-line\n    } else if (!target.classList.contains(CLS.MENU_ITEM) && !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n      /* istanbul ignore next */\n      // eslint:disable-next-line\n      if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        var eveArgs = {\n          ctrlKey: true,\n          shiftKey: true\n        };\n        if (!closest(target, 'li').classList.contains('e-active')) {\n          this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n        }\n        // eslint-disable-next-line\n        data = this.parent.visitedData;\n        selected = true;\n      } else if (!isNOU(closest(target, 'tr.e-row'))) {\n        uid = this.targetElement.getAttribute('data-uid');\n        // eslint-disable-next-line\n        data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n        if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n          /* istanbul ignore next */\n          this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('aria-rowindex'), 10)]);\n        }\n        selected = true;\n        /* istanbul ignore next */\n      } else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n        uid = closest(target, 'li').getAttribute('data-uid');\n        treeFolder = true;\n      }\n      /* istanbul ignore next */\n      if (selected) {\n        if (getValue('isFile', data) === true) {\n          this.setFileItem();\n        } else {\n          this.setFolderItem(false);\n        }\n        /* istanbul ignore next */\n      } else if (treeFolder) {\n        this.setFolderItem(true);\n        if (uid === this.parent.pathId[0]) {\n          this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n        }\n        /* istanbul ignore next */\n        // eslint:disable-next-line\n      } else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n        this.setLayoutItem(target);\n        /* istanbul ignore next */\n      } else {\n        args.cancel = true;\n      }\n    }\n    var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n    if (!args.cancel && !this.parent.enablePaste && pasteEle && !pasteEle.classList.contains('e-disabled')) {\n      this.disabledItems.push('Paste');\n    }\n    if (args.cancel) {\n      this.menuTarget = this.currentElement = null;\n      return;\n    }\n    this.contextMenu.dataBind();\n    var isSubMenu = false;\n    if (target.classList.contains(CLS.MENU_ITEM) || target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n      isSubMenu = true;\n    }\n    this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n    var eventArgs = {\n      fileDetails: [this.menuItemData],\n      element: args.element,\n      target: target,\n      items: isSubMenu ? args.items : this.contextMenu.items,\n      menuModule: this.contextMenu,\n      cancel: false,\n      menuType: this.menuType,\n      isSubMenu: isSubMenu\n    };\n    this.currentItems = eventArgs.items;\n    this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n      if (!isSubMenu) {\n        _this.contextMenu.dataBind();\n        _this.contextMenu.items = menuOpenArgs.items;\n        _this.contextMenu.dataBind();\n      }\n      _this.enableItems(_this.disabledItems, false, true);\n      args.cancel = menuOpenArgs.cancel;\n      if (menuOpenArgs.cancel) {\n        _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n      }\n    });\n  };\n  ContextMenu.prototype.updateActiveModule = function () {\n    this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ? 'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ? 'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ? 'largeiconsview' : this.parent.activeModule;\n  };\n  /* istanbul ignore next */\n  /**\n   *\n   * @param {Element} target - specifies the target element.\n   * @returns {string} -returns the target view.\n   * @hidden\n   */\n  ContextMenu.prototype.getTargetView = function (target) {\n    return target.classList.contains(CLS.TREE_VIEW) ? 'TreeView' : target.classList.contains(CLS.GRID_VIEW) ? 'GridView' : target.classList.contains(CLS.ICON_VIEW) ? 'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ? 'LargeIcon' : '';\n  };\n  ContextMenu.prototype.getItemIndex = function (item) {\n    var itemId = this.getMenuId(item);\n    for (var i = 0; i < this.currentItems.length; i++) {\n      if (this.currentItems[i].id === itemId || this.currentItems[i].id === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  ContextMenu.prototype.disableItem = function (items) {\n    if (items.length !== 0) {\n      this.disabledItems = this.disabledItems.concat(items);\n    }\n  };\n  ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n    for (var i = 0; i < items.length; i++) {\n      if (this.checkValidItem(items[i]) === 1) {\n        this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n      } else if (this.checkValidItem(items[i]) === 2) {\n        this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n      }\n    }\n  };\n  ContextMenu.prototype.setFolderItem = function (isTree) {\n    this.menuType = 'folder';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (isTree) {\n      this.disabledItems.push('Open');\n    } else if (this.parent.selectedItems.length !== 1) {\n      this.disabledItems.push('Rename', 'Paste');\n    }\n  };\n  ContextMenu.prototype.setFileItem = function () {\n    this.menuType = 'file';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (this.parent.selectedItems.length !== 1) {\n      this.disabledItems.push('Rename');\n    }\n  };\n  ContextMenu.prototype.setLayoutItem = function (target) {\n    this.menuType = 'layout';\n    this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) {\n      return item.trim();\n    }));\n    this.contextMenu.dataBind();\n    if (!this.parent.allowMultiSelection || this.parent.view === 'LargeIcons' && closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0 || this.parent.view === 'Details' && closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0) {\n      this.disabledItems.push('SelectAll');\n    }\n    if (this.parent.selectedNodes.length === 0) {\n      this.disabledItems.push('Paste');\n    }\n    this.contextMenu.dataBind();\n  };\n  ContextMenu.prototype.checkValidItem = function (nameEle) {\n    if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n      return 1;\n    } else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n      return 2;\n    } else {\n      return -1;\n    }\n  };\n  // eslint-disable-next-line\n  ContextMenu.prototype.getMenuItemData = function () {\n    if (this.menuType === 'layout') {\n      return getPathObject(this.parent);\n    } else {\n      // eslint-disable-next-line\n      var args = {\n        target: this.menuTarget\n      };\n      this.parent.notify(events.menuItemData, args);\n      return this.parent.itemData[0];\n    }\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.onSelect = function (args) {\n    var _this = this;\n    if (isNOU(args.item) || !args.item.id) {\n      return;\n    }\n    var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length);\n    // eslint-disable-next-line\n    var details;\n    if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n      details = [getPathObject(this.parent)];\n      this.parent.itemData = details;\n    } else {\n      this.parent.notify(events.selectedData, {});\n      if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n        details = [this.menuItemData];\n      } else {\n        details = this.parent.itemData;\n      }\n    }\n    var eventArgs = {\n      cancel: false,\n      element: args.element,\n      fileDetails: details,\n      item: args.item\n    };\n    this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n      var sItems;\n      if (!menuClickArgs.cancel) {\n        // eslint:disable-next-line\n        switch (itemText) {\n          case 'cut':\n            cutFiles(_this.parent);\n            break;\n          case 'copy':\n            copyFiles(_this.parent);\n            break;\n          case 'paste':\n            if (_this.menuType === 'folder') {\n              if (_this.parent.activeModule === 'largeiconsview' || _this.parent.activeModule === 'detailsview') {\n                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n              } else {\n                _this.parent.folderPath = '';\n              }\n            } else {\n              _this.parent.folderPath = '';\n            }\n            pasteHandler(_this.parent);\n            break;\n          case 'delete':\n            for (var j = 0; j < details.length; j++) {\n              if (!hasEditAccess(details[j])) {\n                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                return;\n              }\n            }\n            createDialog(_this.parent, 'Delete');\n            break;\n          /* istanbul ignore next */\n          case 'download':\n            for (var i = 0; i < details.length; i++) {\n              if (!hasDownloadAccess(details[i])) {\n                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                return;\n              }\n            }\n            if (_this.parent.activeModule === 'navigationpane') {\n              _this.parent.notify(events.downloadInit, {});\n            } else if (_this.parent.selectedItems.length > 0) {\n              Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n            }\n            break;\n          case 'rename':\n            if (!hasEditAccess(details[0])) {\n              createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n            } else {\n              _this.parent.notify(events.renameInit, {});\n              createDialog(_this.parent, 'Rename');\n            }\n            break;\n          case 'selectall':\n            /* istanbul ignore next */\n            _this.parent.notify(events.selectAllInit, {});\n            break;\n          case 'refresh':\n            refresh(_this.parent);\n            break;\n          case 'open':\n            if (_this.parent.visitedItem) {\n              _this.parent.notify(events.openInit, {\n                target: _this.parent.visitedItem\n              });\n            } else if (_this.parent.activeModule === 'navigationpane') {\n              _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n            }\n            break;\n          case 'details':\n            _this.parent.notify(events.detailsInit, {});\n            sItems = _this.parent.selectedItems;\n            if (_this.parent.activeModule === 'navigationpane') {\n              sItems = [];\n            }\n            GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n            break;\n          case 'newfolder':\n            createNewFolder(_this.parent);\n            break;\n          case 'upload':\n            uploadItem(_this.parent);\n            break;\n          /* istanbul ignore next */\n          case 'name':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'size':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'date':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'ascending':\n          /* istanbul ignore next */\n          // eslint-disable-next-line no-fallthrough\n          case 'descending':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n          /* istanbul ignore next */\n          case 'none':\n            /* istanbul ignore next */\n            sortbyClickHandler(_this.parent, args);\n            break;\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n          case 'largeiconsview':\n            updateLayout(_this.parent, 'LargeIcons');\n            break;\n          /* istanbul ignore next */\n          // eslint:disable-next-line\n          case 'detailsview':\n            updateLayout(_this.parent, 'Details');\n            break;\n        }\n      }\n    });\n  };\n  ContextMenu.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'cssClass':\n          this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n          break;\n      }\n    }\n  };\n  ContextMenu.prototype.addEventListener = function () {\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  ContextMenu.prototype.removeEventListener = function () {\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.keyboardModule.destroy();\n  };\n  ContextMenu.prototype.keyActionHandler = function (e) {\n    switch (e.action) {\n      case 'uparrow':\n      case 'downarrow':\n        e.preventDefault();\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name.\n   * @private\n   */\n  ContextMenu.prototype.getModuleName = function () {\n    return 'contextmenu';\n  };\n  ContextMenu.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.removeEventListener();\n    this.contextMenu.destroy();\n  };\n  /* istanbul ignore next */\n  ContextMenu.prototype.getItemData = function (data) {\n    var items = [];\n    for (var i = 0; i < data.length; i++) {\n      var item = void 0;\n      var itemId = this.getMenuId(data[i]);\n      var itemText = getLocaleText(this.parent, data[i]);\n      switch (data[i]) {\n        case '|':\n          item = {\n            separator: true\n          };\n          break;\n        case 'Open':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_OPEN\n          };\n          break;\n        case 'Upload':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_UPLOAD\n          };\n          break;\n        case 'Cut':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_CUT\n          };\n          break;\n        case 'Copy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_COPY\n          };\n          break;\n        case 'Paste':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_PASTE\n          };\n          break;\n        case 'Delete':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DELETE\n          };\n          break;\n        case 'Rename':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_RENAME\n          };\n          break;\n        case 'NewFolder':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_NEWFOLDER\n          };\n          break;\n        case 'Details':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DETAILS\n          };\n          break;\n        case 'SortBy':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SHORTBY,\n            items: [{\n              id: this.getMenuId('Name'),\n              text: getLocaleText(this.parent, 'Name'),\n              iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Size'),\n              text: getLocaleText(this.parent, 'Size'),\n              iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n            }, {\n              id: this.getMenuId('Date'),\n              text: getLocaleText(this.parent, 'DateModified'),\n              iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n            }, {\n              separator: true\n            }, {\n              id: this.getMenuId('Ascending'),\n              text: getLocaleText(this.parent, 'Ascending'),\n              iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('Descending'),\n              text: getLocaleText(this.parent, 'Descending'),\n              iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n            }, {\n              id: this.getMenuId('None'),\n              text: getLocaleText(this.parent, 'None'),\n              iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n        /* istanbul ignore next */\n        case 'View':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n            items: [{\n              id: this.getMenuId('largeiconsview'),\n              text: getLocaleText(this.parent, 'View-LargeIcons'),\n              iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n            }, {\n              id: this.getMenuId('detailsview'),\n              text: getLocaleText(this.parent, 'View-Details'),\n              iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n            }]\n          };\n          break;\n        case 'Refresh':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_REFRESH\n          };\n          break;\n        case 'SelectAll':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_SELECTALL\n          };\n          break;\n        /* istanbul ignore next */\n        case 'Download':\n          item = {\n            id: itemId,\n            text: itemText,\n            iconCss: CLS.ICON_DOWNLOAD\n          };\n          break;\n        /* istanbul ignore next */\n        default:\n          item = {\n            id: itemId,\n            text: itemText\n          };\n          break;\n      }\n      items.push(item);\n    }\n    return items;\n  };\n  ContextMenu.prototype.getMenuId = function (id) {\n    return this.parent.element.id + '_cm_' + id.toLowerCase();\n  };\n  return ContextMenu;\n}();\nexport { ContextMenu };","map":{"version":3,"names":["ContextMenu","Menu","isNullOrUndefined","isNOU","createElement","closest","KeyboardEvents","getValue","select","Download","GetDetails","createDialog","cutFiles","copyFiles","refresh","getPathObject","getLocaleText","updateLayout","getFullPath","getCssClass","sortbyClickHandler","pasteHandler","createDeniedDialog","createNewFolder","uploadItem","hasEditAccess","hasDownloadAccess","events","CLS","parent","currentItems","currentElement","disabledItems","render","prototype","keyConfigs","downarrow","uparrow","contextMenu","enableRtl","locale","target","element","id","enableHtmlSanitizer","beforeItemRender","onBeforeItemRender","bind","onSelect","beforeOpen","onBeforeOpen","beforeClose","onBeforeClose","cssClass","ROOT_POPUP","isStringTemplate","appendTo","CONTEXT_MENU_ID","addEventListener","args","item","getMenuId","iconSpan","insertBefore","view","childNodes","setAttribute","ICON_LARGE","MENU_ICON","ICON_GRID","menuTarget","_this","selected","uid","data","treeFolder","event","targetNodeElement","classList","contains","navigationpaneModule","activeNode","getElementsByClassName","FULLROW","targetElement","getTargetView","updateActiveModule","TREE_VIEW","BREADCRUMBBAR_ID","TOOLBAR_ID","cancel","setLayoutItem","EMPTY","MENU_ITEM","SUBMENU_ICON","TREE_ID","eveArgs","ctrlKey","shiftKey","largeiconsviewModule","doSelection","visitedData","getAttribute","detailsviewModule","gridObj","getRowObjectFromUID","selectRows","parseInt","setFileItem","setFolderItem","pathId","push","pasteEle","enablePaste","dataBind","isSubMenu","menuItemData","getMenuItemData","eventArgs","fileDetails","items","menuModule","menuType","trigger","menuOpenArgs","enableItems","activeModule","GRID_ID","LARGEICON_ID","GRID_VIEW","ICON_VIEW","LARGE_ICONS","getItemIndex","itemId","i","length","disableItem","concat","enable","isUniqueId","checkValidItem","isTree","getItemData","contextMenuSettings","folder","map","trim","selectedItems","file","layout","allowMultiSelection","selectedNodes","nameEle","notify","itemData","itemText","substr","details","selectedData","menuClickArgs","sItems","folderPath","path","j","permissionEdit","permissionDownload","downloadInit","renameInit","selectAllInit","visitedItem","openInit","openFileOnContextMenuClick","detailsInit","onPropertyChanged","e","module","getModuleName","_i","_a","Object","keys","newProp","prop","on","destroy","modelChanged","keyboardModule","keyAction","keyActionHandler","eventName","removeEventListener","off","action","preventDefault","isDestroyed","separator","text","iconCss","ICON_OPEN","ICON_UPLOAD","ICON_CUT","ICON_COPY","ICON_PASTE","ICON_DELETE","ICON_RENAME","ICON_NEWFOLDER","ICON_DETAILS","ICON_SHORTBY","sortBy","TB_OPTION_DOT","sortOrder","TB_OPTION_TICK","ICON_REFRESH","ICON_SELECTALL","ICON_DOWNLOAD","toLowerCase"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-filemanager/src/file-manager/pop-up/context-menu.js"],"sourcesContent":["import { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { isNullOrUndefined as isNOU, createElement, closest, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, select } from '@syncfusion/ej2-base';\nimport { Download, GetDetails } from './../common/operations';\nimport { createDialog } from './dialog';\nimport { cutFiles, copyFiles, refresh, getPathObject, getLocaleText, updateLayout, getFullPath } from './../common/utility';\nimport { getCssClass, sortbyClickHandler, pasteHandler } from './../common/utility';\nimport { createDeniedDialog, createNewFolder, uploadItem, hasEditAccess, hasDownloadAccess } from './../common/utility';\nimport * as events from './../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * ContextMenu module\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * Constructor for the ContextMenu module\n     *\n     * @param {IFileManager} parent - Specifies the parent element.\n     * @hidden\n     */\n    function ContextMenu(parent) {\n        this.currentItems = [];\n        this.currentElement = null;\n        this.disabledItems = [];\n        this.parent = parent;\n        this.render();\n    }\n    ContextMenu.prototype.render = function () {\n        this.keyConfigs = {\n            downarrow: 'downarrow',\n            uparrow: 'uparrown'\n        };\n        this.contextMenu = new Menu({\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            target: '#' + this.parent.element.id,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeItemRender: this.onBeforeItemRender.bind(this),\n            select: this.onSelect.bind(this),\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            cssClass: getCssClass(this.parent, CLS.ROOT_POPUP)\n        });\n        this.contextMenu.isStringTemplate = true;\n        this.contextMenu.appendTo('#' + this.parent.element.id + CLS.CONTEXT_MENU_ID);\n        this.addEventListener();\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeItemRender = function (args) {\n        if (args.item.id === this.getMenuId('largeiconsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'LargeIcons' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_LARGE + ' ' + CLS.MENU_ICON);\n        }\n        if (args.item.id === this.getMenuId('detailsview')) {\n            var iconSpan = createElement('span');\n            var element = args.element;\n            element.insertBefore(iconSpan, this.parent.view === 'Details' ? element.childNodes[1] : element.childNodes[0]);\n            iconSpan.setAttribute('class', CLS.ICON_GRID + ' ' + CLS.MENU_ICON);\n        }\n    };\n    ContextMenu.prototype.onBeforeClose = function () {\n        this.menuTarget = null;\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        this.disabledItems = [];\n        var selected = false;\n        var uid;\n        // eslint-disable-next-line\n        var data;\n        var treeFolder = false;\n        var target = args.event.target;\n        this.menuTarget = this.targetNodeElement = target;\n        this.currentElement = args.element;\n        if (target.classList.contains('e-spinner-pane')) {\n            target = this.parent.navigationpaneModule.activeNode.getElementsByClassName(CLS.FULLROW)[0];\n            this.menuTarget = this.targetNodeElement = target;\n        }\n        this.targetElement = this.parent.view === 'Details' ? closest(target, 'tr.e-row') : target;\n        var view = this.getTargetView(target);\n        this.updateActiveModule();\n        /* istanbul ignore next */\n        if (target.classList.contains(CLS.TREE_VIEW) || closest(target, 'th') ||\n            (closest(target, '#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID)) ||\n            (closest(target, '#' + this.parent.element.id + CLS.TOOLBAR_ID))) {\n            args.cancel = true;\n            // eslint:disable-next-line\n        }\n        else if (!(this.parent.view === 'LargeIcons') && this.targetElement &&\n            this.targetElement.classList.contains('e-emptyrow')) {\n            this.setLayoutItem(target);\n            /* istanbul ignore next */\n        }\n        else if (closest(target, '.' + CLS.EMPTY)) {\n            this.setLayoutItem(target);\n            // eslint:disable-next-line\n        }\n        else if (!target.classList.contains(CLS.MENU_ITEM) &&\n            !target.classList.contains(CLS.MENU_ICON) && !target.classList.contains(CLS.SUBMENU_ICON)) {\n            /* istanbul ignore next */\n            // eslint:disable-next-line\n            if (this.parent.view === 'LargeIcons' && !isNOU(closest(target, 'li')) && !closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                var eveArgs = { ctrlKey: true, shiftKey: true };\n                if (!closest(target, 'li').classList.contains('e-active')) {\n                    this.parent.largeiconsviewModule.doSelection(target, eveArgs);\n                }\n                // eslint-disable-next-line\n                data = this.parent.visitedData;\n                selected = true;\n            }\n            else if (!isNOU(closest(target, 'tr.e-row'))) {\n                uid = this.targetElement.getAttribute('data-uid');\n                // eslint-disable-next-line\n                data = this.parent.detailsviewModule.gridObj.getRowObjectFromUID(uid).data;\n                if (isNOU(this.targetElement.getAttribute('aria-selected'))) {\n                    /* istanbul ignore next */\n                    this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute('aria-rowindex'), 10)]);\n                }\n                selected = true;\n                /* istanbul ignore next */\n            }\n            else if (closest(target, '#' + this.parent.element.id + CLS.TREE_ID)) {\n                uid = closest(target, 'li').getAttribute('data-uid');\n                treeFolder = true;\n            }\n            /* istanbul ignore next */\n            if (selected) {\n                if (getValue('isFile', data) === true) {\n                    this.setFileItem();\n                }\n                else {\n                    this.setFolderItem(false);\n                }\n                /* istanbul ignore next */\n            }\n            else if (treeFolder) {\n                this.setFolderItem(true);\n                if (uid === this.parent.pathId[0]) {\n                    this.disabledItems.push('Delete', 'Rename', 'Cut', 'Copy');\n                }\n                /* istanbul ignore next */\n                // eslint:disable-next-line\n            }\n            else if (view === 'TreeView' || view === 'GridView' || view === 'LargeIcon') {\n                this.setLayoutItem(target);\n                /* istanbul ignore next */\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n        var pasteEle = select('#' + this.getMenuId('Paste'), this.contextMenu.element);\n        if (!args.cancel && !this.parent.enablePaste &&\n            pasteEle && !pasteEle.classList.contains('e-disabled')) {\n            this.disabledItems.push('Paste');\n        }\n        if (args.cancel) {\n            this.menuTarget = this.currentElement = null;\n            return;\n        }\n        this.contextMenu.dataBind();\n        var isSubMenu = false;\n        if (target.classList.contains(CLS.MENU_ITEM) ||\n            target.classList.contains(CLS.MENU_ICON) || target.classList.contains(CLS.SUBMENU_ICON)) {\n            isSubMenu = true;\n        }\n        this.menuItemData = isSubMenu ? this.menuItemData : this.getMenuItemData();\n        var eventArgs = {\n            fileDetails: [this.menuItemData],\n            element: args.element,\n            target: target,\n            items: isSubMenu ? args.items : this.contextMenu.items,\n            menuModule: this.contextMenu,\n            cancel: false,\n            menuType: this.menuType,\n            isSubMenu: isSubMenu\n        };\n        this.currentItems = eventArgs.items;\n        this.parent.trigger('menuOpen', eventArgs, function (menuOpenArgs) {\n            if (!isSubMenu) {\n                _this.contextMenu.dataBind();\n                _this.contextMenu.items = menuOpenArgs.items;\n                _this.contextMenu.dataBind();\n            }\n            _this.enableItems(_this.disabledItems, false, true);\n            args.cancel = menuOpenArgs.cancel;\n            if (menuOpenArgs.cancel) {\n                _this.menuTarget = _this.targetNodeElement = _this.currentElement = null;\n            }\n        });\n    };\n    ContextMenu.prototype.updateActiveModule = function () {\n        this.parent.activeModule = closest(this.menuTarget, '#' + this.parent.element.id + CLS.TREE_ID) ?\n            'navigationpane' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.GRID_ID) ?\n            'detailsview' : closest(this.menuTarget, '#' + this.parent.element.id + CLS.LARGEICON_ID) ?\n            'largeiconsview' : this.parent.activeModule;\n    };\n    /* istanbul ignore next */\n    /**\n     *\n     * @param {Element} target - specifies the target element.\n     * @returns {string} -returns the target view.\n     * @hidden\n     */\n    ContextMenu.prototype.getTargetView = function (target) {\n        return target.classList.contains(CLS.TREE_VIEW) ?\n            'TreeView' : target.classList.contains(CLS.GRID_VIEW) ?\n            'GridView' : target.classList.contains(CLS.ICON_VIEW) ?\n            'LargeIcon' : target.classList.contains(CLS.LARGE_ICONS) ?\n            'LargeIcon' : '';\n    };\n    ContextMenu.prototype.getItemIndex = function (item) {\n        var itemId = this.getMenuId(item);\n        for (var i = 0; i < this.currentItems.length; i++) {\n            if ((this.currentItems[i].id === itemId) || (this.currentItems[i].id === item)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    ContextMenu.prototype.disableItem = function (items) {\n        if (items.length !== 0) {\n            this.disabledItems = this.disabledItems.concat(items);\n        }\n    };\n    ContextMenu.prototype.enableItems = function (items, enable, isUniqueId) {\n        for (var i = 0; i < items.length; i++) {\n            if (this.checkValidItem(items[i]) === 1) {\n                this.contextMenu.enableItems([this.getMenuId(items[i])], enable, isUniqueId);\n            }\n            else if (this.checkValidItem(items[i]) === 2) {\n                this.contextMenu.enableItems([items[i]], enable, isUniqueId);\n            }\n        }\n    };\n    ContextMenu.prototype.setFolderItem = function (isTree) {\n        this.menuType = 'folder';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.folder.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (isTree) {\n            this.disabledItems.push('Open');\n        }\n        else if (this.parent.selectedItems.length !== 1) {\n            this.disabledItems.push('Rename', 'Paste');\n        }\n    };\n    ContextMenu.prototype.setFileItem = function () {\n        this.menuType = 'file';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.file.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (this.parent.selectedItems.length !== 1) {\n            this.disabledItems.push('Rename');\n        }\n    };\n    ContextMenu.prototype.setLayoutItem = function (target) {\n        this.menuType = 'layout';\n        this.contextMenu.items = this.getItemData(this.parent.contextMenuSettings.layout.map(function (item) { return item.trim(); }));\n        this.contextMenu.dataBind();\n        if (!this.parent.allowMultiSelection || ((this.parent.view === 'LargeIcons' &&\n            (closest(target, '#' + this.parent.element.id + CLS.LARGEICON_ID).getElementsByClassName(CLS.EMPTY).length !== 0))\n            || (this.parent.view === 'Details' &&\n                (closest(target, '#' + this.parent.element.id + CLS.GRID_ID).getElementsByClassName(CLS.EMPTY).length !== 0)))) {\n            this.disabledItems.push('SelectAll');\n        }\n        if (this.parent.selectedNodes.length === 0) {\n            this.disabledItems.push('Paste');\n        }\n        this.contextMenu.dataBind();\n    };\n    ContextMenu.prototype.checkValidItem = function (nameEle) {\n        if (!isNOU(select('#' + this.getMenuId(nameEle), this.currentElement))) {\n            return 1;\n        }\n        else if (!isNOU(select('#' + nameEle, this.currentElement))) {\n            return 2;\n        }\n        else {\n            return -1;\n        }\n    };\n    // eslint-disable-next-line\n    ContextMenu.prototype.getMenuItemData = function () {\n        if (this.menuType === 'layout') {\n            return getPathObject(this.parent);\n        }\n        else {\n            // eslint-disable-next-line\n            var args = { target: this.menuTarget };\n            this.parent.notify(events.menuItemData, args);\n            return this.parent.itemData[0];\n        }\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.onSelect = function (args) {\n        var _this = this;\n        if (isNOU(args.item) || !args.item.id) {\n            return;\n        }\n        var itemText = args.item.id.substr((this.parent.element.id + '_cm_').length);\n        // eslint-disable-next-line\n        var details;\n        if (itemText === 'refresh' || itemText === 'newfolder' || itemText === 'upload') {\n            details = [getPathObject(this.parent)];\n            this.parent.itemData = details;\n        }\n        else {\n            this.parent.notify(events.selectedData, {});\n            if (this.parent.activeModule === 'navigationpane' && itemText === 'open') {\n                details = [this.menuItemData];\n            }\n            else {\n                details = this.parent.itemData;\n            }\n        }\n        var eventArgs = {\n            cancel: false,\n            element: args.element,\n            fileDetails: details,\n            item: args.item\n        };\n        this.parent.trigger('menuClick', eventArgs, function (menuClickArgs) {\n            var sItems;\n            if (!menuClickArgs.cancel) {\n                // eslint:disable-next-line\n                switch (itemText) {\n                    case 'cut':\n                        cutFiles(_this.parent);\n                        break;\n                    case 'copy':\n                        copyFiles(_this.parent);\n                        break;\n                    case 'paste':\n                        if (_this.menuType === 'folder') {\n                            if ((_this.parent.activeModule === 'largeiconsview') || (_this.parent.activeModule === 'detailsview')) {\n                                _this.parent.folderPath = getFullPath(_this.parent, _this.menuItemData, _this.parent.path);\n                            }\n                            else {\n                                _this.parent.folderPath = '';\n                            }\n                        }\n                        else {\n                            _this.parent.folderPath = '';\n                        }\n                        pasteHandler(_this.parent);\n                        break;\n                    case 'delete':\n                        for (var j = 0; j < details.length; j++) {\n                            if (!hasEditAccess(details[j])) {\n                                createDeniedDialog(_this.parent, details[j], events.permissionEdit);\n                                return;\n                            }\n                        }\n                        createDialog(_this.parent, 'Delete');\n                        break;\n                    /* istanbul ignore next */\n                    case 'download':\n                        for (var i = 0; i < details.length; i++) {\n                            if (!hasDownloadAccess(details[i])) {\n                                createDeniedDialog(_this.parent, details[i], events.permissionDownload);\n                                return;\n                            }\n                        }\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            _this.parent.notify(events.downloadInit, {});\n                        }\n                        else if (_this.parent.selectedItems.length > 0) {\n                            Download(_this.parent, _this.parent.path, _this.parent.selectedItems);\n                        }\n                        break;\n                    case 'rename':\n                        if (!hasEditAccess(details[0])) {\n                            createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n                        }\n                        else {\n                            _this.parent.notify(events.renameInit, {});\n                            createDialog(_this.parent, 'Rename');\n                        }\n                        break;\n                    case 'selectall':\n                        /* istanbul ignore next */\n                        _this.parent.notify(events.selectAllInit, {});\n                        break;\n                    case 'refresh':\n                        refresh(_this.parent);\n                        break;\n                    case 'open':\n                        if (_this.parent.visitedItem) {\n                            _this.parent.notify(events.openInit, { target: _this.parent.visitedItem });\n                        }\n                        else if (_this.parent.activeModule === 'navigationpane') {\n                            _this.parent.navigationpaneModule.openFileOnContextMenuClick(closest(_this.targetNodeElement, 'li'));\n                        }\n                        break;\n                    case 'details':\n                        _this.parent.notify(events.detailsInit, {});\n                        sItems = _this.parent.selectedItems;\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            sItems = [];\n                        }\n                        GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n                        break;\n                    case 'newfolder':\n                        createNewFolder(_this.parent);\n                        break;\n                    case 'upload':\n                        uploadItem(_this.parent);\n                        break;\n                    /* istanbul ignore next */\n                    case 'name':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'size':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'date':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'ascending':\n                    /* istanbul ignore next */\n                    // eslint-disable-next-line no-fallthrough\n                    case 'descending':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    case 'none':\n                        /* istanbul ignore next */\n                        sortbyClickHandler(_this.parent, args);\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'largeiconsview':\n                        updateLayout(_this.parent, 'LargeIcons');\n                        break;\n                    /* istanbul ignore next */\n                    // eslint:disable-next-line\n                    case 'detailsview':\n                        updateLayout(_this.parent, 'Details');\n                        break;\n                }\n            }\n        });\n    };\n    ContextMenu.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    this.contextMenu.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n                    break;\n            }\n        }\n    };\n    ContextMenu.prototype.addEventListener = function () {\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.keyboardModule = new KeyboardEvents(this.contextMenu.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    ContextMenu.prototype.removeEventListener = function () {\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.keyboardModule.destroy();\n    };\n    ContextMenu.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'uparrow':\n            case 'downarrow':\n                e.preventDefault();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name.\n     * @private\n     */\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextmenu';\n    };\n    ContextMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.contextMenu.destroy();\n    };\n    /* istanbul ignore next */\n    ContextMenu.prototype.getItemData = function (data) {\n        var items = [];\n        for (var i = 0; i < data.length; i++) {\n            var item = void 0;\n            var itemId = this.getMenuId(data[i]);\n            var itemText = getLocaleText(this.parent, data[i]);\n            switch (data[i]) {\n                case '|':\n                    item = { separator: true };\n                    break;\n                case 'Open':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_OPEN };\n                    break;\n                case 'Upload':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_UPLOAD };\n                    break;\n                case 'Cut':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_CUT };\n                    break;\n                case 'Copy':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_COPY };\n                    break;\n                case 'Paste':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_PASTE };\n                    break;\n                case 'Delete':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DELETE };\n                    break;\n                case 'Rename':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_RENAME };\n                    break;\n                case 'NewFolder':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_NEWFOLDER };\n                    break;\n                case 'Details':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DETAILS };\n                    break;\n                case 'SortBy':\n                    item = {\n                        id: itemId, text: itemText, iconCss: CLS.ICON_SHORTBY,\n                        items: [\n                            {\n                                id: this.getMenuId('Name'), text: getLocaleText(this.parent, 'Name'),\n                                iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Size'), text: getLocaleText(this.parent, 'Size'),\n                                iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : null\n                            },\n                            {\n                                id: this.getMenuId('Date'), text: getLocaleText(this.parent, 'DateModified'),\n                                iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : null\n                            },\n                            { separator: true },\n                            {\n                                id: this.getMenuId('Ascending'), text: getLocaleText(this.parent, 'Ascending'),\n                                iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('Descending'), text: getLocaleText(this.parent, 'Descending'),\n                                iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : null\n                            },\n                            {\n                                id: this.getMenuId('None'), text: getLocaleText(this.parent, 'None'),\n                                iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                /* istanbul ignore next */\n                case 'View':\n                    item = {\n                        id: itemId, text: itemText, iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n                        items: [\n                            {\n                                id: this.getMenuId('largeiconsview'), text: getLocaleText(this.parent, 'View-LargeIcons'),\n                                iconCss: this.parent.view === 'Details' ? null : CLS.TB_OPTION_TICK\n                            },\n                            {\n                                id: this.getMenuId('detailsview'), text: getLocaleText(this.parent, 'View-Details'),\n                                iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : null\n                            }\n                        ]\n                    };\n                    break;\n                case 'Refresh':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_REFRESH };\n                    break;\n                case 'SelectAll':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_SELECTALL };\n                    break;\n                /* istanbul ignore next */\n                case 'Download':\n                    item = { id: itemId, text: itemText, iconCss: CLS.ICON_DOWNLOAD };\n                    break;\n                /* istanbul ignore next */\n                default:\n                    item = { id: itemId, text: itemText };\n                    break;\n            }\n            items.push(item);\n        }\n        return items;\n    };\n    ContextMenu.prototype.getMenuId = function (id) {\n        return this.parent.element.id + '_cm_' + id.toLowerCase();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n"],"mappings":"AAAA,SAASA,WAAW,IAAIC,IAAI,QAAQ,6BAA6B;AACjE,SAASC,iBAAiB,IAAIC,KAAK,EAAEC,aAAa,EAAEC,OAAO,EAAEC,cAAc,QAAQ,sBAAsB;AACzG,SAASC,QAAQ,EAAEC,MAAM,QAAQ,sBAAsB;AACvD,SAASC,QAAQ,EAAEC,UAAU,QAAQ,wBAAwB;AAC7D,SAASC,YAAY,QAAQ,UAAU;AACvC,SAASC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,aAAa,EAAEC,aAAa,EAAEC,YAAY,EAAEC,WAAW,QAAQ,qBAAqB;AAC3H,SAASC,WAAW,EAAEC,kBAAkB,EAAEC,YAAY,QAAQ,qBAAqB;AACnF,SAASC,kBAAkB,EAAEC,eAAe,EAAEC,UAAU,EAAEC,aAAa,EAAEC,iBAAiB,QAAQ,qBAAqB;AACvH,OAAO,KAAKC,MAAM,MAAM,oBAAoB;AAC5C,OAAO,KAAKC,GAAG,MAAM,iBAAiB;AACtC;AACA;AACA;AACA,IAAI5B,WAAW,GAAG,aAAe,YAAY;EACzC;AACJ;AACA;AACA;AACA;AACA;EACI,SAASA,WAAWA,CAAC6B,MAAM,EAAE;IACzB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACH,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACI,MAAM,EAAE;EACjB;EACAjC,WAAW,CAACkC,SAAS,CAACD,MAAM,GAAG,YAAY;IACvC,IAAI,CAACE,UAAU,GAAG;MACdC,SAAS,EAAE,WAAW;MACtBC,OAAO,EAAE;IACb,CAAC;IACD,IAAI,CAACC,WAAW,GAAG,IAAIrC,IAAI,CAAC;MACxBsC,SAAS,EAAE,IAAI,CAACV,MAAM,CAACU,SAAS;MAChCC,MAAM,EAAE,IAAI,CAACX,MAAM,CAACW,MAAM;MAC1BC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE;MACpCC,mBAAmB,EAAE,IAAI,CAACf,MAAM,CAACe,mBAAmB;MACpDC,gBAAgB,EAAE,IAAI,CAACC,kBAAkB,CAACC,IAAI,CAAC,IAAI,CAAC;MACpDvC,MAAM,EAAE,IAAI,CAACwC,QAAQ,CAACD,IAAI,CAAC,IAAI,CAAC;MAChCE,UAAU,EAAE,IAAI,CAACC,YAAY,CAACH,IAAI,CAAC,IAAI,CAAC;MACxCI,WAAW,EAAE,IAAI,CAACC,aAAa,CAACL,IAAI,CAAC,IAAI,CAAC;MAC1CM,QAAQ,EAAElC,WAAW,CAAC,IAAI,CAACU,MAAM,EAAED,GAAG,CAAC0B,UAAU;IACrD,CAAC,CAAC;IACF,IAAI,CAAChB,WAAW,CAACiB,gBAAgB,GAAG,IAAI;IACxC,IAAI,CAACjB,WAAW,CAACkB,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC3B,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAAC6B,eAAe,CAAC;IAC7E,IAAI,CAACC,gBAAgB,EAAE;EAC3B,CAAC;EACD;EACA1D,WAAW,CAACkC,SAAS,CAACY,kBAAkB,GAAG,UAAUa,IAAI,EAAE;IACvD,IAAIA,IAAI,CAACC,IAAI,CAACjB,EAAE,KAAK,IAAI,CAACkB,SAAS,CAAC,gBAAgB,CAAC,EAAE;MACnD,IAAIC,QAAQ,GAAG1D,aAAa,CAAC,MAAM,CAAC;MACpC,IAAIsC,OAAO,GAAGiB,IAAI,CAACjB,OAAO;MAC1BA,OAAO,CAACqB,YAAY,CAACD,QAAQ,EAAE,IAAI,CAACjC,MAAM,CAACmC,IAAI,KAAK,YAAY,GAAGtB,OAAO,CAACuB,UAAU,CAAC,CAAC,CAAC,GAAGvB,OAAO,CAACuB,UAAU,CAAC,CAAC,CAAC,CAAC;MACjHH,QAAQ,CAACI,YAAY,CAAC,OAAO,EAAEtC,GAAG,CAACuC,UAAU,GAAG,GAAG,GAAGvC,GAAG,CAACwC,SAAS,CAAC;IACxE;IACA,IAAIT,IAAI,CAACC,IAAI,CAACjB,EAAE,KAAK,IAAI,CAACkB,SAAS,CAAC,aAAa,CAAC,EAAE;MAChD,IAAIC,QAAQ,GAAG1D,aAAa,CAAC,MAAM,CAAC;MACpC,IAAIsC,OAAO,GAAGiB,IAAI,CAACjB,OAAO;MAC1BA,OAAO,CAACqB,YAAY,CAACD,QAAQ,EAAE,IAAI,CAACjC,MAAM,CAACmC,IAAI,KAAK,SAAS,GAAGtB,OAAO,CAACuB,UAAU,CAAC,CAAC,CAAC,GAAGvB,OAAO,CAACuB,UAAU,CAAC,CAAC,CAAC,CAAC;MAC9GH,QAAQ,CAACI,YAAY,CAAC,OAAO,EAAEtC,GAAG,CAACyC,SAAS,GAAG,GAAG,GAAGzC,GAAG,CAACwC,SAAS,CAAC;IACvE;EACJ,CAAC;EACDpE,WAAW,CAACkC,SAAS,CAACkB,aAAa,GAAG,YAAY;IAC9C,IAAI,CAACkB,UAAU,GAAG,IAAI;EAC1B,CAAC;EACD;EACAtE,WAAW,CAACkC,SAAS,CAACgB,YAAY,GAAG,UAAUS,IAAI,EAAE;IACjD,IAAIY,KAAK,GAAG,IAAI;IAChB,IAAI,CAACvC,aAAa,GAAG,EAAE;IACvB,IAAIwC,QAAQ,GAAG,KAAK;IACpB,IAAIC,GAAG;IACP;IACA,IAAIC,IAAI;IACR,IAAIC,UAAU,GAAG,KAAK;IACtB,IAAIlC,MAAM,GAAGkB,IAAI,CAACiB,KAAK,CAACnC,MAAM;IAC9B,IAAI,CAAC6B,UAAU,GAAG,IAAI,CAACO,iBAAiB,GAAGpC,MAAM;IACjD,IAAI,CAACV,cAAc,GAAG4B,IAAI,CAACjB,OAAO;IAClC,IAAID,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;MAC7CtC,MAAM,GAAG,IAAI,CAACZ,MAAM,CAACmD,oBAAoB,CAACC,UAAU,CAACC,sBAAsB,CAACtD,GAAG,CAACuD,OAAO,CAAC,CAAC,CAAC,CAAC;MAC3F,IAAI,CAACb,UAAU,GAAG,IAAI,CAACO,iBAAiB,GAAGpC,MAAM;IACrD;IACA,IAAI,CAAC2C,aAAa,GAAG,IAAI,CAACvD,MAAM,CAACmC,IAAI,KAAK,SAAS,GAAG3D,OAAO,CAACoC,MAAM,EAAE,UAAU,CAAC,GAAGA,MAAM;IAC1F,IAAIuB,IAAI,GAAG,IAAI,CAACqB,aAAa,CAAC5C,MAAM,CAAC;IACrC,IAAI,CAAC6C,kBAAkB,EAAE;IACzB;IACA,IAAI7C,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAAC2D,SAAS,CAAC,IAAIlF,OAAO,CAACoC,MAAM,EAAE,IAAI,CAAC,IAChEpC,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAAC4D,gBAAgB,CAAE,IACrEnF,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAAC6D,UAAU,CAAE,EAAE;MAClE9B,IAAI,CAAC+B,MAAM,GAAG,IAAI;MAClB;IACJ,CAAC,MACI,IAAI,EAAE,IAAI,CAAC7D,MAAM,CAACmC,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,CAACoB,aAAa,IAC/D,IAAI,CAACA,aAAa,CAACN,SAAS,CAACC,QAAQ,CAAC,YAAY,CAAC,EAAE;MACrD,IAAI,CAACY,aAAa,CAAClD,MAAM,CAAC;MAC1B;IACJ,CAAC,MACI,IAAIpC,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAGb,GAAG,CAACgE,KAAK,CAAC,EAAE;MACvC,IAAI,CAACD,aAAa,CAAClD,MAAM,CAAC;MAC1B;IACJ,CAAC,MACI,IAAI,CAACA,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACiE,SAAS,CAAC,IAC9C,CAACpD,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACwC,SAAS,CAAC,IAAI,CAAC3B,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACkE,YAAY,CAAC,EAAE;MAC3F;MACA;MACA,IAAI,IAAI,CAACjE,MAAM,CAACmC,IAAI,KAAK,YAAY,IAAI,CAAC7D,KAAK,CAACE,OAAO,CAACoC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,CAACpC,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACmE,OAAO,CAAC,EAAE;QACpI,IAAIC,OAAO,GAAG;UAAEC,OAAO,EAAE,IAAI;UAAEC,QAAQ,EAAE;QAAK,CAAC;QAC/C,IAAI,CAAC7F,OAAO,CAACoC,MAAM,EAAE,IAAI,CAAC,CAACqC,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;UACvD,IAAI,CAAClD,MAAM,CAACsE,oBAAoB,CAACC,WAAW,CAAC3D,MAAM,EAAEuD,OAAO,CAAC;QACjE;QACA;QACAtB,IAAI,GAAG,IAAI,CAAC7C,MAAM,CAACwE,WAAW;QAC9B7B,QAAQ,GAAG,IAAI;MACnB,CAAC,MACI,IAAI,CAACrE,KAAK,CAACE,OAAO,CAACoC,MAAM,EAAE,UAAU,CAAC,CAAC,EAAE;QAC1CgC,GAAG,GAAG,IAAI,CAACW,aAAa,CAACkB,YAAY,CAAC,UAAU,CAAC;QACjD;QACA5B,IAAI,GAAG,IAAI,CAAC7C,MAAM,CAAC0E,iBAAiB,CAACC,OAAO,CAACC,mBAAmB,CAAChC,GAAG,CAAC,CAACC,IAAI;QAC1E,IAAIvE,KAAK,CAAC,IAAI,CAACiF,aAAa,CAACkB,YAAY,CAAC,eAAe,CAAC,CAAC,EAAE;UACzD;UACA,IAAI,CAACzE,MAAM,CAAC0E,iBAAiB,CAACC,OAAO,CAACE,UAAU,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACvB,aAAa,CAACkB,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACtH;QACA9B,QAAQ,GAAG,IAAI;QACf;MACJ,CAAC,MACI,IAAInE,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACmE,OAAO,CAAC,EAAE;QAClEtB,GAAG,GAAGpE,OAAO,CAACoC,MAAM,EAAE,IAAI,CAAC,CAAC6D,YAAY,CAAC,UAAU,CAAC;QACpD3B,UAAU,GAAG,IAAI;MACrB;MACA;MACA,IAAIH,QAAQ,EAAE;QACV,IAAIjE,QAAQ,CAAC,QAAQ,EAAEmE,IAAI,CAAC,KAAK,IAAI,EAAE;UACnC,IAAI,CAACkC,WAAW,EAAE;QACtB,CAAC,MACI;UACD,IAAI,CAACC,aAAa,CAAC,KAAK,CAAC;QAC7B;QACA;MACJ,CAAC,MACI,IAAIlC,UAAU,EAAE;QACjB,IAAI,CAACkC,aAAa,CAAC,IAAI,CAAC;QACxB,IAAIpC,GAAG,KAAK,IAAI,CAAC5C,MAAM,CAACiF,MAAM,CAAC,CAAC,CAAC,EAAE;UAC/B,IAAI,CAAC9E,aAAa,CAAC+E,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,CAAC;QAC9D;QACA;QACA;MACJ,CAAC,MACI,IAAI/C,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,WAAW,EAAE;QACzE,IAAI,CAAC2B,aAAa,CAAClD,MAAM,CAAC;QAC1B;MACJ,CAAC,MACI;QACDkB,IAAI,CAAC+B,MAAM,GAAG,IAAI;MACtB;IACJ;IACA,IAAIsB,QAAQ,GAAGxG,MAAM,CAAC,GAAG,GAAG,IAAI,CAACqD,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAACvB,WAAW,CAACI,OAAO,CAAC;IAC9E,IAAI,CAACiB,IAAI,CAAC+B,MAAM,IAAI,CAAC,IAAI,CAAC7D,MAAM,CAACoF,WAAW,IACxCD,QAAQ,IAAI,CAACA,QAAQ,CAAClC,SAAS,CAACC,QAAQ,CAAC,YAAY,CAAC,EAAE;MACxD,IAAI,CAAC/C,aAAa,CAAC+E,IAAI,CAAC,OAAO,CAAC;IACpC;IACA,IAAIpD,IAAI,CAAC+B,MAAM,EAAE;MACb,IAAI,CAACpB,UAAU,GAAG,IAAI,CAACvC,cAAc,GAAG,IAAI;MAC5C;IACJ;IACA,IAAI,CAACO,WAAW,CAAC4E,QAAQ,EAAE;IAC3B,IAAIC,SAAS,GAAG,KAAK;IACrB,IAAI1E,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACiE,SAAS,CAAC,IACxCpD,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACwC,SAAS,CAAC,IAAI3B,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACkE,YAAY,CAAC,EAAE;MACzFqB,SAAS,GAAG,IAAI;IACpB;IACA,IAAI,CAACC,YAAY,GAAGD,SAAS,GAAG,IAAI,CAACC,YAAY,GAAG,IAAI,CAACC,eAAe,EAAE;IAC1E,IAAIC,SAAS,GAAG;MACZC,WAAW,EAAE,CAAC,IAAI,CAACH,YAAY,CAAC;MAChC1E,OAAO,EAAEiB,IAAI,CAACjB,OAAO;MACrBD,MAAM,EAAEA,MAAM;MACd+E,KAAK,EAAEL,SAAS,GAAGxD,IAAI,CAAC6D,KAAK,GAAG,IAAI,CAAClF,WAAW,CAACkF,KAAK;MACtDC,UAAU,EAAE,IAAI,CAACnF,WAAW;MAC5BoD,MAAM,EAAE,KAAK;MACbgC,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBP,SAAS,EAAEA;IACf,CAAC;IACD,IAAI,CAACrF,YAAY,GAAGwF,SAAS,CAACE,KAAK;IACnC,IAAI,CAAC3F,MAAM,CAAC8F,OAAO,CAAC,UAAU,EAAEL,SAAS,EAAE,UAAUM,YAAY,EAAE;MAC/D,IAAI,CAACT,SAAS,EAAE;QACZ5C,KAAK,CAACjC,WAAW,CAAC4E,QAAQ,EAAE;QAC5B3C,KAAK,CAACjC,WAAW,CAACkF,KAAK,GAAGI,YAAY,CAACJ,KAAK;QAC5CjD,KAAK,CAACjC,WAAW,CAAC4E,QAAQ,EAAE;MAChC;MACA3C,KAAK,CAACsD,WAAW,CAACtD,KAAK,CAACvC,aAAa,EAAE,KAAK,EAAE,IAAI,CAAC;MACnD2B,IAAI,CAAC+B,MAAM,GAAGkC,YAAY,CAAClC,MAAM;MACjC,IAAIkC,YAAY,CAAClC,MAAM,EAAE;QACrBnB,KAAK,CAACD,UAAU,GAAGC,KAAK,CAACM,iBAAiB,GAAGN,KAAK,CAACxC,cAAc,GAAG,IAAI;MAC5E;IACJ,CAAC,CAAC;EACN,CAAC;EACD/B,WAAW,CAACkC,SAAS,CAACoD,kBAAkB,GAAG,YAAY;IACnD,IAAI,CAACzD,MAAM,CAACiG,YAAY,GAAGzH,OAAO,CAAC,IAAI,CAACiE,UAAU,EAAE,GAAG,GAAG,IAAI,CAACzC,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACmE,OAAO,CAAC,GAC3F,gBAAgB,GAAG1F,OAAO,CAAC,IAAI,CAACiE,UAAU,EAAE,GAAG,GAAG,IAAI,CAACzC,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACmG,OAAO,CAAC,GACvF,aAAa,GAAG1H,OAAO,CAAC,IAAI,CAACiE,UAAU,EAAE,GAAG,GAAG,IAAI,CAACzC,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACoG,YAAY,CAAC,GACzF,gBAAgB,GAAG,IAAI,CAACnG,MAAM,CAACiG,YAAY;EACnD,CAAC;EACD;EACA;AACJ;AACA;AACA;AACA;AACA;EACI9H,WAAW,CAACkC,SAAS,CAACmD,aAAa,GAAG,UAAU5C,MAAM,EAAE;IACpD,OAAOA,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAAC2D,SAAS,CAAC,GAC3C,UAAU,GAAG9C,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACqG,SAAS,CAAC,GACrD,UAAU,GAAGxF,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACsG,SAAS,CAAC,GACrD,WAAW,GAAGzF,MAAM,CAACqC,SAAS,CAACC,QAAQ,CAACnD,GAAG,CAACuG,WAAW,CAAC,GACxD,WAAW,GAAG,EAAE;EACxB,CAAC;EACDnI,WAAW,CAACkC,SAAS,CAACkG,YAAY,GAAG,UAAUxE,IAAI,EAAE;IACjD,IAAIyE,MAAM,GAAG,IAAI,CAACxE,SAAS,CAACD,IAAI,CAAC;IACjC,KAAK,IAAI0E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,YAAY,CAACyG,MAAM,EAAED,CAAC,EAAE,EAAE;MAC/C,IAAK,IAAI,CAACxG,YAAY,CAACwG,CAAC,CAAC,CAAC3F,EAAE,KAAK0F,MAAM,IAAM,IAAI,CAACvG,YAAY,CAACwG,CAAC,CAAC,CAAC3F,EAAE,KAAKiB,IAAK,EAAE;QAC5E,OAAO0E,CAAC;MACZ;IACJ;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACDtI,WAAW,CAACkC,SAAS,CAACsG,WAAW,GAAG,UAAUhB,KAAK,EAAE;IACjD,IAAIA,KAAK,CAACe,MAAM,KAAK,CAAC,EAAE;MACpB,IAAI,CAACvG,aAAa,GAAG,IAAI,CAACA,aAAa,CAACyG,MAAM,CAACjB,KAAK,CAAC;IACzD;EACJ,CAAC;EACDxH,WAAW,CAACkC,SAAS,CAAC2F,WAAW,GAAG,UAAUL,KAAK,EAAEkB,MAAM,EAAEC,UAAU,EAAE;IACrE,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGd,KAAK,CAACe,MAAM,EAAED,CAAC,EAAE,EAAE;MACnC,IAAI,IAAI,CAACM,cAAc,CAACpB,KAAK,CAACc,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;QACrC,IAAI,CAAChG,WAAW,CAACuF,WAAW,CAAC,CAAC,IAAI,CAAChE,SAAS,CAAC2D,KAAK,CAACc,CAAC,CAAC,CAAC,CAAC,EAAEI,MAAM,EAAEC,UAAU,CAAC;MAChF,CAAC,MACI,IAAI,IAAI,CAACC,cAAc,CAACpB,KAAK,CAACc,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;QAC1C,IAAI,CAAChG,WAAW,CAACuF,WAAW,CAAC,CAACL,KAAK,CAACc,CAAC,CAAC,CAAC,EAAEI,MAAM,EAAEC,UAAU,CAAC;MAChE;IACJ;EACJ,CAAC;EACD3I,WAAW,CAACkC,SAAS,CAAC2E,aAAa,GAAG,UAAUgC,MAAM,EAAE;IACpD,IAAI,CAACnB,QAAQ,GAAG,QAAQ;IACxB,IAAI,CAACpF,WAAW,CAACkF,KAAK,GAAG,IAAI,CAACsB,WAAW,CAAC,IAAI,CAACjH,MAAM,CAACkH,mBAAmB,CAACC,MAAM,CAACC,GAAG,CAAC,UAAUrF,IAAI,EAAE;MAAE,OAAOA,IAAI,CAACsF,IAAI,EAAE;IAAE,CAAC,CAAC,CAAC;IAC9H,IAAI,CAAC5G,WAAW,CAAC4E,QAAQ,EAAE;IAC3B,IAAI2B,MAAM,EAAE;MACR,IAAI,CAAC7G,aAAa,CAAC+E,IAAI,CAAC,MAAM,CAAC;IACnC,CAAC,MACI,IAAI,IAAI,CAAClF,MAAM,CAACsH,aAAa,CAACZ,MAAM,KAAK,CAAC,EAAE;MAC7C,IAAI,CAACvG,aAAa,CAAC+E,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC;IAC9C;EACJ,CAAC;EACD/G,WAAW,CAACkC,SAAS,CAAC0E,WAAW,GAAG,YAAY;IAC5C,IAAI,CAACc,QAAQ,GAAG,MAAM;IACtB,IAAI,CAACpF,WAAW,CAACkF,KAAK,GAAG,IAAI,CAACsB,WAAW,CAAC,IAAI,CAACjH,MAAM,CAACkH,mBAAmB,CAACK,IAAI,CAACH,GAAG,CAAC,UAAUrF,IAAI,EAAE;MAAE,OAAOA,IAAI,CAACsF,IAAI,EAAE;IAAE,CAAC,CAAC,CAAC;IAC5H,IAAI,CAAC5G,WAAW,CAAC4E,QAAQ,EAAE;IAC3B,IAAI,IAAI,CAACrF,MAAM,CAACsH,aAAa,CAACZ,MAAM,KAAK,CAAC,EAAE;MACxC,IAAI,CAACvG,aAAa,CAAC+E,IAAI,CAAC,QAAQ,CAAC;IACrC;EACJ,CAAC;EACD/G,WAAW,CAACkC,SAAS,CAACyD,aAAa,GAAG,UAAUlD,MAAM,EAAE;IACpD,IAAI,CAACiF,QAAQ,GAAG,QAAQ;IACxB,IAAI,CAACpF,WAAW,CAACkF,KAAK,GAAG,IAAI,CAACsB,WAAW,CAAC,IAAI,CAACjH,MAAM,CAACkH,mBAAmB,CAACM,MAAM,CAACJ,GAAG,CAAC,UAAUrF,IAAI,EAAE;MAAE,OAAOA,IAAI,CAACsF,IAAI,EAAE;IAAE,CAAC,CAAC,CAAC;IAC9H,IAAI,CAAC5G,WAAW,CAAC4E,QAAQ,EAAE;IAC3B,IAAI,CAAC,IAAI,CAACrF,MAAM,CAACyH,mBAAmB,IAAM,IAAI,CAACzH,MAAM,CAACmC,IAAI,KAAK,YAAY,IACtE3D,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACoG,YAAY,CAAC,CAAC9C,sBAAsB,CAACtD,GAAG,CAACgE,KAAK,CAAC,CAAC2C,MAAM,KAAK,CAAE,IAC7G,IAAI,CAAC1G,MAAM,CAACmC,IAAI,KAAK,SAAS,IAC7B3D,OAAO,CAACoC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,EAAE,GAAGf,GAAG,CAACmG,OAAO,CAAC,CAAC7C,sBAAsB,CAACtD,GAAG,CAACgE,KAAK,CAAC,CAAC2C,MAAM,KAAK,CAAI,EAAE;MACpH,IAAI,CAACvG,aAAa,CAAC+E,IAAI,CAAC,WAAW,CAAC;IACxC;IACA,IAAI,IAAI,CAAClF,MAAM,CAAC0H,aAAa,CAAChB,MAAM,KAAK,CAAC,EAAE;MACxC,IAAI,CAACvG,aAAa,CAAC+E,IAAI,CAAC,OAAO,CAAC;IACpC;IACA,IAAI,CAACzE,WAAW,CAAC4E,QAAQ,EAAE;EAC/B,CAAC;EACDlH,WAAW,CAACkC,SAAS,CAAC0G,cAAc,GAAG,UAAUY,OAAO,EAAE;IACtD,IAAI,CAACrJ,KAAK,CAACK,MAAM,CAAC,GAAG,GAAG,IAAI,CAACqD,SAAS,CAAC2F,OAAO,CAAC,EAAE,IAAI,CAACzH,cAAc,CAAC,CAAC,EAAE;MACpE,OAAO,CAAC;IACZ,CAAC,MACI,IAAI,CAAC5B,KAAK,CAACK,MAAM,CAAC,GAAG,GAAGgJ,OAAO,EAAE,IAAI,CAACzH,cAAc,CAAC,CAAC,EAAE;MACzD,OAAO,CAAC;IACZ,CAAC,MACI;MACD,OAAO,CAAC,CAAC;IACb;EACJ,CAAC;EACD;EACA/B,WAAW,CAACkC,SAAS,CAACmF,eAAe,GAAG,YAAY;IAChD,IAAI,IAAI,CAACK,QAAQ,KAAK,QAAQ,EAAE;MAC5B,OAAO3G,aAAa,CAAC,IAAI,CAACc,MAAM,CAAC;IACrC,CAAC,MACI;MACD;MACA,IAAI8B,IAAI,GAAG;QAAElB,MAAM,EAAE,IAAI,CAAC6B;MAAW,CAAC;MACtC,IAAI,CAACzC,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAACyF,YAAY,EAAEzD,IAAI,CAAC;MAC7C,OAAO,IAAI,CAAC9B,MAAM,CAAC6H,QAAQ,CAAC,CAAC,CAAC;IAClC;EACJ,CAAC;EACD;EACA1J,WAAW,CAACkC,SAAS,CAACc,QAAQ,GAAG,UAAUW,IAAI,EAAE;IAC7C,IAAIY,KAAK,GAAG,IAAI;IAChB,IAAIpE,KAAK,CAACwD,IAAI,CAACC,IAAI,CAAC,IAAI,CAACD,IAAI,CAACC,IAAI,CAACjB,EAAE,EAAE;MACnC;IACJ;IACA,IAAIgH,QAAQ,GAAGhG,IAAI,CAACC,IAAI,CAACjB,EAAE,CAACiH,MAAM,CAAC,CAAC,IAAI,CAAC/H,MAAM,CAACa,OAAO,CAACC,EAAE,GAAG,MAAM,EAAE4F,MAAM,CAAC;IAC5E;IACA,IAAIsB,OAAO;IACX,IAAIF,QAAQ,KAAK,SAAS,IAAIA,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,QAAQ,EAAE;MAC7EE,OAAO,GAAG,CAAC9I,aAAa,CAAC,IAAI,CAACc,MAAM,CAAC,CAAC;MACtC,IAAI,CAACA,MAAM,CAAC6H,QAAQ,GAAGG,OAAO;IAClC,CAAC,MACI;MACD,IAAI,CAAChI,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAACmI,YAAY,EAAE,CAAC,CAAC,CAAC;MAC3C,IAAI,IAAI,CAACjI,MAAM,CAACiG,YAAY,KAAK,gBAAgB,IAAI6B,QAAQ,KAAK,MAAM,EAAE;QACtEE,OAAO,GAAG,CAAC,IAAI,CAACzC,YAAY,CAAC;MACjC,CAAC,MACI;QACDyC,OAAO,GAAG,IAAI,CAAChI,MAAM,CAAC6H,QAAQ;MAClC;IACJ;IACA,IAAIpC,SAAS,GAAG;MACZ5B,MAAM,EAAE,KAAK;MACbhD,OAAO,EAAEiB,IAAI,CAACjB,OAAO;MACrB6E,WAAW,EAAEsC,OAAO;MACpBjG,IAAI,EAAED,IAAI,CAACC;IACf,CAAC;IACD,IAAI,CAAC/B,MAAM,CAAC8F,OAAO,CAAC,WAAW,EAAEL,SAAS,EAAE,UAAUyC,aAAa,EAAE;MACjE,IAAIC,MAAM;MACV,IAAI,CAACD,aAAa,CAACrE,MAAM,EAAE;QACvB;QACA,QAAQiE,QAAQ;UACZ,KAAK,KAAK;YACN/I,QAAQ,CAAC2D,KAAK,CAAC1C,MAAM,CAAC;YACtB;UACJ,KAAK,MAAM;YACPhB,SAAS,CAAC0D,KAAK,CAAC1C,MAAM,CAAC;YACvB;UACJ,KAAK,OAAO;YACR,IAAI0C,KAAK,CAACmD,QAAQ,KAAK,QAAQ,EAAE;cAC7B,IAAKnD,KAAK,CAAC1C,MAAM,CAACiG,YAAY,KAAK,gBAAgB,IAAMvD,KAAK,CAAC1C,MAAM,CAACiG,YAAY,KAAK,aAAc,EAAE;gBACnGvD,KAAK,CAAC1C,MAAM,CAACoI,UAAU,GAAG/I,WAAW,CAACqD,KAAK,CAAC1C,MAAM,EAAE0C,KAAK,CAAC6C,YAAY,EAAE7C,KAAK,CAAC1C,MAAM,CAACqI,IAAI,CAAC;cAC9F,CAAC,MACI;gBACD3F,KAAK,CAAC1C,MAAM,CAACoI,UAAU,GAAG,EAAE;cAChC;YACJ,CAAC,MACI;cACD1F,KAAK,CAAC1C,MAAM,CAACoI,UAAU,GAAG,EAAE;YAChC;YACA5I,YAAY,CAACkD,KAAK,CAAC1C,MAAM,CAAC;YAC1B;UACJ,KAAK,QAAQ;YACT,KAAK,IAAIsI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,OAAO,CAACtB,MAAM,EAAE4B,CAAC,EAAE,EAAE;cACrC,IAAI,CAAC1I,aAAa,CAACoI,OAAO,CAACM,CAAC,CAAC,CAAC,EAAE;gBAC5B7I,kBAAkB,CAACiD,KAAK,CAAC1C,MAAM,EAAEgI,OAAO,CAACM,CAAC,CAAC,EAAExI,MAAM,CAACyI,cAAc,CAAC;gBACnE;cACJ;YACJ;YACAzJ,YAAY,CAAC4D,KAAK,CAAC1C,MAAM,EAAE,QAAQ,CAAC;YACpC;UACJ;UACA,KAAK,UAAU;YACX,KAAK,IAAIyG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuB,OAAO,CAACtB,MAAM,EAAED,CAAC,EAAE,EAAE;cACrC,IAAI,CAAC5G,iBAAiB,CAACmI,OAAO,CAACvB,CAAC,CAAC,CAAC,EAAE;gBAChChH,kBAAkB,CAACiD,KAAK,CAAC1C,MAAM,EAAEgI,OAAO,CAACvB,CAAC,CAAC,EAAE3G,MAAM,CAAC0I,kBAAkB,CAAC;gBACvE;cACJ;YACJ;YACA,IAAI9F,KAAK,CAAC1C,MAAM,CAACiG,YAAY,KAAK,gBAAgB,EAAE;cAChDvD,KAAK,CAAC1C,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAAC2I,YAAY,EAAE,CAAC,CAAC,CAAC;YAChD,CAAC,MACI,IAAI/F,KAAK,CAAC1C,MAAM,CAACsH,aAAa,CAACZ,MAAM,GAAG,CAAC,EAAE;cAC5C9H,QAAQ,CAAC8D,KAAK,CAAC1C,MAAM,EAAE0C,KAAK,CAAC1C,MAAM,CAACqI,IAAI,EAAE3F,KAAK,CAAC1C,MAAM,CAACsH,aAAa,CAAC;YACzE;YACA;UACJ,KAAK,QAAQ;YACT,IAAI,CAAC1H,aAAa,CAACoI,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;cAC5BvI,kBAAkB,CAACiD,KAAK,CAAC1C,MAAM,EAAEgI,OAAO,CAAC,CAAC,CAAC,EAAElI,MAAM,CAACyI,cAAc,CAAC;YACvE,CAAC,MACI;cACD7F,KAAK,CAAC1C,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAAC4I,UAAU,EAAE,CAAC,CAAC,CAAC;cAC1C5J,YAAY,CAAC4D,KAAK,CAAC1C,MAAM,EAAE,QAAQ,CAAC;YACxC;YACA;UACJ,KAAK,WAAW;YACZ;YACA0C,KAAK,CAAC1C,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAAC6I,aAAa,EAAE,CAAC,CAAC,CAAC;YAC7C;UACJ,KAAK,SAAS;YACV1J,OAAO,CAACyD,KAAK,CAAC1C,MAAM,CAAC;YACrB;UACJ,KAAK,MAAM;YACP,IAAI0C,KAAK,CAAC1C,MAAM,CAAC4I,WAAW,EAAE;cAC1BlG,KAAK,CAAC1C,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAAC+I,QAAQ,EAAE;gBAAEjI,MAAM,EAAE8B,KAAK,CAAC1C,MAAM,CAAC4I;cAAY,CAAC,CAAC;YAC9E,CAAC,MACI,IAAIlG,KAAK,CAAC1C,MAAM,CAACiG,YAAY,KAAK,gBAAgB,EAAE;cACrDvD,KAAK,CAAC1C,MAAM,CAACmD,oBAAoB,CAAC2F,0BAA0B,CAACtK,OAAO,CAACkE,KAAK,CAACM,iBAAiB,EAAE,IAAI,CAAC,CAAC;YACxG;YACA;UACJ,KAAK,SAAS;YACVN,KAAK,CAAC1C,MAAM,CAAC4H,MAAM,CAAC9H,MAAM,CAACiJ,WAAW,EAAE,CAAC,CAAC,CAAC;YAC3CZ,MAAM,GAAGzF,KAAK,CAAC1C,MAAM,CAACsH,aAAa;YACnC,IAAI5E,KAAK,CAAC1C,MAAM,CAACiG,YAAY,KAAK,gBAAgB,EAAE;cAChDkC,MAAM,GAAG,EAAE;YACf;YACAtJ,UAAU,CAAC6D,KAAK,CAAC1C,MAAM,EAAEmI,MAAM,EAAEzF,KAAK,CAAC1C,MAAM,CAACqI,IAAI,EAAE,SAAS,CAAC;YAC9D;UACJ,KAAK,WAAW;YACZ3I,eAAe,CAACgD,KAAK,CAAC1C,MAAM,CAAC;YAC7B;UACJ,KAAK,QAAQ;YACTL,UAAU,CAAC+C,KAAK,CAAC1C,MAAM,CAAC;YACxB;UACJ;UACA,KAAK,MAAM;UACX;UACA;UACA,KAAK,MAAM;UACX;UACA;UACA,KAAK,MAAM;UACX;UACA;UACA,KAAK,WAAW;UAChB;UACA;UACA,KAAK,YAAY;YACb;YACAT,kBAAkB,CAACmD,KAAK,CAAC1C,MAAM,EAAE8B,IAAI,CAAC;YACtC;UACJ;UACA,KAAK,MAAM;YACP;YACAvC,kBAAkB,CAACmD,KAAK,CAAC1C,MAAM,EAAE8B,IAAI,CAAC;YACtC;UACJ;UACA;UACA,KAAK,gBAAgB;YACjB1C,YAAY,CAACsD,KAAK,CAAC1C,MAAM,EAAE,YAAY,CAAC;YACxC;UACJ;UACA;UACA,KAAK,aAAa;YACdZ,YAAY,CAACsD,KAAK,CAAC1C,MAAM,EAAE,SAAS,CAAC;YACrC;QAAM;MAElB;IACJ,CAAC,CAAC;EACN,CAAC;EACD7B,WAAW,CAACkC,SAAS,CAAC2I,iBAAiB,GAAG,UAAUC,CAAC,EAAE;IACnD,IAAIA,CAAC,CAACC,MAAM,KAAK,IAAI,CAACC,aAAa,EAAE,IAAIF,CAAC,CAACC,MAAM,KAAK,QAAQ,EAAE;MAC5D;MACA;IACJ;IACA,KAAK,IAAIE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGC,MAAM,CAACC,IAAI,CAACN,CAAC,CAACO,OAAO,CAAC,EAAEJ,EAAE,GAAGC,EAAE,CAAC3C,MAAM,EAAE0C,EAAE,EAAE,EAAE;MAChE,IAAIK,IAAI,GAAGJ,EAAE,CAACD,EAAE,CAAC;MACjB,QAAQK,IAAI;QACR,KAAK,UAAU;UACX,IAAI,CAAChJ,WAAW,CAACe,QAAQ,GAAGlC,WAAW,CAAC,IAAI,CAACU,MAAM,EAAED,GAAG,CAAC0B,UAAU,CAAC;UACpE;MAAM;IAElB;EACJ,CAAC;EACDtD,WAAW,CAACkC,SAAS,CAACwB,gBAAgB,GAAG,YAAY;IACjD,IAAI,CAAC7B,MAAM,CAAC0J,EAAE,CAAC5J,MAAM,CAAC6J,OAAO,EAAE,IAAI,CAACA,OAAO,EAAE,IAAI,CAAC;IAClD,IAAI,CAAC3J,MAAM,CAAC0J,EAAE,CAAC5J,MAAM,CAAC8J,YAAY,EAAE,IAAI,CAACZ,iBAAiB,EAAE,IAAI,CAAC;IACjE,IAAI,CAACa,cAAc,GAAG,IAAIpL,cAAc,CAAC,IAAI,CAACgC,WAAW,CAACI,OAAO,EAAE;MAC/DiJ,SAAS,EAAE,IAAI,CAACC,gBAAgB,CAAC7I,IAAI,CAAC,IAAI,CAAC;MAC3CZ,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3B0J,SAAS,EAAE;IACf,CAAC,CAAC;EACN,CAAC;EACD7L,WAAW,CAACkC,SAAS,CAAC4J,mBAAmB,GAAG,YAAY;IACpD,IAAI,CAACjK,MAAM,CAACkK,GAAG,CAACpK,MAAM,CAAC6J,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;IAC7C,IAAI,CAAC3J,MAAM,CAACkK,GAAG,CAACpK,MAAM,CAAC8J,YAAY,EAAE,IAAI,CAACZ,iBAAiB,CAAC;IAC5D,IAAI,CAACa,cAAc,CAACF,OAAO,EAAE;EACjC,CAAC;EACDxL,WAAW,CAACkC,SAAS,CAAC0J,gBAAgB,GAAG,UAAUd,CAAC,EAAE;IAClD,QAAQA,CAAC,CAACkB,MAAM;MACZ,KAAK,SAAS;MACd,KAAK,WAAW;QACZlB,CAAC,CAACmB,cAAc,EAAE;IAAC;EAE/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIjM,WAAW,CAACkC,SAAS,CAAC8I,aAAa,GAAG,YAAY;IAC9C,OAAO,aAAa;EACxB,CAAC;EACDhL,WAAW,CAACkC,SAAS,CAACsJ,OAAO,GAAG,YAAY;IACxC,IAAI,IAAI,CAAC3J,MAAM,CAACqK,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACJ,mBAAmB,EAAE;IAC1B,IAAI,CAACxJ,WAAW,CAACkJ,OAAO,EAAE;EAC9B,CAAC;EACD;EACAxL,WAAW,CAACkC,SAAS,CAAC4G,WAAW,GAAG,UAAUpE,IAAI,EAAE;IAChD,IAAI8C,KAAK,GAAG,EAAE;IACd,KAAK,IAAIc,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG5D,IAAI,CAAC6D,MAAM,EAAED,CAAC,EAAE,EAAE;MAClC,IAAI1E,IAAI,GAAG,KAAK,CAAC;MACjB,IAAIyE,MAAM,GAAG,IAAI,CAACxE,SAAS,CAACa,IAAI,CAAC4D,CAAC,CAAC,CAAC;MACpC,IAAIqB,QAAQ,GAAG3I,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE6C,IAAI,CAAC4D,CAAC,CAAC,CAAC;MAClD,QAAQ5D,IAAI,CAAC4D,CAAC,CAAC;QACX,KAAK,GAAG;UACJ1E,IAAI,GAAG;YAAEuI,SAAS,EAAE;UAAK,CAAC;UAC1B;QACJ,KAAK,MAAM;UACPvI,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC0K;UAAU,CAAC;UAC7D;QACJ,KAAK,QAAQ;UACT1I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC2K;UAAY,CAAC;UAC/D;QACJ,KAAK,KAAK;UACN3I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC4K;UAAS,CAAC;UAC5D;QACJ,KAAK,MAAM;UACP5I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC6K;UAAU,CAAC;UAC7D;QACJ,KAAK,OAAO;UACR7I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC8K;UAAW,CAAC;UAC9D;QACJ,KAAK,QAAQ;UACT9I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC+K;UAAY,CAAC;UAC/D;QACJ,KAAK,QAAQ;UACT/I,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACgL;UAAY,CAAC;UAC/D;QACJ,KAAK,WAAW;UACZhJ,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACiL;UAAe,CAAC;UAClE;QACJ,KAAK,SAAS;UACVjJ,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACkL;UAAa,CAAC;UAChE;QACJ,KAAK,QAAQ;UACTlJ,IAAI,GAAG;YACHjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACmL,YAAY;YACrDvF,KAAK,EAAE,CACH;cACI7E,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,MAAM,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,MAAM,CAAC;cACpEwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmL,MAAM,KAAK,MAAM,GAAGpL,GAAG,CAACqL,aAAa,GAAG;YACjE,CAAC,EACD;cACItK,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,MAAM,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,MAAM,CAAC;cACpEwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmL,MAAM,KAAK,MAAM,GAAGpL,GAAG,CAACqL,aAAa,GAAG;YACjE,CAAC,EACD;cACItK,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,MAAM,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,cAAc,CAAC;cAC5EwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmL,MAAM,KAAK,cAAc,GAAGpL,GAAG,CAACqL,aAAa,GAAG;YACzE,CAAC,EACD;cAAEd,SAAS,EAAE;YAAK,CAAC,EACnB;cACIxJ,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,WAAW,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,WAAW,CAAC;cAC9EwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACqL,SAAS,KAAK,WAAW,GAAGtL,GAAG,CAACuL,cAAc,GAAG;YAC1E,CAAC,EACD;cACIxK,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,YAAY,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,YAAY,CAAC;cAChFwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACqL,SAAS,KAAK,YAAY,GAAGtL,GAAG,CAACuL,cAAc,GAAG;YAC3E,CAAC,EACD;cACIxK,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,MAAM,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,MAAM,CAAC;cACpEwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACqL,SAAS,KAAK,MAAM,GAAGtL,GAAG,CAACuL,cAAc,GAAG;YACrE,CAAC;UAET,CAAC;UACD;QACJ;QACA,KAAK,MAAM;UACPvJ,IAAI,GAAG;YACHjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmC,IAAI,KAAK,SAAS,GAAGpC,GAAG,CAACyC,SAAS,GAAGzC,GAAG,CAACuC,UAAU;YACpGqD,KAAK,EAAE,CACH;cACI7E,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,gBAAgB,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,iBAAiB,CAAC;cACzFwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmC,IAAI,KAAK,SAAS,GAAG,IAAI,GAAGpC,GAAG,CAACuL;YACzD,CAAC,EACD;cACIxK,EAAE,EAAE,IAAI,CAACkB,SAAS,CAAC,aAAa,CAAC;cAAEuI,IAAI,EAAEpL,aAAa,CAAC,IAAI,CAACa,MAAM,EAAE,cAAc,CAAC;cACnFwK,OAAO,EAAE,IAAI,CAACxK,MAAM,CAACmC,IAAI,KAAK,SAAS,GAAGpC,GAAG,CAACuL,cAAc,GAAG;YACnE,CAAC;UAET,CAAC;UACD;QACJ,KAAK,SAAS;UACVvJ,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACwL;UAAa,CAAC;UAChE;QACJ,KAAK,WAAW;UACZxJ,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAACyL;UAAe,CAAC;UAClE;QACJ;QACA,KAAK,UAAU;UACXzJ,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC,QAAQ;YAAE0C,OAAO,EAAEzK,GAAG,CAAC0L;UAAc,CAAC;UACjE;QACJ;QACA;UACI1J,IAAI,GAAG;YAAEjB,EAAE,EAAE0F,MAAM;YAAE+D,IAAI,EAAEzC;UAAS,CAAC;UACrC;MAAM;MAEdnC,KAAK,CAACT,IAAI,CAACnD,IAAI,CAAC;IACpB;IACA,OAAO4D,KAAK;EAChB,CAAC;EACDxH,WAAW,CAACkC,SAAS,CAAC2B,SAAS,GAAG,UAAUlB,EAAE,EAAE;IAC5C,OAAO,IAAI,CAACd,MAAM,CAACa,OAAO,CAACC,EAAE,GAAG,MAAM,GAAGA,EAAE,CAAC4K,WAAW,EAAE;EAC7D,CAAC;EACD,OAAOvN,WAAW;AACtB,CAAC,EAAG;AACJ,SAASA,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}