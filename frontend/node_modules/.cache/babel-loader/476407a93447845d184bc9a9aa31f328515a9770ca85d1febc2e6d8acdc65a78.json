{"ast":null,"code":"import { NodeSelection } from './../../selection/index';\nimport { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n *\n * @hidden\n\n */\nvar NodeCutter = /** @class */function () {\n  function NodeCutter() {\n    this.enterAction = 'P';\n    this.position = -1;\n    this.nodeSelection = new NodeSelection();\n  }\n  // Split Selection Node\n  /**\n   * GetSpliceNode method\n   *\n   * @param {Range} range - specifies the range\n   * @param {HTMLElement} node - specifies the node element.\n   * @returns {Node} - returns the node value\n   * @hidden\n    */\n  NodeCutter.prototype.GetSpliceNode = function (range, node) {\n    node = this.SplitNode(range, node, true);\n    node = this.SplitNode(range, node, false);\n    return node;\n  };\n  /**\n   * @param {Range} range - specifies the range\n   * @param {HTMLElement} node - specifies the node element.\n   * @param {boolean} isCollapsed - specifies the boolean value\n   * @returns {HTMLElement} - returns the element\n   * @hidden\n    */\n  NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n    if (node) {\n      var clone = range.cloneRange();\n      var parent_1 = node.parentNode;\n      var index = this.nodeSelection.getIndex(node);\n      clone.collapse(isCollapsed);\n      // eslint-disable-next-line\n      isCollapsed ? clone.setStartBefore(node) : clone.setEndAfter(node);\n      var fragment = clone.extractContents();\n      if (isCollapsed) {\n        node = parent_1.childNodes[index];\n        fragment = this.spliceEmptyNode(fragment, false);\n        if (fragment && fragment.childNodes.length > 0) {\n          var isEmpty = fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG' && this.isImgElm(fragment) && fragment.textContent === '' ? true : false;\n          if (!isEmpty) {\n            if (node) {\n              InsertMethods.AppendBefore(fragment, node);\n            } else {\n              parent_1.appendChild(fragment);\n              var divNode = document.createElement('div');\n              divNode.innerHTML = '&#65279;&#65279;';\n              node = divNode.firstChild;\n              parent_1.appendChild(node);\n            }\n          }\n        }\n      } else {\n        node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] : parent_1.childNodes[0];\n        fragment = this.spliceEmptyNode(fragment, true);\n        if (fragment && fragment.childNodes.length > 0) {\n          var isEmpty = fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG' && this.isImgElm(fragment) && fragment.textContent.trim() === '' ? true : false;\n          if (!isEmpty) {\n            if (node) {\n              InsertMethods.AppendBefore(fragment, node, true);\n            } else {\n              parent_1.appendChild(fragment);\n              var divNode = document.createElement('div');\n              divNode.innerHTML = '&#65279;&#65279;';\n              parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n              node = parent_1.firstChild;\n            }\n          }\n        }\n      }\n      return node;\n    } else {\n      return null;\n    }\n  };\n  NodeCutter.prototype.isImgElm = function (fragment) {\n    var result = true;\n    if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG') {\n      var firstChild = fragment.childNodes[0];\n      for (var i = 0; !isNOU(firstChild.childNodes) && i < firstChild.childNodes.length; i++) {\n        if (firstChild.childNodes[i].nodeName === 'IMG') {\n          result = false;\n        }\n      }\n    } else {\n      result = true;\n    }\n    return result;\n  };\n  NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n    var len;\n    if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName === '#text' && fragment.childNodes[0].textContent === '' || fragment.textContent === '') {\n      len = -1;\n    } else {\n      len = fragment.childNodes.length - 1;\n    }\n    if (len > -1 && !isStart) {\n      this.spliceEmptyNode(fragment.childNodes[len], isStart);\n    } else if (len > -1) {\n      this.spliceEmptyNode(fragment.childNodes[0], isStart);\n    } else if (fragment.nodeType !== 3 && fragment.nodeType !== 11) {\n      fragment.parentNode.removeChild(fragment);\n    }\n    return fragment;\n  };\n  // Cursor Position split\n  NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n    indexes = isStart ? indexes : indexes.reverse();\n    var position = indexes[0];\n    for (var num = 0; num < indexes.length && (isStart ? indexes[num] < index : indexes[num] >= index); num++) {\n      position = indexes[num];\n    }\n    return position;\n  };\n  /**\n   * GetCursorRange method\n   *\n   * @param {Document} docElement - specifies the document\n   * @param {Range} range - specifies the range\n   * @param {Node} node - specifies the node.\n   * @returns {Range} - returns the range value\n   * @hidden\n    */\n  NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n    var cursorRange = docElement.createRange();\n    var indexes = [];\n    indexes.push(0);\n    var str = this.TrimLineBreak(node.data);\n    var index = str.indexOf(' ', 0);\n    while (index !== -1) {\n      if (indexes.indexOf(index) < 0) {\n        indexes.push(index);\n      }\n      if (new RegExp('\\\\s').test(str[index - 1]) && indexes.indexOf(index - 1) < 0) {\n        indexes.push(index - 1);\n      }\n      if (new RegExp('\\\\s').test(str[index + 1])) {\n        indexes.push(index + 1);\n      }\n      index = str.indexOf(' ', index + 1);\n    }\n    indexes.push(str.length);\n    if (indexes.indexOf(range.startOffset) >= 0 || indexes.indexOf(range.startOffset - 1) >= 0 && (range.startOffset !== 1 || range.startOffset === 1 && new RegExp('\\\\s').test(str[0])) || indexes[indexes.length - 1] - 1 === range.startOffset) {\n      cursorRange = range;\n      this.position = 1;\n    } else {\n      var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n      this.position = range.startOffset - startOffset;\n      cursorRange.setStart(range.startContainer, startOffset);\n      cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n    }\n    return cursorRange;\n  };\n  /**\n   * GetCursorNode method\n   *\n   * @param {Document} docElement - specifies the document\n   * @param {Range} range - specifies the range\n   * @param {Node} node - specifies the node.\n   * @returns {Node} - returns the node value\n   * @hidden\n    */\n  NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n    return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n  };\n  /**\n   * TrimLineBreak method\n   *\n   * @param {string} line - specifies the string value.\n   * @returns {string} - returns the string\n   * @hidden\n    */\n  NodeCutter.prototype.TrimLineBreak = function (line) {\n    return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n  };\n  return NodeCutter;\n}();\nexport { NodeCutter };","map":{"version":3,"names":["NodeSelection","isNullOrUndefined","isNOU","InsertMethods","NodeCutter","enterAction","position","nodeSelection","prototype","GetSpliceNode","range","node","SplitNode","isCollapsed","clone","cloneRange","parent_1","parentNode","index","getIndex","collapse","setStartBefore","setEndAfter","fragment","extractContents","childNodes","spliceEmptyNode","length","isEmpty","nodeName","isImgElm","textContent","AppendBefore","appendChild","divNode","document","createElement","innerHTML","firstChild","trim","insertBefore","result","i","isStart","len","nodeType","removeChild","GetCursorStart","indexes","reverse","num","GetCursorRange","docElement","cursorRange","createRange","push","str","TrimLineBreak","data","indexOf","RegExp","test","startOffset","setStart","startContainer","setEnd","GetCursorNode","line","replace"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/nodecutter.js"],"sourcesContent":["import { NodeSelection } from './../../selection/index';\nimport { isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { InsertMethods } from './insert-methods';\n/**\n * Split the Node based on selection\n *\n * @hidden\n\n */\nvar NodeCutter = /** @class */ (function () {\n    function NodeCutter() {\n        this.enterAction = 'P';\n        this.position = -1;\n        this.nodeSelection = new NodeSelection();\n    }\n    // Split Selection Node\n    /**\n     * GetSpliceNode method\n     *\n     * @param {Range} range - specifies the range\n     * @param {HTMLElement} node - specifies the node element.\n     * @returns {Node} - returns the node value\n     * @hidden\n\n     */\n    NodeCutter.prototype.GetSpliceNode = function (range, node) {\n        node = this.SplitNode(range, node, true);\n        node = this.SplitNode(range, node, false);\n        return node;\n    };\n    /**\n     * @param {Range} range - specifies the range\n     * @param {HTMLElement} node - specifies the node element.\n     * @param {boolean} isCollapsed - specifies the boolean value\n     * @returns {HTMLElement} - returns the element\n     * @hidden\n\n     */\n    NodeCutter.prototype.SplitNode = function (range, node, isCollapsed) {\n        if (node) {\n            var clone = range.cloneRange();\n            var parent_1 = node.parentNode;\n            var index = this.nodeSelection.getIndex(node);\n            clone.collapse(isCollapsed);\n            // eslint-disable-next-line\n            (isCollapsed) ? clone.setStartBefore(node) : clone.setEndAfter(node);\n            var fragment = clone.extractContents();\n            if (isCollapsed) {\n                node = parent_1.childNodes[index];\n                fragment = this.spliceEmptyNode(fragment, false);\n                if (fragment && fragment.childNodes.length > 0) {\n                    var isEmpty = (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG'\n                        && this.isImgElm(fragment) && fragment.textContent === '') ? true : false;\n                    if (!isEmpty) {\n                        if (node) {\n                            InsertMethods.AppendBefore(fragment, node);\n                        }\n                        else {\n                            parent_1.appendChild(fragment);\n                            var divNode = document.createElement('div');\n                            divNode.innerHTML = '&#65279;&#65279;';\n                            node = divNode.firstChild;\n                            parent_1.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                node = parent_1.childNodes.length > 1 ? parent_1.childNodes[index] :\n                    parent_1.childNodes[0];\n                fragment = this.spliceEmptyNode(fragment, true);\n                if (fragment && fragment.childNodes.length > 0) {\n                    var isEmpty = (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG'\n                        && this.isImgElm(fragment) && fragment.textContent.trim() === '') ? true : false;\n                    if (!isEmpty) {\n                        if (node) {\n                            InsertMethods.AppendBefore(fragment, node, true);\n                        }\n                        else {\n                            parent_1.appendChild(fragment);\n                            var divNode = document.createElement('div');\n                            divNode.innerHTML = '&#65279;&#65279;';\n                            parent_1.insertBefore(divNode.firstChild, parent_1.firstChild);\n                            node = parent_1.firstChild;\n                        }\n                    }\n                }\n            }\n            return node;\n        }\n        else {\n            return null;\n        }\n    };\n    NodeCutter.prototype.isImgElm = function (fragment) {\n        var result = true;\n        if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName !== 'IMG') {\n            var firstChild = fragment.childNodes[0];\n            for (var i = 0; !isNOU(firstChild.childNodes) && i < firstChild.childNodes.length; i++) {\n                if (firstChild.childNodes[i].nodeName === 'IMG') {\n                    result = false;\n                }\n            }\n        }\n        else {\n            result = true;\n        }\n        return result;\n    };\n    NodeCutter.prototype.spliceEmptyNode = function (fragment, isStart) {\n        var len;\n        if (fragment.childNodes.length === 1 && fragment.childNodes[0].nodeName === '#text' &&\n            fragment.childNodes[0].textContent === '' || fragment.textContent === '') {\n            len = -1;\n        }\n        else {\n            len = fragment.childNodes.length - 1;\n        }\n        if (len > -1 && !isStart) {\n            this.spliceEmptyNode(fragment.childNodes[len], isStart);\n        }\n        else if (len > -1) {\n            this.spliceEmptyNode(fragment.childNodes[0], isStart);\n        }\n        else if (fragment.nodeType !== 3 && fragment.nodeType !== 11) {\n            fragment.parentNode.removeChild(fragment);\n        }\n        return fragment;\n    };\n    // Cursor Position split\n    NodeCutter.prototype.GetCursorStart = function (indexes, index, isStart) {\n        indexes = (isStart) ? indexes : indexes.reverse();\n        var position = indexes[0];\n        for (var num = 0; num < indexes.length && ((isStart) ? (indexes[num] < index) : (indexes[num] >= index)); num++) {\n            position = indexes[num];\n        }\n        return position;\n    };\n    /**\n     * GetCursorRange method\n     *\n     * @param {Document} docElement - specifies the document\n     * @param {Range} range - specifies the range\n     * @param {Node} node - specifies the node.\n     * @returns {Range} - returns the range value\n     * @hidden\n\n     */\n    NodeCutter.prototype.GetCursorRange = function (docElement, range, node) {\n        var cursorRange = docElement.createRange();\n        var indexes = [];\n        indexes.push(0);\n        var str = this.TrimLineBreak(node.data);\n        var index = str.indexOf(' ', 0);\n        while (index !== -1) {\n            if (indexes.indexOf(index) < 0) {\n                indexes.push(index);\n            }\n            if (new RegExp('\\\\s').test(str[index - 1]) && (indexes.indexOf(index - 1) < 0)) {\n                indexes.push(index - 1);\n            }\n            if (new RegExp('\\\\s').test(str[index + 1])) {\n                indexes.push(index + 1);\n            }\n            index = str.indexOf(' ', (index + 1));\n        }\n        indexes.push(str.length);\n        if ((indexes.indexOf(range.startOffset) >= 0)\n            || ((indexes.indexOf(range.startOffset - 1) >= 0) && (range.startOffset !== 1\n                || (range.startOffset === 1 && new RegExp('\\\\s').test(str[0])))\n                || ((indexes[indexes.length - 1] - 1) === range.startOffset))) {\n            cursorRange = range;\n            this.position = 1;\n        }\n        else {\n            var startOffset = this.GetCursorStart(indexes, range.startOffset, true);\n            this.position = range.startOffset - startOffset;\n            cursorRange.setStart(range.startContainer, startOffset);\n            cursorRange.setEnd(range.startContainer, this.GetCursorStart(indexes, range.startOffset, false));\n        }\n        return cursorRange;\n    };\n    /**\n     * GetCursorNode method\n     *\n     * @param {Document} docElement - specifies the document\n     * @param {Range} range - specifies the range\n     * @param {Node} node - specifies the node.\n     * @returns {Node} - returns the node value\n     * @hidden\n\n     */\n    NodeCutter.prototype.GetCursorNode = function (docElement, range, node) {\n        return this.GetSpliceNode(this.GetCursorRange(docElement, range, node), node);\n    };\n    /**\n     * TrimLineBreak method\n     *\n     * @param {string} line - specifies the string value.\n     * @returns {string} - returns the string\n     * @hidden\n\n     */\n    NodeCutter.prototype.TrimLineBreak = function (line) {\n        return line.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\n    };\n    return NodeCutter;\n}());\nexport { NodeCutter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}