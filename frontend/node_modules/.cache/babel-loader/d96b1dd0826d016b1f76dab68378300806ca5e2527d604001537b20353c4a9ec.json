{"ast":null,"code":"import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */function () {\n  function UndoRedoManager(parent, options) {\n    this.undoRedoStack = [];\n    this.parent = parent;\n    this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n    this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n    this.addEventListener();\n  }\n  UndoRedoManager.prototype.addEventListener = function () {\n    var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n    this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n    this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n    this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n    this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n  };\n  UndoRedoManager.prototype.onPropertyChanged = function (props) {\n    for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'undoRedoSteps':\n          this.undoRedoSteps = props.newProp.undoRedoSteps;\n          break;\n        case 'undoRedoTimer':\n          this.undoRedoTimer = props.newProp.undoRedoTimer;\n          break;\n      }\n    }\n  };\n  UndoRedoManager.prototype.removeEventListener = function () {\n    this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n    this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n    this.parent.observer.off(EVENTS.ACTION, this.onAction);\n  };\n  /**\n   * onAction method\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub command\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.onAction = function (e) {\n    if (e.subCommand === 'Undo') {\n      this.undo(e);\n    } else {\n      this.redo(e);\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  UndoRedoManager.prototype.keyDown = function (e) {\n    var event = e.event;\n    // eslint-disable-next-line\n    var proxy = this;\n    switch (event.action) {\n      case 'undo':\n        event.preventDefault();\n        proxy.undo(e);\n        break;\n      case 'redo':\n        event.preventDefault();\n        proxy.redo(e);\n        break;\n    }\n  };\n  UndoRedoManager.prototype.keyUp = function (e) {\n    if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n      this.saveData(e);\n    }\n  };\n  /**\n   * RTE collection stored html format.\n   *\n   * @function saveData\n   * @param {KeyboardEvent} e - specifies the keyboard event\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.saveData = function (e) {\n    var range = new NodeSelection().getRange(this.parent.currentDocument);\n    var currentContainer = range.startContainer;\n    for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n      if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' && currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' && currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n        detach(currentContainer.childNodes[i]);\n      }\n    }\n    range = new NodeSelection().getRange(this.parent.currentDocument);\n    var save = new NodeSelection().save(range, this.parent.currentDocument);\n    var htmlText = this.parent.editableElement.innerHTML;\n    var changEle = {\n      text: htmlText,\n      range: save\n    };\n    if (this.undoRedoStack.length >= this.steps) {\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n    }\n    if (this.undoRedoStack.length > 1 && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed && this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer && this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim()) {\n      return;\n    }\n    this.undoRedoStack.push(changEle);\n    this.steps = this.undoRedoStack.length - 1;\n    if (this.steps > this.undoRedoSteps) {\n      this.undoRedoStack.shift();\n      this.steps--;\n    }\n    if (e && e.callBack) {\n      e.callBack();\n    }\n  };\n  /**\n   * Undo the editable text.\n   *\n   * @function undo\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.undo = function (e) {\n    if (this.steps > 0) {\n      var range = this.undoRedoStack[this.steps - 1].range;\n      var removedContent = this.undoRedoStack[this.steps - 1].text;\n      this.parent.editableElement.innerHTML = removedContent;\n      this.parent.editableElement.focus();\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps--;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Undo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * Redo the editable text.\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @function redo\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.redo = function (e) {\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      var range = this.undoRedoStack[this.steps + 1].range;\n      this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n      this.parent.editableElement.focus();\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps++;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Redo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {boolean} - returns the boolean value\n   * @hidden\n    */\n  UndoRedoManager.prototype.getUndoStatus = function () {\n    var status = {\n      undo: false,\n      redo: false\n    };\n    if (this.steps > 0) {\n      status.undo = true;\n    }\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      status.redo = true;\n    }\n    return status;\n  };\n  return UndoRedoManager;\n}();\nexport { UndoRedoManager };","map":{"version":3,"names":["debounce","isNullOrUndefined","detach","NodeSelection","EVENTS","isIDevice","setEditFrameFocus","UndoRedoManager","parent","options","undoRedoStack","undoRedoSteps","undoRedoTimer","addEventListener","prototype","debounceListener","keyUp","observer","on","KEY_UP_HANDLER","KEY_DOWN_HANDLER","keyDown","ACTION","onAction","MODEL_CHANGED_PLUGIN","onPropertyChanged","props","_i","_a","Object","keys","newProp","length","prop","removeEventListener","off","e","subCommand","undo","redo","destroy","event","proxy","action","preventDefault","keyCode","ctrlKey","saveData","range","getRange","currentDocument","currentContainer","startContainer","i","childNodes","nodeName","textContent","save","htmlText","editableElement","innerHTML","changEle","text","steps","slice","collapsed","startOffset","endOffset","trim","push","shift","callBack","removedContent","focus","selector","restore","requestType","editorMode","elements","nodeSelection","getSelectedNodes","getUndoStatus","status"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/undo.js"],"sourcesContent":["import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    /**\n     * onAction method\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub command\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * RTE collection stored html format.\n     *\n     * @function saveData\n     * @param {KeyboardEvent} e - specifies the keyboard event\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var currentContainer = range.startContainer;\n        for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n            if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' &&\n                currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' &&\n                currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n                detach(currentContainer.childNodes[i]);\n            }\n        }\n        range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var htmlText = this.parent.editableElement.innerHTML;\n        var changEle = { text: htmlText, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @function undo\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = removedContent;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}