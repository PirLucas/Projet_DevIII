{"ast":null,"code":"import { Ajax, createElement, select, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, setValue, getValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { createDialog, createExtDialog } from '../pop-up/dialog';\nimport { fileType, setNodeId, getLocaleText, setDateObject, doPasteUpdate, getParentPath, getPathObject } from '../common/utility';\nimport { generatePath } from '../common/utility';\n/**\n * Function to read the content from given path in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nexport function read(parent, event, path) {\n  // eslint-disable-next-line\n  var itemData = parent.itemData;\n  for (var i = 0; i < itemData.length; i++) {\n    if (isNOU(getValue('hasChild', itemData[i]))) {\n      setValue('hasChild', false, itemData[i]);\n    }\n  }\n  // eslint-disable-next-line\n  var data = {\n    action: 'read',\n    path: path,\n    showHiddenItems: parent.showHiddenItems,\n    data: itemData\n  };\n  createAjax(parent, data, readSuccess, event);\n}\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nexport function createFolder(parent, itemName) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'create',\n    path: parent.path,\n    name: itemName,\n    data: parent.itemData\n  };\n  createAjax(parent, data, createSuccess, itemName);\n}\n/**\n * Function to filter the files in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string}  event - specifies the event.\n * @returns {void}\n * @private\n */\nexport function filter(parent, event) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'filter',\n    path: parent.path,\n    showHiddenItems: parent.showHiddenItems,\n    data: [getPathObject(parent)]\n  };\n  // eslint-disable-next-line\n  var filterData;\n  // eslint-disable-next-line\n  var filterDataVal = parent.filterData ? extend(filterData, data, parent.filterData) : data;\n  createAjax(parent, filterDataVal, filterSuccess, event, getValue('action', filterDataVal));\n}\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string} itemNewName - specifies the item's new name.\n * @returns {void}\n * @private\n */\nexport function rename(parent, path, itemNewName) {\n  var name;\n  var newName;\n  if (parent.breadcrumbbarModule.searchObj.element.value === '' && !parent.isFiltered) {\n    name = parent.currentItemText;\n    newName = itemNewName;\n  } else {\n    var fPath = parent.filterPath;\n    if (parent.hasId) {\n      name = parent.currentItemText;\n      newName = itemNewName;\n    } else {\n      fPath = fPath.replace(/\\\\/g, '/');\n      name = fPath.replace(path, '') + parent.currentItemText;\n      newName = fPath.replace(path, '') + itemNewName;\n    }\n  }\n  // eslint-disable-next-line\n  var data = {\n    action: 'rename',\n    path: path,\n    name: name,\n    newName: newName,\n    data: parent.itemData\n  };\n  createAjax(parent, data, renameSuccess, path);\n}\n/**\n * Function to paste file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} names - specifies the names.\n * @param {string} targetPath - specifies the target path.\n * @param {string} pasteOperation - specifies the paste operation.\n * @param {string[]} renameItems - specifies the rename items.\n * @param {Object[]} actionRecords - specifies the action records.\n * @returns {void}\n * @private\n */\nexport function paste(parent, path, names, targetPath, pasteOperation,\n// eslint-disable-next-line\nrenameItems, actionRecords) {\n  // eslint-disable-next-line\n  var data = {\n    action: pasteOperation,\n    path: path,\n    targetData: parent.itemData[0],\n    targetPath: targetPath,\n    names: names,\n    renameFiles: renameItems,\n    data: actionRecords\n  };\n  parent.destinationPath = targetPath;\n  createAjax(parent, data, pasteSuccess, path, pasteOperation, targetPath);\n}\n/**\n * Function to delete file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} items - specifies the items.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nexport function Delete(parent, items, path, operation) {\n  // eslint-disable-next-line\n  var data = {\n    action: operation,\n    path: path,\n    names: items,\n    data: parent.itemData\n  };\n  createAjax(parent, data, deleteSuccess, path);\n}\n/* istanbul ignore next */\n/**\n * Function to get details of file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} names - specifies the names.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation data.\n * @returns {void}\n * @private\n */\nexport function GetDetails(parent, names, path, operation) {\n  // eslint-disable-next-line\n  var data = {\n    action: operation,\n    path: path,\n    names: names,\n    data: parent.itemData\n  };\n  createAjax(parent, data, detailsSuccess, path, operation);\n}\n/**\n * Function for createAjax in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {Function} fn - specifies the fn.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the target path.\n * @returns {void}\n * @private\n */\nfunction createAjax(\n// eslint-disable-next-line\nparent, data, fn, event, operation, targetPath) {\n  // eslint-disable-next-line\n  var ajaxSettings = {\n    url: parent.ajaxSettings.url,\n    type: 'POST',\n    mode: true,\n    dataType: 'json',\n    contentType: 'application/json',\n    data: JSON.stringify(data),\n    onSuccess: null,\n    onFailure: null,\n    beforeSend: null\n  };\n  var eventArgs = {\n    action: getValue('action', data),\n    ajaxSettings: ajaxSettings,\n    cancel: false\n  };\n  parent.trigger('beforeSend', eventArgs, function (beforeSendArgs) {\n    if (!beforeSendArgs.cancel) {\n      parent.notify(events.beforeRequest, {});\n      var ajax = new Ajax({\n        url: getValue('url', beforeSendArgs.ajaxSettings),\n        type: getValue('type', beforeSendArgs.ajaxSettings),\n        mode: getValue('mode', beforeSendArgs.ajaxSettings),\n        dataType: getValue('dataType', beforeSendArgs.ajaxSettings),\n        contentType: getValue('contentType', beforeSendArgs.ajaxSettings),\n        data: getValue('data', beforeSendArgs.ajaxSettings),\n        beforeSend: getValue('beforeSend', beforeSendArgs.ajaxSettings),\n        onSuccess: function (result) {\n          if (isNOU(result)) {\n            var result_1 = {\n              error: {\n                fileExists: null,\n                message: getLocaleText(parent, 'Server-Error') + ' ' + parent.ajaxSettings.url,\n                code: '406'\n              },\n              files: null\n            };\n            triggerAjaxFailure(parent, beforeSendArgs, fn, result_1, event, operation, targetPath);\n            return;\n          }\n          if (typeof result === 'string') {\n            result = JSON.parse(result);\n          }\n          parent.notify(events.afterRequest, {\n            action: 'success'\n          });\n          var id = parent.expandedId ? parent.expandedId : parent.pathId[parent.pathId.length - 1];\n          if (!isNOU(result.cwd) && getValue('action', data) === 'read') {\n            result.cwd.name = parent.pathId.length === 1 ? parent.rootAliasName || result.cwd.name : result.cwd.name;\n            setValue('_fm_id', id, result.cwd);\n            setValue(id, result.cwd, parent.feParent);\n            if (!isNOU(result.files) || result.error.code === '401') {\n              if ((event === 'finalize-end' || event === 'initial-end') && parent.pathNames.length === 0) {\n                // eslint-disable-next-line\n                var root = getValue(parent.pathId[0], parent.feParent);\n                parent.pathNames[0] = getValue('name', root);\n                parent.hasId = !isNOU(getValue('id', root));\n              }\n              if (event === 'finalize-end') {\n                generatePath(parent);\n              }\n            }\n          }\n          if (!isNOU(result.files)) {\n            setDateObject(result.files);\n            for (var i = 0, len = result.files.length; i < len; i++) {\n              // eslint-disable-next-line\n              var item = result.files[i];\n              setValue('_fm_iconClass', fileType(item), item);\n            }\n            if (getValue('action', data) === 'read') {\n              setNodeId(result, id);\n              setValue(id, result.files, parent.feFiles);\n            }\n          }\n          if (!isNOU(result.details) && !isNOU(parent.rootAliasName)) {\n            var rootName = parent.rootAliasName || getValue('name', result.details);\n            var location_1 = getValue('location', result.details).replace(new RegExp('/', 'g'), '\\\\');\n            if (getValue('path', data) === '/' || parent.hasId && getValue('path', data).match(/[/]/g).length === 1) {\n              if (getValue('names', data).length === 0) {\n                setValue('name', rootName, result.details);\n                location_1 = rootName;\n              } else {\n                location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n              }\n            } else {\n              location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n            }\n            setValue('location', location_1, result.details);\n          }\n          fn(parent, result, event, operation, targetPath);\n          if (!isNOU(result.files) && (event === 'path-changed' || event === 'finalize-end' || event === 'open-end')) {\n            parent.notify(events.searchTextChange, result);\n          }\n          if (typeof getValue('onSuccess', beforeSendArgs.ajaxSettings) === 'function') {\n            getValue('onSuccess', beforeSendArgs.ajaxSettings)();\n          }\n        },\n        onFailure: function () {\n          var result = {\n            files: null,\n            error: {\n              code: '404',\n              message: getLocaleText(parent, 'Network-Error') + ' ' + parent.ajaxSettings.url,\n              fileExists: null\n            }\n          };\n          triggerAjaxFailure(parent, beforeSendArgs, fn, result, event, operation, targetPath);\n        }\n      });\n      ajax.send();\n    }\n  });\n}\n/**\n * Function for trigger Ajax failure in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {BeforeSendEventArgs} beforeSendArgs - specifies the beforeSendArgs.\n * @param {Function} fn - specifies the function.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the targetPath.\n * @returns {void}\n * @private\n */\nfunction triggerAjaxFailure(\n// eslint-disable-next-line\nparent, beforeSendArgs, fn, result, event, operation, targetPath) {\n  parent.notify(events.afterRequest, {\n    action: 'failure'\n  });\n  fn(parent, result, event, operation, targetPath);\n  if (typeof getValue('onFailure', beforeSendArgs.ajaxSettings) === 'function') {\n    getValue('onFailure', beforeSendArgs.ajaxSettings)();\n  }\n}\n/**\n * Function for read success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction readSuccess(parent, result, event) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    parent.notify(events.selectionChanged, {});\n    var args = {\n      action: 'read',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    if (result.error.code === '401') {\n      result.files = [];\n      parent.notify(event, result);\n      parent.notify(events.selectionChanged, {});\n    }\n    onFailure(parent, result, 'read');\n  }\n  if (parent.isDragDrop && parent.isDropEnd) {\n    if (parent.droppedObjects.length !== 0) {\n      var args = {\n        fileDetails: parent.droppedObjects\n      };\n      parent.trigger('fileDropped', args);\n    }\n    parent.isDropEnd = parent.isDragDrop = false;\n  }\n}\n/**\n * Function for filter success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction filterSuccess(parent, result, event, action) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    var args = {\n      action: action,\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, action);\n  }\n}\n/* istanbul ignore next */\n/**\n * Function for create success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nfunction createSuccess(parent, result, itemName) {\n  if (!isNOU(result.files)) {\n    if (parent.dialogObj && parent.dialogObj.visible) {\n      parent.dialogObj.hide();\n    }\n    parent.createdItem = result.files[0];\n    parent.breadcrumbbarModule.searchObj.value = '';\n    var args = {\n      action: 'create',\n      result: result\n    };\n    parent.trigger('success', args);\n    parent.itemData = [getPathObject(parent)];\n    read(parent, events.createEnd, parent.path);\n  } else {\n    if (result.error.code === '400') {\n      if (parent.dialogObj && parent.dialogObj.visible) {\n        var ele = select('#newname', parent.dialogObj.element);\n        var error = getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + ele.value + '\"');\n        ele.parentElement.nextElementSibling.innerHTML = error;\n      } else {\n        var result_2 = {\n          files: null,\n          error: {\n            code: '400',\n            message: getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + itemName + '\"'),\n            fileExists: null\n          }\n        };\n        createDialog(parent, 'Error', result_2);\n      }\n      var args = {\n        action: 'create',\n        error: result.error\n      };\n      parent.trigger('failure', args);\n    } else {\n      if (parent.dialogObj && parent.dialogObj.visible) {\n        parent.dialogObj.hide();\n      }\n      onFailure(parent, result, 'create');\n    }\n  }\n}\n/* istanbul ignore next */\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path\n * @returns {void}\n * @private\n */\nfunction renameSuccess(parent, result, path) {\n  if (!isNOU(result.files)) {\n    if (!isNOU(parent.dialogObj)) {\n      parent.dialogObj.hide();\n    }\n    var args = {\n      action: 'rename',\n      result: result\n    };\n    parent.trigger('success', args);\n    parent.renamedItem = result.files[0];\n    if (parent.activeModule === 'navigationpane') {\n      parent.pathId.pop();\n      parent.itemData = [getValue(parent.pathId[parent.pathId.length - 1], parent.feParent)];\n      read(parent, events.renameEndParent, getParentPath(parent.path));\n    } else {\n      parent.itemData = [getPathObject(parent)];\n      if (parent.breadcrumbbarModule.searchObj.value !== '') {\n        Search(parent, events.renameEnd, parent.path, parent.searchWord, parent.showHiddenItems, !parent.searchSettings.ignoreCase);\n      } else {\n        if (parent.isFiltered) {\n          filter(parent, events.renameEnd);\n        } else {\n          read(parent, events.renameEnd, parent.path);\n        }\n      }\n    }\n  } else {\n    if (result.error.code === '400' && parent.dialogObj && parent.dialogObj.visible) {\n      var ele = select('#rename', parent.dialogObj.element);\n      var error = getLocaleText(parent, 'Validation-Rename-Exists').replace('{0}', '\"' + parent.currentItemText + '\"');\n      error = error.replace('{1}', '\"' + ele.value + '\"');\n      ele.parentElement.nextElementSibling.innerHTML = error;\n      var args = {\n        action: 'rename',\n        error: result.error\n      };\n      parent.trigger('failure', args);\n    } else {\n      if (!isNOU(parent.dialogObj)) {\n        parent.dialogObj.hide();\n      }\n      onFailure(parent, result, 'rename');\n    }\n  }\n}\n/* istanbul ignore next */\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction pasteSuccess(parent, result, path, operation) {\n  if (result.error && result.error.fileExists) {\n    parent.fileLength = 0;\n    if (!isNOU(result.files)) {\n      parent.isPasteError = true;\n      doPasteUpdate(parent, operation, result);\n    }\n    createExtDialog(parent, 'DuplicateItems', result.error.fileExists);\n    if (result.error.code === '404') {\n      createDialog(parent, 'Error', result);\n    }\n  } else if (!result.error && !isNOU(result.files)) {\n    parent.isPasteError = false;\n    doPasteUpdate(parent, operation, result);\n  } else if (result.error && !isNOU(result.files)) {\n    parent.isPasteError = true;\n    doPasteUpdate(parent, operation, result);\n    createDialog(parent, 'Error', result);\n  } else {\n    onFailure(parent, result, operation);\n  }\n}\n/**\n * Function to delete success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nfunction deleteSuccess(parent, result, path) {\n  if (!isNOU(result.files)) {\n    parent.setProperties({\n      path: path\n    }, true);\n    parent.itemData = [getPathObject(parent)];\n    read(parent, events.deleteEnd, parent.path);\n    if (result.error) {\n      onFailure(parent, result, 'delete');\n    } else {\n      var args = {\n        action: 'delete',\n        result: result\n      };\n      parent.trigger('success', args);\n    }\n  } else {\n    onFailure(parent, result, 'delete');\n  }\n}\n/**\n * Function for details success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction detailsSuccess(\n// eslint:disable-next-line\nparent, result, path, operation) {\n  if (!isNOU(result.details)) {\n    createDialog(parent, operation, null, result.details);\n    var args = {\n      action: 'details',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, 'details');\n  }\n}\n/**\n * Function for on failure event in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction onFailure(parent, result, action) {\n  createDialog(parent, 'Error', result);\n  var args = {\n    action: action,\n    error: result.error\n  };\n  parent.trigger('failure', args);\n}\n/**\n * Function for search in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @param {string} searchString - specifies the search string.\n * @param {boolean} showHiddenItems - specifies the hidden items.\n * @param {boolean} caseSensitive - specifies the casing of search text.\n * @returns {void}\n * @private\n */\nexport function Search(\n// eslint:disable-next-line\nparent, event, path, searchString, showHiddenItems, caseSensitive) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'search',\n    path: path,\n    searchString: searchString,\n    showHiddenItems: showHiddenItems,\n    caseSensitive: caseSensitive,\n    data: parent.itemData\n  };\n  createAjax(parent, data, searchSuccess, event);\n}\n/* istanbul ignore next */\n/**\n * Function for search success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction searchSuccess(parent, result, event) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    var args = {\n      action: 'search',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, 'search');\n  }\n}\n/* istanbul ignore next */\n/**\n * Function for download in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} items - specifies the items.\n * @returns {void}\n * @private\n */\nexport function Download(parent, path, items) {\n  var downloadUrl = parent.ajaxSettings.downloadUrl ? parent.ajaxSettings.downloadUrl : parent.ajaxSettings.url;\n  // eslint-disable-next-line\n  var data = {\n    'action': 'download',\n    'path': path,\n    'names': items,\n    'data': parent.itemData\n  };\n  var eventArgs = {\n    data: data,\n    cancel: false\n  };\n  parent.trigger('beforeDownload', eventArgs, function (downloadArgs) {\n    if (!downloadArgs.cancel) {\n      var form = createElement('form', {\n        id: parent.element.id + '_downloadForm',\n        attrs: {\n          action: downloadUrl,\n          method: 'post',\n          name: 'downloadForm',\n          'download': ''\n        }\n      });\n      var input = createElement('input', {\n        id: parent.element.id + '_hiddenForm',\n        attrs: {\n          name: 'downloadInput',\n          value: JSON.stringify(downloadArgs.data),\n          type: 'hidden'\n        }\n      });\n      form.appendChild(input);\n      parent.element.appendChild(form);\n      document.forms.namedItem('downloadForm').submit();\n      parent.element.removeChild(form);\n    }\n  });\n}","map":{"version":3,"names":["Ajax","createElement","select","extend","isNullOrUndefined","isNOU","setValue","getValue","events","createDialog","createExtDialog","fileType","setNodeId","getLocaleText","setDateObject","doPasteUpdate","getParentPath","getPathObject","generatePath","read","parent","event","path","itemData","i","length","data","action","showHiddenItems","createAjax","readSuccess","createFolder","itemName","name","createSuccess","filter","filterData","filterDataVal","filterSuccess","rename","itemNewName","newName","breadcrumbbarModule","searchObj","element","value","isFiltered","currentItemText","fPath","filterPath","hasId","replace","renameSuccess","paste","names","targetPath","pasteOperation","renameItems","actionRecords","targetData","renameFiles","destinationPath","pasteSuccess","Delete","items","operation","deleteSuccess","GetDetails","detailsSuccess","fn","ajaxSettings","url","type","mode","dataType","contentType","JSON","stringify","onSuccess","onFailure","beforeSend","eventArgs","cancel","trigger","beforeSendArgs","notify","beforeRequest","ajax","result","result_1","error","fileExists","message","code","files","triggerAjaxFailure","parse","afterRequest","id","expandedId","pathId","cwd","rootAliasName","feParent","pathNames","root","len","item","feFiles","details","rootName","location_1","RegExp","match","substring","indexOf","searchTextChange","send","selectionChanged","args","isDragDrop","isDropEnd","droppedObjects","fileDetails","dialogObj","visible","hide","createdItem","createEnd","ele","parentElement","nextElementSibling","innerHTML","result_2","renamedItem","activeModule","pop","renameEndParent","Search","renameEnd","searchWord","searchSettings","ignoreCase","fileLength","isPasteError","setProperties","deleteEnd","searchString","caseSensitive","searchSuccess","Download","downloadUrl","downloadArgs","form","attrs","method","input","appendChild","document","forms","namedItem","submit","removeChild"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-filemanager/src/file-manager/common/operations.js"],"sourcesContent":["import { Ajax, createElement, select, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, setValue, getValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { createDialog, createExtDialog } from '../pop-up/dialog';\nimport { fileType, setNodeId, getLocaleText, setDateObject, doPasteUpdate, getParentPath, getPathObject } from '../common/utility';\nimport { generatePath } from '../common/utility';\n/**\n * Function to read the content from given path in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nexport function read(parent, event, path) {\n    // eslint-disable-next-line\n    var itemData = parent.itemData;\n    for (var i = 0; i < itemData.length; i++) {\n        if (isNOU(getValue('hasChild', itemData[i]))) {\n            setValue('hasChild', false, itemData[i]);\n        }\n    }\n    // eslint-disable-next-line\n    var data = { action: 'read', path: path, showHiddenItems: parent.showHiddenItems, data: itemData };\n    createAjax(parent, data, readSuccess, event);\n}\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nexport function createFolder(parent, itemName) {\n    // eslint-disable-next-line\n    var data = { action: 'create', path: parent.path, name: itemName, data: parent.itemData };\n    createAjax(parent, data, createSuccess, itemName);\n}\n/**\n * Function to filter the files in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string}  event - specifies the event.\n * @returns {void}\n * @private\n */\nexport function filter(parent, event) {\n    // eslint-disable-next-line\n    var data = { action: 'filter', path: parent.path, showHiddenItems: parent.showHiddenItems, data: [getPathObject(parent)] };\n    // eslint-disable-next-line\n    var filterData;\n    // eslint-disable-next-line\n    var filterDataVal = parent.filterData ? extend(filterData, data, parent.filterData) : data;\n    createAjax(parent, filterDataVal, filterSuccess, event, getValue('action', filterDataVal));\n}\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string} itemNewName - specifies the item's new name.\n * @returns {void}\n * @private\n */\nexport function rename(parent, path, itemNewName) {\n    var name;\n    var newName;\n    if (parent.breadcrumbbarModule.searchObj.element.value === '' && !parent.isFiltered) {\n        name = parent.currentItemText;\n        newName = itemNewName;\n    }\n    else {\n        var fPath = parent.filterPath;\n        if (parent.hasId) {\n            name = parent.currentItemText;\n            newName = itemNewName;\n        }\n        else {\n            fPath = fPath.replace(/\\\\/g, '/');\n            name = fPath.replace(path, '') + parent.currentItemText;\n            newName = fPath.replace(path, '') + itemNewName;\n        }\n    }\n    // eslint-disable-next-line\n    var data = {\n        action: 'rename', path: path, name: name, newName: newName, data: parent.itemData\n    };\n    createAjax(parent, data, renameSuccess, path);\n}\n/**\n * Function to paste file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} names - specifies the names.\n * @param {string} targetPath - specifies the target path.\n * @param {string} pasteOperation - specifies the paste operation.\n * @param {string[]} renameItems - specifies the rename items.\n * @param {Object[]} actionRecords - specifies the action records.\n * @returns {void}\n * @private\n */\nexport function paste(parent, path, names, targetPath, pasteOperation, \n// eslint-disable-next-line\nrenameItems, actionRecords) {\n    // eslint-disable-next-line\n    var data = {\n        action: pasteOperation, path: path, targetData: parent.itemData[0],\n        targetPath: targetPath, names: names, renameFiles: renameItems, data: actionRecords\n    };\n    parent.destinationPath = targetPath;\n    createAjax(parent, data, pasteSuccess, path, pasteOperation, targetPath);\n}\n/**\n * Function to delete file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} items - specifies the items.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nexport function Delete(parent, items, path, operation) {\n    // eslint-disable-next-line\n    var data = { action: operation, path: path, names: items, data: parent.itemData };\n    createAjax(parent, data, deleteSuccess, path);\n}\n/* istanbul ignore next */\n/**\n * Function to get details of file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} names - specifies the names.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation data.\n * @returns {void}\n * @private\n */\nexport function GetDetails(parent, names, path, operation) {\n    // eslint-disable-next-line\n    var data = { action: operation, path: path, names: names, data: parent.itemData };\n    createAjax(parent, data, detailsSuccess, path, operation);\n}\n/**\n * Function for createAjax in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {Function} fn - specifies the fn.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the target path.\n * @returns {void}\n * @private\n */\nfunction createAjax(\n// eslint-disable-next-line\nparent, data, fn, event, operation, targetPath) {\n    // eslint-disable-next-line\n    var ajaxSettings = {\n        url: parent.ajaxSettings.url,\n        type: 'POST',\n        mode: true,\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify(data),\n        onSuccess: null,\n        onFailure: null,\n        beforeSend: null\n    };\n    var eventArgs = { action: getValue('action', data), ajaxSettings: ajaxSettings, cancel: false };\n    parent.trigger('beforeSend', eventArgs, function (beforeSendArgs) {\n        if (!beforeSendArgs.cancel) {\n            parent.notify(events.beforeRequest, {});\n            var ajax = new Ajax({\n                url: getValue('url', beforeSendArgs.ajaxSettings),\n                type: getValue('type', beforeSendArgs.ajaxSettings),\n                mode: getValue('mode', beforeSendArgs.ajaxSettings),\n                dataType: getValue('dataType', beforeSendArgs.ajaxSettings),\n                contentType: getValue('contentType', beforeSendArgs.ajaxSettings),\n                data: getValue('data', beforeSendArgs.ajaxSettings),\n                beforeSend: getValue('beforeSend', beforeSendArgs.ajaxSettings),\n                onSuccess: function (result) {\n                    if (isNOU(result)) {\n                        var result_1 = {\n                            error: {\n                                fileExists: null,\n                                message: getLocaleText(parent, 'Server-Error') + ' ' + parent.ajaxSettings.url,\n                                code: '406'\n                            },\n                            files: null\n                        };\n                        triggerAjaxFailure(parent, beforeSendArgs, fn, result_1, event, operation, targetPath);\n                        return;\n                    }\n                    if (typeof (result) === 'string') {\n                        result = JSON.parse(result);\n                    }\n                    parent.notify(events.afterRequest, { action: 'success' });\n                    var id = parent.expandedId ? parent.expandedId : parent.pathId[parent.pathId.length - 1];\n                    if (!isNOU(result.cwd) && (getValue('action', data) === 'read')) {\n                        result.cwd.name = (parent.pathId.length === 1) ? (parent.rootAliasName || result.cwd.name) : result.cwd.name;\n                        setValue('_fm_id', id, result.cwd);\n                        setValue(id, result.cwd, parent.feParent);\n                        if (!isNOU(result.files) || result.error.code === '401') {\n                            if ((event === 'finalize-end' || event === 'initial-end') && parent.pathNames.length === 0) {\n                                // eslint-disable-next-line\n                                var root = getValue(parent.pathId[0], parent.feParent);\n                                parent.pathNames[0] = getValue('name', root);\n                                parent.hasId = !isNOU(getValue('id', root));\n                            }\n                            if (event === 'finalize-end') {\n                                generatePath(parent);\n                            }\n                        }\n                    }\n                    if (!isNOU(result.files)) {\n                        setDateObject(result.files);\n                        for (var i = 0, len = result.files.length; i < len; i++) {\n                            // eslint-disable-next-line\n                            var item = result.files[i];\n                            setValue('_fm_iconClass', fileType(item), item);\n                        }\n                        if (getValue('action', data) === 'read') {\n                            setNodeId(result, id);\n                            setValue(id, result.files, parent.feFiles);\n                        }\n                    }\n                    if (!isNOU(result.details) && !isNOU(parent.rootAliasName)) {\n                        var rootName = parent.rootAliasName || getValue('name', result.details);\n                        var location_1 = getValue('location', result.details).replace(new RegExp('/', 'g'), '\\\\');\n                        if ((getValue('path', data) === '/') || (parent.hasId && getValue('path', data).match(/[/]/g).length === 1)) {\n                            if (getValue('names', data).length === 0) {\n                                setValue('name', rootName, result.details);\n                                location_1 = rootName;\n                            }\n                            else {\n                                location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n                            }\n                        }\n                        else {\n                            location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n                        }\n                        setValue('location', location_1, result.details);\n                    }\n                    fn(parent, result, event, operation, targetPath);\n                    if (!isNOU(result.files) && (event === 'path-changed' || event === 'finalize-end' || event === 'open-end')) {\n                        parent.notify(events.searchTextChange, result);\n                    }\n                    if (typeof getValue('onSuccess', beforeSendArgs.ajaxSettings) === 'function') {\n                        getValue('onSuccess', beforeSendArgs.ajaxSettings)();\n                    }\n                },\n                onFailure: function () {\n                    var result = {\n                        files: null,\n                        error: {\n                            code: '404',\n                            message: getLocaleText(parent, 'Network-Error') + ' ' + parent.ajaxSettings.url,\n                            fileExists: null\n                        }\n                    };\n                    triggerAjaxFailure(parent, beforeSendArgs, fn, result, event, operation, targetPath);\n                }\n            });\n            ajax.send();\n        }\n    });\n}\n/**\n * Function for trigger Ajax failure in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {BeforeSendEventArgs} beforeSendArgs - specifies the beforeSendArgs.\n * @param {Function} fn - specifies the function.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the targetPath.\n * @returns {void}\n * @private\n */\nfunction triggerAjaxFailure(\n// eslint-disable-next-line\nparent, beforeSendArgs, fn, result, event, operation, targetPath) {\n    parent.notify(events.afterRequest, { action: 'failure' });\n    fn(parent, result, event, operation, targetPath);\n    if (typeof getValue('onFailure', beforeSendArgs.ajaxSettings) === 'function') {\n        getValue('onFailure', beforeSendArgs.ajaxSettings)();\n    }\n}\n/**\n * Function for read success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction readSuccess(parent, result, event) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        parent.notify(events.selectionChanged, {});\n        var args = { action: 'read', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        if (result.error.code === '401') {\n            result.files = [];\n            parent.notify(event, result);\n            parent.notify(events.selectionChanged, {});\n        }\n        onFailure(parent, result, 'read');\n    }\n    if (parent.isDragDrop && parent.isDropEnd) {\n        if (parent.droppedObjects.length !== 0) {\n            var args = { fileDetails: parent.droppedObjects };\n            parent.trigger('fileDropped', args);\n        }\n        parent.isDropEnd = parent.isDragDrop = false;\n    }\n}\n/**\n * Function for filter success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction filterSuccess(parent, result, event, action) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        var args = { action: action, result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, action);\n    }\n}\n/* istanbul ignore next */\n/**\n * Function for create success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nfunction createSuccess(parent, result, itemName) {\n    if (!isNOU(result.files)) {\n        if (parent.dialogObj && parent.dialogObj.visible) {\n            parent.dialogObj.hide();\n        }\n        parent.createdItem = result.files[0];\n        parent.breadcrumbbarModule.searchObj.value = '';\n        var args = { action: 'create', result: result };\n        parent.trigger('success', args);\n        parent.itemData = [getPathObject(parent)];\n        read(parent, events.createEnd, parent.path);\n    }\n    else {\n        if (result.error.code === '400') {\n            if (parent.dialogObj && parent.dialogObj.visible) {\n                var ele = select('#newname', parent.dialogObj.element);\n                var error = getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + ele.value + '\"');\n                ele.parentElement.nextElementSibling.innerHTML = error;\n            }\n            else {\n                var result_2 = {\n                    files: null,\n                    error: {\n                        code: '400',\n                        message: getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + itemName + '\"'),\n                        fileExists: null\n                    }\n                };\n                createDialog(parent, 'Error', result_2);\n            }\n            var args = { action: 'create', error: result.error };\n            parent.trigger('failure', args);\n        }\n        else {\n            if (parent.dialogObj && parent.dialogObj.visible) {\n                parent.dialogObj.hide();\n            }\n            onFailure(parent, result, 'create');\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path\n * @returns {void}\n * @private\n */\nfunction renameSuccess(parent, result, path) {\n    if (!isNOU(result.files)) {\n        if (!isNOU(parent.dialogObj)) {\n            parent.dialogObj.hide();\n        }\n        var args = { action: 'rename', result: result };\n        parent.trigger('success', args);\n        parent.renamedItem = result.files[0];\n        if (parent.activeModule === 'navigationpane') {\n            parent.pathId.pop();\n            parent.itemData = [getValue(parent.pathId[parent.pathId.length - 1], parent.feParent)];\n            read(parent, events.renameEndParent, getParentPath(parent.path));\n        }\n        else {\n            parent.itemData = [getPathObject(parent)];\n            if (parent.breadcrumbbarModule.searchObj.value !== '') {\n                Search(parent, events.renameEnd, parent.path, parent.searchWord, parent.showHiddenItems, !parent.searchSettings.ignoreCase);\n            }\n            else {\n                if (parent.isFiltered) {\n                    filter(parent, events.renameEnd);\n                }\n                else {\n                    read(parent, events.renameEnd, parent.path);\n                }\n            }\n        }\n    }\n    else {\n        if (result.error.code === '400' && parent.dialogObj && parent.dialogObj.visible) {\n            var ele = select('#rename', parent.dialogObj.element);\n            var error = getLocaleText(parent, 'Validation-Rename-Exists').replace('{0}', '\"' + parent.currentItemText + '\"');\n            error = error.replace('{1}', '\"' + ele.value + '\"');\n            ele.parentElement.nextElementSibling.innerHTML = error;\n            var args = { action: 'rename', error: result.error };\n            parent.trigger('failure', args);\n        }\n        else {\n            if (!isNOU(parent.dialogObj)) {\n                parent.dialogObj.hide();\n            }\n            onFailure(parent, result, 'rename');\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction pasteSuccess(parent, result, path, operation) {\n    if (result.error && result.error.fileExists) {\n        parent.fileLength = 0;\n        if (!isNOU(result.files)) {\n            parent.isPasteError = true;\n            doPasteUpdate(parent, operation, result);\n        }\n        createExtDialog(parent, 'DuplicateItems', result.error.fileExists);\n        if (result.error.code === '404') {\n            createDialog(parent, 'Error', result);\n        }\n    }\n    else if (!result.error && !isNOU(result.files)) {\n        parent.isPasteError = false;\n        doPasteUpdate(parent, operation, result);\n    }\n    else if (result.error && !isNOU(result.files)) {\n        parent.isPasteError = true;\n        doPasteUpdate(parent, operation, result);\n        createDialog(parent, 'Error', result);\n    }\n    else {\n        onFailure(parent, result, operation);\n    }\n}\n/**\n * Function to delete success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nfunction deleteSuccess(parent, result, path) {\n    if (!isNOU(result.files)) {\n        parent.setProperties({ path: path }, true);\n        parent.itemData = [getPathObject(parent)];\n        read(parent, events.deleteEnd, parent.path);\n        if (result.error) {\n            onFailure(parent, result, 'delete');\n        }\n        else {\n            var args = { action: 'delete', result: result };\n            parent.trigger('success', args);\n        }\n    }\n    else {\n        onFailure(parent, result, 'delete');\n    }\n}\n/**\n * Function for details success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction detailsSuccess(\n// eslint:disable-next-line\nparent, result, path, operation) {\n    if (!isNOU(result.details)) {\n        createDialog(parent, operation, null, result.details);\n        var args = { action: 'details', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, 'details');\n    }\n}\n/**\n * Function for on failure event in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction onFailure(parent, result, action) {\n    createDialog(parent, 'Error', result);\n    var args = { action: action, error: result.error };\n    parent.trigger('failure', args);\n}\n/**\n * Function for search in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @param {string} searchString - specifies the search string.\n * @param {boolean} showHiddenItems - specifies the hidden items.\n * @param {boolean} caseSensitive - specifies the casing of search text.\n * @returns {void}\n * @private\n */\nexport function Search(\n// eslint:disable-next-line\nparent, event, path, searchString, showHiddenItems, caseSensitive) {\n    // eslint-disable-next-line\n    var data = {\n        action: 'search', path: path, searchString: searchString, showHiddenItems: showHiddenItems, caseSensitive: caseSensitive,\n        data: parent.itemData\n    };\n    createAjax(parent, data, searchSuccess, event);\n}\n/* istanbul ignore next */\n/**\n * Function for search success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction searchSuccess(parent, result, event) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        var args = { action: 'search', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, 'search');\n    }\n}\n/* istanbul ignore next */\n/**\n * Function for download in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} items - specifies the items.\n * @returns {void}\n * @private\n */\nexport function Download(parent, path, items) {\n    var downloadUrl = parent.ajaxSettings.downloadUrl ? parent.ajaxSettings.downloadUrl : parent.ajaxSettings.url;\n    // eslint-disable-next-line\n    var data = { 'action': 'download', 'path': path, 'names': items, 'data': parent.itemData };\n    var eventArgs = { data: data, cancel: false };\n    parent.trigger('beforeDownload', eventArgs, function (downloadArgs) {\n        if (!downloadArgs.cancel) {\n            var form = createElement('form', {\n                id: parent.element.id + '_downloadForm',\n                attrs: { action: downloadUrl, method: 'post', name: 'downloadForm', 'download': '' }\n            });\n            var input = createElement('input', {\n                id: parent.element.id + '_hiddenForm',\n                attrs: { name: 'downloadInput', value: JSON.stringify(downloadArgs.data), type: 'hidden' }\n            });\n            form.appendChild(input);\n            parent.element.appendChild(form);\n            document.forms.namedItem('downloadForm').submit();\n            parent.element.removeChild(form);\n        }\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}