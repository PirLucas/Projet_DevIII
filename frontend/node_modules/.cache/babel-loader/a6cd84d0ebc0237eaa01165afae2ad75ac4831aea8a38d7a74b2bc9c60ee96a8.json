{"ast":null,"code":"import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */function () {\n  /**\n   * Constructor for toolbar renderer module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   */\n  function ToolbarRenderer(parent) {\n    this.parent = parent;\n    this.wireEvent();\n  }\n  ToolbarRenderer.prototype.wireEvent = function () {\n    this.parent.on(events.destroy, this.unWireEvent, this);\n  };\n  ToolbarRenderer.prototype.unWireEvent = function () {\n    this.parent.off(events.destroy, this.unWireEvent);\n    if (this.popupOverlay) {\n      EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n    }\n    this.removePopupContainer();\n  };\n  ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n    if (this.mode === 'Extended') {\n      e.enableCollision = false;\n    }\n  };\n  ToolbarRenderer.prototype.toolbarCreated = function () {\n    this.parent.notify(events.toolbarCreated, this);\n  };\n  ToolbarRenderer.prototype.toolbarClicked = function (args) {\n    if (!this.parent.enabled) {\n      return;\n    }\n    if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n      this.parent.notify(events.toolbarClick, args);\n    }\n    this.parent.trigger('toolbarClick', args);\n  };\n  ToolbarRenderer.prototype.dropDownSelected = function (args) {\n    this.parent.notify(events.dropDownSelect, args);\n    this.onPopupOverlay();\n  };\n  ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n    if (this.parent.readonly || !this.parent.enabled) {\n      return;\n    }\n    this.parent.notify(events.beforeDropDownItemRender, args);\n  };\n  ToolbarRenderer.prototype.dropDownOpen = function (args) {\n    if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) && (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n      var listEle = args.element.querySelectorAll('li');\n      if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n        addClass([listEle[0]], 'e-disabled');\n        removeClass([listEle[1], listEle[2]], 'e-disabled');\n      } else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n        removeClass([listEle[0]], 'e-disabled');\n        addClass([listEle[1], listEle[2]], 'e-disabled');\n      }\n    }\n    if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n      this.popupModal(args.element.parentElement);\n    }\n    this.parent.notify(events.selectionSave, args);\n  };\n  ToolbarRenderer.prototype.dropDownClose = function (args) {\n    this.removePopupContainer();\n    this.parent.notify(events.selectionRestore, args);\n  };\n  ToolbarRenderer.prototype.removePopupContainer = function () {\n    if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n      var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n      if (popupEle) {\n        this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n        popupEle.style.removeProperty('position');\n        removeClass([popupEle], 'e-popup-modal');\n      }\n      detach(this.popupContainer);\n      this.popupContainer = undefined;\n    }\n  };\n  /**\n   * renderToolbar method\n   *\n   * @param {IToolbarOptions} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderToolbar = function (args) {\n    this.setPanel(args.target);\n    this.renderPanel();\n    this.mode = args.overflowMode;\n    args.rteToolbarObj.toolbarObj = new Toolbar({\n      items: args.items,\n      width: '100%',\n      overflowMode: args.overflowMode,\n      beforeCreate: this.toolbarBeforeCreate.bind(this),\n      created: this.toolbarCreated.bind(this),\n      clicked: this.toolbarClicked.bind(this),\n      enablePersistence: args.enablePersistence,\n      enableRtl: args.enableRtl\n    });\n    args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n    args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n    args.rteToolbarObj.toolbarObj.appendTo(args.target);\n  };\n  /**\n   * renderDropDownButton method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n    var _this = this;\n    var css;\n    args.element.classList.add(CLS_DROPDOWN_BTN);\n    css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n    if (this.parent.inlineMode.enable && Browser.isDevice) {\n      css = css + ' ' + CLS_INLINE_DROPDOWN;\n    }\n    // eslint-disable-next-line\n    var proxy = this;\n    var dropDown = new DropDownButton({\n      items: args.items,\n      iconCss: args.iconCss,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        // eslint-disable-next-line\n        for (var index = 0; index < args.element.childNodes.length; index++) {\n          var divNode = _this.parent.createElement('div');\n          divNode.innerHTML = dropDown.content.trim();\n          if (divNode.textContent.trim() !== '' && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n            if (!args.element.childNodes[index].classList.contains('e-active')) {\n              addClass([args.element.childNodes[index]], 'e-active');\n            }\n          } else {\n            removeClass([args.element.childNodes[index]], 'e-active');\n          }\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    return dropDown;\n  };\n  /**\n   * renderListDropDown method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderListDropDown = function (args) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (args.itemName === 'NumberFormatList' ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_LIST_PRIMARY_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      items: args.items,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        var element = args.event ? args.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT) || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n          args.cancel = true;\n          return;\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    if (args.element.childElementCount === 1) {\n      dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    }\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    return dropDown;\n  };\n  // eslint-disable-next-line\n  ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n    if (!isNullOrUndefined(this.popupOverlay)) {\n      closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n      this.popupOverlay.style.display = 'none';\n      removeClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n  ToolbarRenderer.prototype.setIsModel = function (element) {\n    if (!closest(element, '.e-popup-container')) {\n      this.popupContainer = this.parent.createElement('div', {\n        className: 'e-rte-modal-popup e-popup-container e-center'\n      });\n      element.parentNode.insertBefore(this.popupContainer, element);\n      this.popupContainer.appendChild(element);\n      this.popupContainer.style.zIndex = element.style.zIndex;\n      this.popupContainer.style.display = 'flex';\n      element.style.position = 'relative';\n      addClass([element], 'e-popup-modal');\n      this.popupOverlay = this.parent.createElement('div', {\n        className: 'e-popup-overlay'\n      });\n      // eslint-disable-next-line\n      this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n      this.popupOverlay.style.display = 'block';\n      this.popupContainer.appendChild(this.popupOverlay);\n      EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n    } else {\n      element.parentElement.style.display = 'flex';\n      this.popupOverlay = element.nextElementSibling;\n      this.popupOverlay.style.display = 'block';\n      addClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n  ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n    var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n    removeClass(colorbox, 'e-selected');\n    var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n    colorbox.filter(function (colorbox) {\n      if (colorbox.style.backgroundColor === style) {\n        addClass([colorbox], 'e-selected');\n      }\n    });\n  };\n  /**\n   * renderColorPickerDropDown method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments.\n   * @param {string} item - specifies the item.\n   * @param {ColorPicker} colorPicker - specifies the colorpicker.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_COLOR_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    var range;\n    var initialBackgroundColor = isNullOrUndefined(defaultColor) ? proxy.parent.backgroundColor.default : defaultColor;\n    inlineEle.style.borderBottomColor = item === 'backgroundcolor' ? initialBackgroundColor : proxy.parent.fontColor.default;\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      target: colorPicker.element.parentElement,\n      cssClass: css,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: function (dropDownArgs) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          dropDownArgs.cancel = true;\n          return;\n        }\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          dropDownArgs.cancel = true;\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          proxy.parent.notify(events.selectionRestore, {});\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          var parentNode = range.startContainer.parentNode;\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th') || proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        } else {\n          var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n          var inst = getInstance(ele, ColorPicker);\n          inst.showButtons = dropDownArgs.element.querySelector('.e-color-palette') ? false : true;\n          inst.dataBind();\n        }\n        dropDownArgs.element.onclick = function (args) {\n          if (args.target.classList.contains('e-cancel')) {\n            dropDown.toggle();\n          }\n        };\n      },\n      open: function (dropDownArgs) {\n        _this.setColorPickerContentWidth(colorPicker);\n        var focusEle;\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        if (dropDownArgs.element.querySelector('.e-color-palette')) {\n          focusEle = ele.parentElement.querySelector('.e-palette');\n        } else {\n          focusEle = ele.parentElement.querySelector('e-handler');\n        }\n        if (focusEle) {\n          focusEle.focus();\n        }\n        if (Browser.isDevice) {\n          _this.popupModal(dropDownArgs.element.parentElement);\n        }\n        _this.pickerRefresh(dropDownArgs);\n      },\n      beforeClose: function (dropDownArgs) {\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        }\n      },\n      close: function (dropDownArgs) {\n        proxy.parent.notify(events.selectionRestore, {});\n        var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n        if (dropElement) {\n          dropElement.style.display = 'none';\n          dropElement.lastElementChild.style.display = 'none';\n          removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n        }\n        if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n          var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n          if (popupEle) {\n            dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n            popupEle.style.removeProperty('position');\n            removeClass([popupEle], 'e-popup-modal');\n          }\n          detach(dropElement);\n          proxy.popupContainer = undefined;\n        }\n      }\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    args.element.setAttribute('role', 'button');\n    dropDown.appendTo(args.element);\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n    if (this.parent.backgroundColor.mode === 'Picker') {\n      var popupElem = dropDownArgs.element.parentElement;\n      popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n      getInstance(popupElem, Popup).refreshPosition(popupElem);\n      popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n    }\n  };\n  ToolbarRenderer.prototype.popupModal = function (element) {\n    var popupInst = getInstance(element, Popup);\n    popupInst.relateTo = document.body;\n    popupInst.position = {\n      X: 0,\n      Y: 0\n    };\n    popupInst.targetType = 'container';\n    popupInst.collision = {\n      X: 'fit',\n      Y: 'fit'\n    };\n    popupInst.offsetY = 4;\n    popupInst.dataBind();\n    this.setIsModel(element);\n  };\n  ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n    var colorPickerContent = colorPicker.element.nextSibling;\n    if (colorPickerContent.style.width === '0px') {\n      colorPickerContent.style.width = '';\n      var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n      colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth + borderWidth + borderWidth);\n    }\n  };\n  /**\n   * renderColorPicker method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments\n   * @param {string} item - specifies the string values\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var value;\n    var colorPicker = new ColorPicker({\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      inline: true,\n      value: '#fff',\n      created: function () {\n        var value = item === 'backgroundcolor' ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        colorPicker.setProperties({\n          value: value\n        });\n      },\n      mode: item === 'backgroundcolor' ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode,\n      modeSwitcher: item === 'backgroundcolor' ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher,\n      beforeTileRender: function (args) {\n        args.element.classList.add(CLS_COLOR_PALETTE);\n        args.element.classList.add(CLS_CUSTOM_TILE);\n        if (args.value === '') {\n          args.element.classList.add(CLS_NOCOLOR_ITEM);\n        }\n      },\n      change: function (colorPickerArgs) {\n        var colorpickerValue = colorPickerArgs.currentValue.rgba;\n        colorPickerArgs.item = {\n          command: args.command,\n          subCommand: args.subCommand,\n          value: colorpickerValue\n        };\n        proxy.parent.notify(events.selectionRestore, {});\n        proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n        if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n          proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n        } else {\n          proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n        }\n        proxy.currentDropdown.toggle();\n      },\n      beforeModeSwitch: function (args) {\n        value = colorPicker.value;\n        if (value === '') {\n          colorPicker.setProperties({\n            value: args.mode === 'Picker' ? '#008000ff' : ''\n          }, true);\n        }\n        colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n      }\n    });\n    colorPicker.isStringTemplate = true;\n    colorPicker.columns = item === 'backgroundcolor' ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n    colorPicker.presetColors = item === 'backgroundcolor' ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode;\n    colorPicker.cssClass = item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n    colorPicker.createElement = this.parent.createElement;\n    colorPicker.appendTo(document.getElementById(args.target));\n    return colorPicker;\n  };\n  /**\n   * The function is used to render Rich Text Editor toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderPanel = function () {\n    this.getPanel().classList.add(CLS_TOOLBAR);\n  };\n  /**\n   * Get the toolbar element of RichTextEditor\n   *\n   * @returns {Element} - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.getPanel = function () {\n    return this.toolbarPanel;\n  };\n  /**\n   * Set the toolbar element of RichTextEditor\n   *\n   * @returns {void}\n   * @param  {Element} panel - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.setPanel = function (panel) {\n    this.toolbarPanel = panel;\n  };\n  return ToolbarRenderer;\n}();\nexport { ToolbarRenderer };","map":{"version":3,"names":["addClass","Browser","removeClass","EventHandler","formatUnit","isNullOrUndefined","isNOU","getInstance","closest","selectAll","detach","Toolbar","DropDownButton","Popup","classes","events","CLS_TOOLBAR","CLS_DROPDOWN_BTN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_INLINE_DROPDOWN","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_BULLETFORMATLIST_TB_BTN","CLS_NUMBERFORMATLIST_TB_BTN","CLS_LIST_PRIMARY_CONTENT","ColorPicker","hasClass","ToolbarRenderer","parent","wireEvent","prototype","on","destroy","unWireEvent","off","popupOverlay","remove","onPopupOverlay","removePopupContainer","toolbarBeforeCreate","e","mode","enableCollision","toolbarCreated","notify","toolbarClicked","args","enabled","readonly","item","toolbarClick","trigger","dropDownSelected","dropDownSelect","beforeDropDownItemRender","dropDownOpen","element","parentElement","getAttribute","indexOf","querySelector","listEle","querySelectorAll","inputElement","length","isDevice","classList","contains","CLS_QUICK_DROPDOWN","popupModal","selectionSave","dropDownClose","selectionRestore","popupContainer","popupEle","parentNode","insertBefore","nextSibling","style","removeProperty","undefined","renderToolbar","setPanel","target","renderPanel","overflowMode","rteToolbarObj","toolbarObj","items","width","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","isStringTemplate","createElement","appendTo","renderDropDownButton","_this","css","add","cssClass","inlineMode","enable","proxy","dropDown","iconCss","content","select","beforeOpen","cancel","index","childNodes","divNode","innerHTML","trim","textContent","beforeDropDownOpen","close","open","beforeItemRender","tabIndex","popupElement","document","getElementById","id","setAttribute","getID","renderListDropDown","itemName","className","inlineEle","appendChild","event","currentElement","currentDropdown","type","childElementCount","removeAttribute","display","setIsModel","zIndex","position","parseInt","toString","nextElementSibling","paletteSelection","dropDownArgs","ele","colorbox","slice","call","borderBottomColor","filter","backgroundColor","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","default","fontColor","colorpickerValue","formatter","editorManager","nodeSelection","getRange","contentModule","getDocument","startContainer","nodeName","iframeSettings","ownerDocument","collapsed","subCommand","tableColorPickerChanged","command","value","colorPickerChanged","inst","showButtons","dataBind","onclick","toggle","setColorPickerContentWidth","focusEle","focus","pickerRefresh","beforeClose","dropElement","lastElementChild","onmousedown","onkeydown","popupElem","offsetWidth","refreshPosition","popupInst","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","children","renderColorPicker","inline","setProperties","modeSwitcher","beforeTileRender","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","columns","presetColors","colorCode","getPanel","toolbarPanel","panel"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/toolbar-renderer.js"],"sourcesContent":["import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n        this.removePopupContainer();\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n                removeClass([listEle[0]], 'e-disabled');\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.removePopupContainer();\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.removePopupContainer = function () {\n        if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n            var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n            if (popupEle) {\n                this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n                popupEle.style.removeProperty('position');\n                removeClass([popupEle], 'e-popup-modal');\n            }\n            detach(this.popupContainer);\n            this.popupContainer = undefined;\n        }\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // eslint-disable-next-line\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        return dropDown;\n    };\n    // eslint-disable-next-line\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            this.popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(this.popupContainer, element);\n            this.popupContainer.appendChild(element);\n            this.popupContainer.style.zIndex = element.style.zIndex;\n            this.popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            // eslint-disable-next-line\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            this.popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor') {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n                if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n                    var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n                    if (popupEle) {\n                        dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n                        popupEle.style.removeProperty('position');\n                        removeClass([popupEle], 'e-popup-modal');\n                    }\n                    detach(dropElement);\n                    proxy.popupContainer = undefined;\n                }\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            value: '#fff',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}