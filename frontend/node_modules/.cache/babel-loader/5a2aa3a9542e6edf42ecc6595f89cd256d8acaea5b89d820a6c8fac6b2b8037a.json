{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\nvar Location = /** @class */function (_super) {\n  __extends(Location, _super);\n  function Location() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Property(0)], Location.prototype, \"x\", void 0);\n  __decorate([Property(0)], Location.prototype, \"y\", void 0);\n  return Location;\n}(ChildProperty);\nexport { Location };\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */function (_super) {\n  __extends(LegendSettings, _super);\n  function LegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Property(true)], LegendSettings.prototype, \"visible\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"height\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"width\", void 0);\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], LegendSettings.prototype, \"location\", void 0);\n  __decorate([Property('Auto')], LegendSettings.prototype, \"position\", void 0);\n  __decorate([Property('Series')], LegendSettings.prototype, \"mode\", void 0);\n  __decorate([Property(8)], LegendSettings.prototype, \"padding\", void 0);\n  __decorate([Property('Center')], LegendSettings.prototype, \"alignment\", void 0);\n  __decorate([Complex(Theme.legendLabelFont, Font)], LegendSettings.prototype, \"textStyle\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeHeight\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeWidth\", void 0);\n  __decorate([Complex({}, Border)], LegendSettings.prototype, \"border\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, Margin)], LegendSettings.prototype, \"margin\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], LegendSettings.prototype, \"containerPadding\", void 0);\n  __decorate([Property(5)], LegendSettings.prototype, \"shapePadding\", void 0);\n  __decorate([Property('transparent')], LegendSettings.prototype, \"background\", void 0);\n  __decorate([Property(1)], LegendSettings.prototype, \"opacity\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"toggleVisibility\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"description\", void 0);\n  __decorate([Property(3)], LegendSettings.prototype, \"tabIndex\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"title\", void 0);\n  __decorate([Complex(Theme.legendTitleFont, Font)], LegendSettings.prototype, \"titleStyle\", void 0);\n  __decorate([Property('Top')], LegendSettings.prototype, \"titlePosition\", void 0);\n  __decorate([Property(100)], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"enablePages\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"isInversed\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"reverse\", void 0);\n  return LegendSettings;\n}(ChildProperty);\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */function () {\n  /**\n   * Constructor for the dateTime module.\n   *\n   * @private\n   */\n  function BaseLegend(chart) {\n    this.pageXCollections = []; // pages of x locations\n    this.legendTitleCollections = [];\n    this.legendRegions = [];\n    this.pagingRegions = [];\n    this.chart = chart;\n    this.legend = chart.legendSettings;\n    this.legendID = chart.element.id + '_chart_legend';\n    this.isChartControl = chart.getModuleName() === 'chart';\n    this.isBulletChartControl = chart.getModuleName() === 'bulletChart';\n    this.isStockChartControl = chart.getModuleName() === 'stockChart';\n    this.bulletChart = this.chart;\n    this.fivePixel = 5;\n    this.rowCount = 0;\n    this.pageButtonSize = 8;\n    this.maxColumns = 0;\n    this.maxWidth = 0;\n    this.currentPage = 1;\n    this.backwardArrowOpacity = 0;\n    this.forwardArrowOpacity = 1;\n    this.arrowWidth = 2 * (this.fivePixel + this.pageButtonSize + this.fivePixel);\n    this.arrowHeight = this.arrowWidth;\n    this.isTop = false;\n    this.isTitle = false;\n    this.currentPageNumber = 1;\n  }\n  /**\n   * Calculate the bounds for the legends.\n   *\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n    var legend = this.legend;\n    var defaultValue = this.isBulletChartControl ? '40%' : '20%';\n    this.getPosition(legend.position, availableSize);\n    this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n    this.isVertical = this.position === 'Left' || this.position === 'Right';\n    if (this.isVertical) {\n      this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n      this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n    } else {\n      this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n      this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n    }\n    this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n    if (!this.isBulletChartControl) {\n      this.legendBounds.width += this.legend.containerPadding.left + this.legend.containerPadding.right;\n      this.legendBounds.height += this.legend.containerPadding.top + this.legend.containerPadding.bottom;\n    }\n    this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n  };\n  /**\n   * To find legend position based on available size for chart and accumulation chart\n   *\n   * @param position\n   * @param availableSize\n   * @param position\n   * @param availableSize\n   * @returns {void}\n   */\n  BaseLegend.prototype.getPosition = function (position, availableSize) {\n    var chart = this.chart;\n    var accumulation = this.chart;\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n      this.position = position !== 'Auto' ? position : 'Bottom';\n    } else {\n      if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n        position = 'Top';\n      }\n      this.position = position !== 'Auto' ? position : availableSize.width > availableSize.height ? 'Right' : 'Bottom';\n    }\n  };\n  /**\n   * To set bounds for chart and accumulation chart\n   *\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @returns {void}\n   */\n  BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n    var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n    if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n      titleHeight += this.pageButtonSize + this.fivePixel;\n    }\n    computedWidth = Math.min(computedWidth, legendBounds.width);\n    computedHeight = Math.min(computedHeight, legendBounds.height);\n    if (legend.mode === 'Gradient') {\n      legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n      legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n    } else {\n      legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n      legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n    }\n    if (!this.isBulletChartControl) {\n      if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n        this.calculateLegendTitle(legend, legendBounds);\n        legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ? this.legendTitleSize.height - this.legendTitleSize.height / this.legendTitleCollections.length : 0;\n      }\n    }\n    this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) / (this.maxItemHeight + legend.padding)));\n  };\n  /**\n   * To find legend location based on position, alignment for chart and accumulation chart\n   *\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   */\n  BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n    var padding = this.legend.border.width;\n    var isBulletChart = this.isBulletChartControl;\n    var bulletChart = this.bulletChart;\n    var labelIns = bulletChart.labelPosition === 'Inside';\n    var ticklIns = bulletChart.tickPosition === 'Inside';\n    var isVertical = bulletChart.orientation === 'Vertical';\n    var categoryFieldValue = isBulletChart && bulletChart.categoryField !== '' ? maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n    var marginBottom = this.chart.margin.bottom;\n    var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n    var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n    if (position === 'Bottom') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n      legendBounds.y += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 : isVertical && bulletChart.categoryField !== '' ? maxLabelSize.height + padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n    } else if (position === 'Top') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + padding + this.legend.margin.top;\n      legendBounds.y -= isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n      legendHeight -= isBulletChart ? -padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n    } else if (position === 'Right') {\n      legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height : 0;\n      subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n    } else if (position === 'Left') {\n      legendBounds.x = legendBounds.x + this.legend.margin.left;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height : bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '' ? categoryFieldValue : 0;\n      subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n    } else {\n      legendBounds.x = this.legend.location.x;\n      legendBounds.y = this.legend.location.y;\n      subtractThickness(rect, new Thickness(0, 0, 0, 0));\n    }\n  };\n  /**\n   * To find legend alignment for chart and accumulation chart\n   *\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   */\n  BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n    switch (alignment) {\n      case 'Far':\n        start = size - legendSize - start;\n        break;\n      case 'Center':\n        start = (size - legendSize) / 2;\n        break;\n    }\n    return start;\n  };\n  /**\n   * Renders the legend.\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n    var titleHeight = 0;\n    var titlePlusArrowWidth = 0;\n    var pagingLegendBounds = new Rect(0, 0, 0, 0);\n    var requireLegendBounds = new Rect(0, 0, 0, 0);\n    var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n    var padding = legend.padding;\n    var isPaging = legend.enablePages;\n    var titlePosition = legend.titlePosition;\n    var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n    var legendGroup = chart.renderer.createGroup({\n      id: this.legendID + '_g'\n    });\n    var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n    this.legendRegions = [];\n    var maxHeight = 0;\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      if (this.legendCollections[i].text !== '') {\n        maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n        break;\n      } else {\n        continue;\n      }\n    }\n    this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n    // For new legend navigation\n    if (!isPaging && this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n      titlePlusArrowWidth += this.pageButtonSize + 2 * this.fivePixel;\n    } else if (this.isTitle && !this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = titlePosition === (!this.isRtlEnable ? 'Left' : 'Right') ? this.fivePixel + this.legendTitleSize.width : 0;\n    }\n    titleHeight = !this.isTitle ? 0 : this.isTop || this.isVertical ? this.legendTitleSize.height : 0;\n    if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n      this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n      this.totalPages = 1;\n    } else if (firstLegend !== this.legendCollections.length) {\n      var legendSeriesGroup = void 0; // legendItem group for each series group element\n      var count = 0;\n      var previousLegend = this.legendCollections[firstLegend];\n      // starting shape center x,y position && to resolve lint error used new line for declaration\n      var startPadding = this.isBulletChartControl ? 0 : titlePlusArrowWidth + padding + legend.shapeWidth / 2 + legend.containerPadding.left;\n      var x_Location = this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 : !this.isRtlEnable ? legendBounds.x + startPadding : legendBounds.x + (this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width) - startPadding;\n      var start = new ChartLocation(x_Location, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 : legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 + legend.containerPadding.top);\n      var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n      var textOptions = new TextOption('', start.x, start.y, anchor);\n      var textPadding = legend.shapePadding + padding + legend.shapeWidth;\n      //  initialization for totalPages legend click totalpage again calculate\n      this.totalPages = this.totalPages = this.isChartControl || this.isBulletChartControl || this.isStockChartControl ? this.totalPages : 0;\n      this.pageXCollections = [];\n      this.legendCollections[firstLegend].location = start;\n      var legendIndex = void 0;\n      if (!legend.enablePages && this.isPaging) {\n        var x = start.x - this.fivePixel;\n        var y = start.y - this.fivePixel;\n        var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ? this.legendTitleSize.width + this.fivePixel : 0;\n        var bottomSapce = this.isVertical ? this.pageButtonSize + Math.abs(y - legendBounds.y) : 0;\n        var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0;\n        rightSpace += this.isVertical ? 0 : this.fivePixel + this.pageButtonSize + this.fivePixel;\n        pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n        requireLegendBounds = pagingLegendBounds;\n      } else {\n        requireLegendBounds = legendBounds;\n      }\n      for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n        var legendOption = _a[_i];\n        legendIndex = !this.isReverse ? count : this.legendCollections.length - 1 - count;\n        if (this.chart.getModuleName() === 'accumulationchart') {\n          // eslint-disable-next-line max-len\n          legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n        }\n        if (this.chart.getModuleName() === 'stockChart') {\n          legendOption.type = this.chart.visibleSeries[count].type;\n        }\n        this.accessbilityText = this.isBulletChartControl ? 'Legend of bullet chart' + '' + legendOption.text : 'Click to show or hide the ' + legendOption.text + ' series';\n        if (legendOption.render && legendOption.text !== '') {\n          legendSeriesGroup = chart.renderer.createGroup({\n            id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n          });\n          if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n            legendSeriesGroup.setAttribute('aria-label', legend.description || this.accessbilityText);\n          }\n          this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n          this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n          this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n          if (legendSeriesGroup) {\n            legendSeriesGroup.style.cssText = 'outline: none; cursor: ' + (!legend.toggleVisibility && (chart.selectionMode === 'None' || chart.highlightMode === 'None' || chart.selectionMode === 'None') || this.isBulletChartControl ? 'auto' : 'pointer');\n          }\n          if (legendTranslateGroup) {\n            legendTranslateGroup.appendChild(legendSeriesGroup);\n          }\n          previousLegend = legendOption;\n        }\n        count++;\n      }\n      if (this.isPaging) {\n        this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n      } else {\n        this.totalPages = 1;\n      }\n    }\n    appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n  };\n  /** @private */\n  BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var previousLegend = this.legendCollections[0];\n    var nextLegend = this.legendCollections[1];\n    var defElement = this.chart.renderer.createDefs();\n    var gradientLegendCount = 0;\n    var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n    var opacity = 1;\n    var fillColors = [];\n    var numberItems = [];\n    if (legend.title) {\n      if (!this.isVertical) {\n        if (legend.titlePosition === 'Left') {\n          legendBounds.x += this.legendTitleSize.width;\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Right') {\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Top') {\n          legendBounds.y += this.legendTitleSize.height;\n          legendBounds.height -= this.legendTitleSize.height;\n        }\n      } else {\n        legendBounds.y += this.legendTitleSize.height;\n        legendBounds.height -= this.legendTitleSize.height;\n      }\n    }\n    for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n      var colorMap = _a[_i];\n      if (numberItems.indexOf(colorMap.start) < 0) {\n        numberItems.push(colorMap.start);\n      }\n      if (colorMap.colors.length > 2) {\n        var diffValue = colorMap.end - colorMap.start;\n        var colorsLength = colorMap.colors.length - 1;\n        if (diffValue > 0) {\n          diffValue = diffValue / colorsLength;\n          for (var index = 1; index < colorsLength; index++) {\n            var calculatedValue = colorMap.start + diffValue * index;\n            numberItems.push(calculatedValue);\n          }\n        } else {\n          for (var index = 1; index < colorsLength; index++) {\n            numberItems.push(colorMap.start);\n          }\n        }\n      }\n      if (numberItems.indexOf(colorMap.end) < 0) {\n        numberItems.push(colorMap.end);\n      }\n      for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n        var fillColor = _c[_b];\n        if (fillColors.indexOf(fillColor) < 0) {\n          fillColors.push(fillColor);\n        }\n      }\n      if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n        fillColors.push(colorMap.colors[0]);\n      }\n    }\n    var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n    var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n    var y2 = this.isVertical ? '100%' : '0%';\n    linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n    linerGradientEle.setAttribute('x1', x1);\n    linerGradientEle.setAttribute('y1', '0%');\n    linerGradientEle.setAttribute('x2', x2);\n    linerGradientEle.setAttribute('y2', y2);\n    var full = numberItems[numberItems.length - 1] - numberItems[0];\n    for (var b = 0; b < fillColors.length; b++) {\n      var offsetValue = numberItems[b] - numberItems[0];\n      offsetValue = offsetValue / full;\n      var stopEle = document.createElementNS(xmlns, 'stop');\n      stopEle.setAttribute('offset', offsetValue.toString());\n      stopEle.setAttribute('stop-color', fillColors[b]);\n      stopEle.setAttribute('stop-opacity', opacity.toString());\n      linerGradientEle.appendChild(stopEle);\n    }\n    var startLabel = previousLegend.text.toString();\n    var endLabel = nextLegend.text.toString();\n    var startTextSize = measureText(startLabel, legend.textStyle);\n    var endTextSize = measureText(endLabel, legend.textStyle);\n    var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n    var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n    var otherSpaces = 2 * textWidth + 4 * legend.padding;\n    var linearBarWidth = legendBounds.width;\n    var linearBarHeight = legendBounds.height;\n    var xValue = legendBounds.x + textWidth + 2 * legend.padding;\n    var yValue = legendBounds.y + legend.padding;\n    var startLabelY;\n    var endLabelY;\n    var startLabelX;\n    var endLabelX;\n    if (this.isVertical) {\n      otherSpaces = 2 * textHeight + 4 * legend.padding;\n      linearBarWidth = legendBounds.width - 2 * legend.padding;\n      linearBarHeight = legendBounds.height - otherSpaces;\n      xValue = legendBounds.x + legend.padding;\n      yValue = legendBounds.y + textHeight + 2 * legend.padding;\n      startLabelY = legendBounds.y + legend.padding + textHeight;\n      endLabelY = yValue + linearBarHeight + textHeight;\n      startLabelX = legendBounds.x + legendBounds.width * 0.5 - textWidth * 0.5;\n      endLabelX = startLabelX;\n      if (linearBarWidth > 30) {\n        var diffWidth = linearBarWidth - 30;\n        linearBarWidth = 30;\n        xValue = xValue + diffWidth / 2;\n      }\n    } else {\n      linearBarWidth = legendBounds.width - otherSpaces;\n      linearBarHeight = legendBounds.height - 2 * legend.padding;\n      startLabelX = legendBounds.x + (!this.isRtlEnable ? legend.padding + (textWidth - startTextSize.width) : linearBarWidth + 3 * legend.padding + textWidth);\n      endLabelX = legendBounds.x + (!this.isRtlEnable ? linearBarWidth + 3 * legend.padding + textWidth : legend.padding + (textWidth - endTextSize.width));\n      startLabelY = legendBounds.y + legendBounds.height * 0.5 + textHeight * 0.25;\n      endLabelY = startLabelY;\n      if (linearBarHeight > 30) {\n        var diffHeight = linearBarHeight - 30;\n        linearBarHeight = 30;\n        yValue = yValue + diffHeight / 2;\n      }\n    }\n    var anchor = chart.enableRtl ? 'end' : '';\n    var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n    var hiddenColor = '#D3D3D3';\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n    var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false,\n    // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false,\n    // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    var gradientLegend = chart.renderer.drawRectangle({\n      width: linearBarWidth,\n      height: linearBarHeight,\n      x: xValue,\n      y: yValue,\n      fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n    });\n    defElement.appendChild(linerGradientEle);\n    legendTranslateGroup.appendChild(defElement);\n    legendTranslateGroup.appendChild(gradientLegend);\n  };\n  /**\n   * To find first valid legend text index for chart and accumulation chart\n   *\n   * @param legendCollection\n   * @returns {number}\n   * @private\n   */\n  BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n    var count = 0;\n    for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n      var legend = legendCollection_1[_i];\n      if (legend.render && legend.text !== '') {\n        break;\n      }\n      count++;\n    }\n    return count;\n  };\n  /**\n   * To get the legend title text width and height.\n   *\n   * @param legend\n   * @param legendBounds\n   */\n  BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n    if (legend.title) {\n      this.isTop = legend.titlePosition === 'Top';\n      var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n      if (this.isTop || this.isVertical) {\n        this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, legendBounds.width - padding);\n      } else {\n        this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n      }\n      var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n      this.legendTitleSize = measureText(text, legend.titleStyle);\n      this.legendTitleSize.height *= this.legendTitleCollections.length;\n    } else {\n      this.legendTitleSize = new Size(0, 0);\n    }\n  };\n  /**\n   * Render the legend title\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param legendGroup\n   */\n  BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n    var padding = legend.padding;\n    var alignment = legend.titleStyle.textAlignment;\n    this.isTop = legend.titlePosition === 'Top';\n    var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n    var x = titlePositionX(legendBounds, legend.titleStyle);\n    anchor = this.isTop || this.isVertical ? anchor : chart.enableRtl ? 'end' : '';\n    x = alignment === 'Near' ? x + padding : alignment === 'Far' ? x - padding : x;\n    x = this.isTop || this.isVertical ? x : legendBounds.x + (legend.titlePosition === 'Left' ? 5 : legendBounds.width - this.legendTitleSize.width - 5);\n    var topPadding = legendBounds.height / 2 + this.legendTitleSize.height / 4;\n    var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding : this.legendTitleSize.height / this.legendTitleCollections.length);\n    var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n    textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n  };\n  /**\n   * To create legend rendering elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendBounds\n   * @param legendGroup\n   * @param legend\n   * @param id\n   * @param redraw\n   */\n  BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n    var padding = legend.padding;\n    var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n    var legendItemsGroup = chart.renderer.createGroup({\n      id: id + '_collections'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var clippath = chart.renderer.createClipPath({\n      id: id + '_clipPath'\n    });\n    options.width = this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width;\n    if (legendGroup) {\n      legendGroup.appendChild(chart.renderer.drawRectangle(options));\n    } else {\n      chart.renderer.drawRectangle(options);\n    }\n    if (legend.title) {\n      this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n    }\n    if (!isCanvas) {\n      legendGroup.appendChild(legendItemsGroup);\n    }\n    this.legendTranslateGroup = chart.renderer.createGroup({\n      id: id + '_translate_g'\n    });\n    if (!isCanvas) {\n      legendItemsGroup.appendChild(this.legendTranslateGroup);\n    }\n    options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n    options.id += '_clipPath_rect';\n    options.width = !this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && this.isVertical ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right : legendBounds.width;\n    if (!isCanvas) {\n      this.clipRect = chart.renderer.drawRectangle(options);\n      clippath.appendChild(this.clipRect);\n    } else {\n      this.pagingClipRect = options;\n    }\n    appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n    if (!isCanvas) {\n      legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n    }\n    return this.legendTranslateGroup;\n  };\n  /**\n   * To render legend symbols for chart and accumulation chart\n   *\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   */\n  BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n    var control = this.isBulletChartControl ? this.chart : null;\n    var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n    var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && legendOption.shape === 'SeriesType' && legendOption.type.toLowerCase().indexOf('line') > -1 && legendOption.type.toLowerCase().indexOf('area') === -1;\n    var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var borderColor;\n    var shape = legendOption.shape === 'SeriesType' ? legendOption.type : legendOption.shape;\n    var strokewidth = isStrokeWidth ? this.legend.mode === 'Series' ? this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width : this.isBulletChartControl && legendOption.shape === 'Multiply' ? 4 : 1;\n    var regionPadding;\n    shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n    if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n      var seriesBorder = this.chart.visibleSeries[legendIndex].border;\n      borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n      strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n    }\n    var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, isCustomBorder ? borderColor : symbolColor, 1, '', '');\n    var textSize = measureText(legendOption.text, this.legend.textStyle);\n    var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding : legendOption.location.x;\n    var y = legendOption.location.y;\n    if (!isCanvas) {\n      group.appendChild(drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n    } else {\n      regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n      drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n      this.legendRegions.push({\n        rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding),\n        index: legendIndex\n      });\n    }\n    if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' || legendOption.type === 'Doughnut' && shape === 'Doughnut') {\n      symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n      shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n      symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n      if (!isCanvas) {\n        // eslint-disable-next-line max-len\n        group.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n      } else {\n        drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n      }\n    }\n  };\n  /**\n   * To render legend text for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   */\n  BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n    var legend = chart.legendSettings;\n    var hiddenColor = '#D3D3D3';\n    var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n    textOptions.text = legendOption.text;\n    if (legend.isInversed && !this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - legend.shapeWidth / 2;\n    } else if (this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - (measureText(legendOption.text, legend.textStyle).width + legend.shapeWidth / 2 + legend.shapePadding);\n    } else {\n      textOptions.x = legendOption.location.x + legend.shapeWidth / 2 + legend.shapePadding;\n    }\n    textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n    var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    if (element) {\n      element.setAttribute('aria-label', legend.description || this.accessbilityText);\n    }\n    if (isCanvas) {\n      var textSize = measureText(textOptions.text, legend.textStyle);\n      this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n      this.legendRegions[i].rect.width += textSize.width;\n      this.legendRegions[i].rect.height = textSize.height;\n      this.legendRegions[i].rect.y -= textSize.height * 0.5;\n      this.legendRegions[i].rect.x -= this.isRtlEnable ? this.legendRegions[i].rect.width : 0;\n    }\n  };\n  /**\n   * To render legend paging elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   */\n  // tslint:disable-next-line:max-func-body-length\n  BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n    var paginggroup = chart.renderer.createGroup({\n      id: this.legendID + '_navigation'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n    var grayColor = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : '#545454';\n    var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n    var padding = 8; // const padding for paging elements\n    var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n    var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n    var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n    var iconSize = this.pageButtonSize;\n    // Page left arrow drawing calculation started here\n    var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 : this.rowCount - 1;\n    var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n    this.pagingRegions = [];\n    this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n    this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n    if (!isCanvas) {\n      legendGroup.appendChild(paginggroup);\n    }\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n      this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n    } else {\n      this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n    }\n    if (paginggroup) {\n      paginggroup.style.cursor = 'pointer';\n    }\n    this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n    if (!isCanvas) {\n      this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n    } else {\n      //paging clipRect only for canvas mode\n      this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n      this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n      this.pagingClipRect.x += legend.border.width;\n      this.pagingClipRect.width -= legend.border.width + legend.border.width / 2;\n      this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n    }\n    var pageTextElement;\n    var x = bounds.x + iconSize / 2;\n    var y = bounds.y + this.clipPathHeight + (titleHeight + bounds.height - this.clipPathHeight) / 2;\n    if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n      x = bounds.x + this.fivePixel + this.pageButtonSize + titleWidth;\n      y = legend.title && this.isTop ? bounds.y + padding + titleHeight + iconSize / 1 + 0.5 : bounds.y + padding + iconSize + 0.5;\n    }\n    var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n    var translateX = this.isRtlEnable ? legend.border.width + iconSize / 2 : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + iconSize / 2 + padding + titleHeight;\n        symbolOption.opacity = this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n      } else {\n        symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity : legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n    // Page numbering rendering calculation started here\n    textOption.x = x + iconSize / 2 + padding;\n    textOption.y = y + size.height / 4;\n    textOption.id = this.legendID + '_pagenumber';\n    textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n    var color = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : legend.textStyle.color;\n    if (isCanvas && this.totalNoOfPages) {\n      textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0));\n    }\n    // Page right arrow rendering calculation started here\n    x = textOption.x + padding + iconSize / 2 + size.width;\n    if (this.isPaging && !legend.enablePages && !this.isVertical) {\n      x = bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0);\n    }\n    symbolOption.id = pageDown;\n    symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + bounds.height - iconSize / 2 - padding;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n      } else {\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n    if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      //placing the navigation buttons and page numbering in legend right corner\n      paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n    } else {\n      if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n        this.totalNoOfPages = this.totalPages;\n        this.calTotalPage = false;\n      }\n      if (!legend.enablePages && !this.isBulletChartControl) {\n        // For new legend page navigation\n        this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n      }\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n    }\n  };\n  /**\n   * To translate legend pages for chart and accumulation chart\n   *\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   */\n  BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n    var size = this.clipPathHeight * page;\n    var translate = 'translate(0,-' + size + ')';\n    if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n      var pageX = this.pageXCollections[page * this.maxColumns];\n      size = !this.isRtlEnable ? pageX - this.legendBounds.x : this.legendBounds.x + this.maxWidth - pageX;\n      size = size < 0 ? 0 : size; // to avoid small pixel variation\n      translate = (!this.isRtlEnable ? 'translate(-' : 'translate(') + size + ',0)';\n    }\n    if (!this.chart.enableCanvas) {\n      this.legendTranslateGroup.setAttribute('transform', translate);\n    }\n    if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      pagingText.textContent = !this.isRtlEnable ? pageNumber + '/' + this.totalPages : this.totalPages + '/' + pageNumber;\n    }\n    this.currentPage = pageNumber;\n    return size;\n  };\n  /**\n   * To change legend pages for chart and accumulation chart\n   *\n   * @param event\n   * @param pageUp\n   * @param event\n   * @param pageUp\n   */\n  BaseLegend.prototype.changePage = function (event, pageUp) {\n    var legend = this.chart.legendSettings;\n    var backwardArrow = document.getElementById(this.legendID + '_pageup');\n    var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n    var pageText = legend.enablePages || this.isBulletChartControl ? document.getElementById(this.legendID + '_pagenumber') : null;\n    var page = legend.enablePages || this.isBulletChartControl ? parseInt(pageText.textContent.split('/')[!this.isRtlEnable ? 0 : 1], 10) : this.currentPage;\n    if (pageUp && page > 1) {\n      this.translatePage(pageText, page - 2, page - 1, legend);\n    } else if (!pageUp && page < this.totalPages) {\n      this.translatePage(pageText, page, page + 1, legend);\n    }\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n    }\n  };\n  /**\n   * To hide the backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.hideArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '0');\n  };\n  /**\n   * To show the  backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.showArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '1');\n  };\n  /**\n   * To find legend elements id based on chart or accumulation chart\n   *\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @private\n   */\n  BaseLegend.prototype.generateId = function (option, prefix, count) {\n    if (this.isChartControl || this.isStockChartControl) {\n      return prefix + count;\n    } else {\n      return prefix + option.pointIndex;\n    }\n  };\n  /**\n   * To show or hide trimmed text tooltip for legend.\n   *\n   * @param event\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.move = function (event) {\n    var _this = this;\n    var x = this.chart.mouseX;\n    var y = this.chart.mouseY;\n    if (event.target.textContent.indexOf('...') > -1) {\n      var targetId = event.target.id.split(this.legendID + '_text_');\n      if (targetId.length === 2) {\n        var index = parseInt(targetId[1], 10);\n        var element = this.chart.element;\n        if (!isNaN(index)) {\n          if (this.chart.isTouch) {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n          }\n          if (this.isChartControl) {\n            showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          } else {\n            showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          }\n        }\n      }\n    } else {\n      removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n    }\n    if (this.chart.isTouch) {\n      clearTimeout(this.clearTooltip);\n      this.clearTooltip = +setTimeout(function () {\n        removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip');\n      }, 1000);\n    }\n  };\n  return BaseLegend;\n}();\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */function () {\n  function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n    this.location = {\n      x: 0,\n      y: 0\n    };\n    this.text = text;\n    this.fill = fill;\n    this.shape = shape;\n    this.url = url;\n    this.visible = visible;\n    this.type = type;\n    this.markerVisibility = markerVisibility;\n    this.markerShape = markerShape;\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n  }\n  return LegendOptions;\n}();\nexport { LegendOptions };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Property","Complex","ChildProperty","measureText","Rect","TextOption","Size","PathOption","Font","Border","Margin","ContainerPadding","Theme","subtractThickness","Thickness","drawSymbol","ChartLocation","titlePositionX","getTitle","textTrim","getTextAnchor","RectOption","textElement","stringToNumber","removeElement","showTooltip","getElement","appendChildElement","Location","_super","apply","LegendSettings","x","y","legendLabelFont","left","right","top","bottom","legendTitleFont","BaseLegend","chart","pageXCollections","legendTitleCollections","legendRegions","pagingRegions","legend","legendSettings","legendID","element","id","isChartControl","getModuleName","isBulletChartControl","isStockChartControl","bulletChart","fivePixel","rowCount","pageButtonSize","maxColumns","maxWidth","currentPage","backwardArrowOpacity","forwardArrowOpacity","arrowWidth","arrowHeight","isTop","isTitle","currentPageNumber","calculateLegendBounds","rect","availableSize","maxLabelSize","defaultValue","getPosition","position","legendBounds","isVertical","height","margin","width","library","getLegendBounds","containerPadding","getLocation","alignment","accumulation","visibleSeries","type","setBounds","computedWidth","computedHeight","titleHeight","title","titlePosition","legendTitleSize","isPaging","enablePages","Math","min","mode","titleStyle","textOverflow","calculateLegendTitle","max","ceil","padding","maxItemHeight","border","isBulletChart","labelIns","labelPosition","ticklIns","tickPosition","orientation","categoryFieldValue","categoryField","marginBottom","legendHeight","legendWidth","alignLegend","opposedPosition","majorTickLines","location","start","size","legendSize","renderLegend","redraw","titlePlusArrowWidth","pagingLegendBounds","requireLegendBounds","firstLegend","findFirstLegendPosition","legendCollections","upArrowHeight","legendGroup","renderer","createGroup","legendTranslateGroup","createLegendElements","maxHeight","text","textSize","shapeHeight","isRtlEnable","getLinearLegend","totalPages","legendSeriesGroup","count","previousLegend","startPadding","shapeWidth","x_Location","anchor","isRtlEnabled","enableRtl","textOptions","textPadding","shapePadding","legendIndex","leftSpace","bottomSapce","abs","rightSpace","_i","_a","legendOption","isReverse","fill","points","pointIndex","color","accessbilityText","render","generateId","setAttribute","tabIndex","toString","description","getRenderPoint","renderSymbol","renderText","style","cssText","toggleVisibility","selectionMode","highlightMode","appendChild","renderPagingElements","enableCanvas","svgObject","xmlns","nextLegend","defElement","createDefs","gradientLegendCount","linerGradientEle","document","createElementNS","opacity","fillColors","numberItems","rangeColorSettings","colorMap","indexOf","push","colors","diffValue","end","colorsLength","index","calculatedValue","_b","_c","fillColor","x1","x2","y2","full","offsetValue","stopEle","startLabel","endLabel","startTextSize","textStyle","endTextSize","textWidth","textHeight","otherSpaces","linearBarWidth","linearBarHeight","xValue","yValue","startLabelY","endLabelY","startLabelX","endLabelX","diffWidth","diffHeight","hiddenColor","fontcolor","visible","themeStyle","legendLabel","isCanvas","translatePage","gradientLegend","drawRectangle","legendCollection","legendCollection_1","maximumTitleWidth","renderLegendTitle","textAlignment","topPadding","legendTitleTextOptions","options","background","legendItemsGroup","clippath","createClipPath","clipRect","pagingClipRect","group","control","symbolColor","isStrokeWidth","shape","toLowerCase","isCustomBorder","borderColor","strokewidth","regionPadding","markerShape","seriesBorder","symbolOption","isInversed","url","markerVisibility","bounds","textOption","paginggroup","grayColor","theme","pageUp","pageDown","iconSize","titleWidth","cursor","clipPathHeight","clearRect","pageTextElement","translateX","totalNoOfPages","calTotalPage","pagingText","page","pageNumber","translate","pageX","textContent","changePage","event","backwardArrow","getElementById","forwardArrow","pageText","parseInt","split","hideArrow","showArrow","arrowElement","option","prefix","move","_this","mouseX","mouseY","targetId","isNaN","isTouch","series","name","offsetWidth","clearTimeout","clearTooltip","setTimeout","LegendOptions","seriesIndex"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-charts/src/common/legend/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\nvar Location = /** @class */ (function (_super) {\n    __extends(Location, _super);\n    function Location() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"x\", void 0);\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"y\", void 0);\n    return Location;\n}(ChildProperty));\nexport { Location };\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Complex({ x: 0, y: 0 }, Location)\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Series')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"padding\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex(Theme.legendLabelFont, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Complex({}, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, Margin)\n    ], LegendSettings.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\n    ], LegendSettings.prototype, \"containerPadding\", void 0);\n    __decorate([\n        Property(5)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property(1)\n    ], LegendSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"description\", void 0);\n    __decorate([\n        Property(3)\n    ], LegendSettings.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex(Theme.legendTitleFont, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Top')\n    ], LegendSettings.prototype, \"titlePosition\", void 0);\n    __decorate([\n        Property(100)\n    ], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"enablePages\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"isInversed\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"reverse\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */ (function () {\n    /**\n     * Constructor for the dateTime module.\n     *\n     * @private\n     */\n    function BaseLegend(chart) {\n        this.pageXCollections = []; // pages of x locations\n        this.legendTitleCollections = [];\n        this.legendRegions = [];\n        this.pagingRegions = [];\n        this.chart = chart;\n        this.legend = chart.legendSettings;\n        this.legendID = chart.element.id + '_chart_legend';\n        this.isChartControl = (chart.getModuleName() === 'chart');\n        this.isBulletChartControl = (chart.getModuleName() === 'bulletChart');\n        this.isStockChartControl = (chart.getModuleName() === 'stockChart');\n        this.bulletChart = this.chart;\n        this.fivePixel = 5;\n        this.rowCount = 0;\n        this.pageButtonSize = 8;\n        this.maxColumns = 0;\n        this.maxWidth = 0;\n        this.currentPage = 1;\n        this.backwardArrowOpacity = 0;\n        this.forwardArrowOpacity = 1;\n        this.arrowWidth = (2 * (this.fivePixel + this.pageButtonSize + this.fivePixel));\n        this.arrowHeight = this.arrowWidth;\n        this.isTop = false;\n        this.isTitle = false;\n        this.currentPageNumber = 1;\n    }\n    /**\n     * Calculate the bounds for the legends.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n        var legend = this.legend;\n        var defaultValue = (this.isBulletChartControl) ? '40%' : '20%';\n        this.getPosition(legend.position, availableSize);\n        this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n        this.isVertical = (this.position === 'Left' || this.position === 'Right');\n        if (this.isVertical) {\n            this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n            this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n        }\n        else {\n            this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n            this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n        }\n        this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n        if (!this.isBulletChartControl) {\n            this.legendBounds.width += (this.legend.containerPadding.left + this.legend.containerPadding.right);\n            this.legendBounds.height += (this.legend.containerPadding.top + this.legend.containerPadding.bottom);\n        }\n        this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n    };\n    /**\n     * To find legend position based on available size for chart and accumulation chart\n     *\n     * @param position\n     * @param availableSize\n     * @param position\n     * @param availableSize\n     * @returns {void}\n     */\n    BaseLegend.prototype.getPosition = function (position, availableSize) {\n        var chart = this.chart;\n        var accumulation = this.chart;\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n            this.position = (position !== 'Auto') ? position : 'Bottom';\n        }\n        else {\n            if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n                position = 'Top';\n            }\n            this.position = (position !== 'Auto') ? position :\n                (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n        }\n    };\n    /**\n     * To set bounds for chart and accumulation chart\n     *\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @returns {void}\n     */\n    BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n        var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n            titleHeight += (this.pageButtonSize + this.fivePixel);\n        }\n        computedWidth = Math.min(computedWidth, legendBounds.width);\n        computedHeight = Math.min(computedHeight, legendBounds.height);\n        if (legend.mode === 'Gradient') {\n            legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n            legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n        }\n        else {\n            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n        }\n        if (!this.isBulletChartControl) {\n            if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n                this.calculateLegendTitle(legend, legendBounds);\n                legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ?\n                    (this.legendTitleSize.height - (this.legendTitleSize.height / this.legendTitleCollections.length)) : 0;\n            }\n        }\n        this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) /\n            (this.maxItemHeight + legend.padding)));\n    };\n    /**\n     * To find legend location based on position, alignment for chart and accumulation chart\n     *\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     */\n    BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n        var padding = this.legend.border.width;\n        var isBulletChart = this.isBulletChartControl;\n        var bulletChart = this.bulletChart;\n        var labelIns = bulletChart.labelPosition === 'Inside';\n        var ticklIns = bulletChart.tickPosition === 'Inside';\n        var isVertical = bulletChart.orientation === 'Vertical';\n        var categoryFieldValue = (isBulletChart && bulletChart.categoryField !== '') ?\n            maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n        var marginBottom = this.chart.margin.bottom;\n        var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n        var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n        if (position === 'Bottom') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n            legendBounds.y += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns\n                && !isVertical) ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 :\n                (isVertical && bulletChart.categoryField !== '') ? maxLabelSize.height + padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n        }\n        else if (position === 'Top') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + padding + this.legend.margin.top;\n            legendBounds.y -= (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                !isVertical) ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n            legendHeight -= (isBulletChart) ? -padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n        }\n        else if (position === 'Right') {\n            legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height) : 0;\n            subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n        }\n        else if (position === 'Left') {\n            legendBounds.x = legendBounds.x + this.legend.margin.left;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height) :\n                (bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '') ? categoryFieldValue : 0;\n            subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n        }\n        else {\n            legendBounds.x = this.legend.location.x;\n            legendBounds.y = this.legend.location.y;\n            subtractThickness(rect, new Thickness(0, 0, 0, 0));\n        }\n    };\n    /**\n     * To find legend alignment for chart and accumulation chart\n     *\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     */\n    BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n        switch (alignment) {\n            case 'Far':\n                start = (size - legendSize) - start;\n                break;\n            case 'Center':\n                start = ((size - legendSize) / 2);\n                break;\n        }\n        return start;\n    };\n    /**\n     * Renders the legend.\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n        var titleHeight = 0;\n        var titlePlusArrowWidth = 0;\n        var pagingLegendBounds = new Rect(0, 0, 0, 0);\n        var requireLegendBounds = new Rect(0, 0, 0, 0);\n        var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n        var padding = legend.padding;\n        var isPaging = legend.enablePages;\n        var titlePosition = legend.titlePosition;\n        var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n        var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n        var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n        this.legendRegions = [];\n        var maxHeight = 0;\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            if (this.legendCollections[i].text !== '') {\n                maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n                break;\n            }\n            else {\n                continue;\n            }\n        }\n        this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n        // For new legend navigation\n        if (!isPaging && this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n            titlePlusArrowWidth += (this.pageButtonSize + (2 * this.fivePixel));\n        }\n        else if (this.isTitle && !this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = titlePosition === ((!this.isRtlEnable) ? 'Left' : 'Right') ? (this.fivePixel + this.legendTitleSize.width) : 0;\n        }\n        titleHeight = !this.isTitle ? 0 : (this.isTop || this.isVertical ? this.legendTitleSize.height : 0);\n        if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n            this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n            this.totalPages = 1;\n        }\n        else if (firstLegend !== this.legendCollections.length) {\n            var legendSeriesGroup = void 0; // legendItem group for each series group element\n            var count = 0;\n            var previousLegend = this.legendCollections[firstLegend];\n            // starting shape center x,y position && to resolve lint error used new line for declaration\n            var startPadding = this.isBulletChartControl ? 0 : titlePlusArrowWidth + padding + (legend.shapeWidth / 2) + legend.containerPadding.left;\n            var x_Location = this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + (legend.shapeWidth / 2) :\n                (!this.isRtlEnable) ? legendBounds.x + startPadding : legendBounds.x + ((this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width) - startPadding;\n            var start = new ChartLocation(x_Location, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) :\n                legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) + legend.containerPadding.top);\n            var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n            var textOptions = new TextOption('', start.x, start.y, anchor);\n            var textPadding = legend.shapePadding + padding + legend.shapeWidth;\n            //  initialization for totalPages legend click totalpage again calculate\n            this.totalPages = this.totalPages = (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) ? this.totalPages : 0;\n            this.pageXCollections = [];\n            this.legendCollections[firstLegend].location = start;\n            var legendIndex = void 0;\n            if (!legend.enablePages && this.isPaging) {\n                var x = start.x - this.fivePixel;\n                var y = start.y - this.fivePixel;\n                var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                var bottomSapce = this.isVertical ? (this.pageButtonSize) + Math.abs(y - legendBounds.y) : 0;\n                var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                rightSpace += this.isVertical ? 0 : (this.fivePixel + this.pageButtonSize + this.fivePixel);\n                pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n                requireLegendBounds = pagingLegendBounds;\n            }\n            else {\n                requireLegendBounds = legendBounds;\n            }\n            for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n                var legendOption = _a[_i];\n                legendIndex = !this.isReverse ? count : (this.legendCollections.length - 1) - count;\n                if (this.chart.getModuleName() === 'accumulationchart') {\n                    // eslint-disable-next-line max-len\n                    legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n                }\n                if (this.chart.getModuleName() === 'stockChart') {\n                    legendOption.type = this.chart.visibleSeries[count].type;\n                }\n                this.accessbilityText = (this.isBulletChartControl) ? 'Legend of bullet chart' + '' + legendOption.text\n                    : 'Click to show or hide the ' + legendOption.text + ' series';\n                if (legendOption.render && legendOption.text !== '') {\n                    legendSeriesGroup = chart.renderer.createGroup({\n                        id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n                    });\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n                        legendSeriesGroup.setAttribute('aria-label', legend.description ||\n                            this.accessbilityText);\n                    }\n                    this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n                    this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n                    this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.style.cssText = 'outline: none; cursor: ' + ((!legend.toggleVisibility && (chart.selectionMode === 'None' ||\n                            chart.highlightMode === 'None' ||\n                            chart.selectionMode === 'None') || this.isBulletChartControl) ? 'auto' : 'pointer');\n                    }\n                    if (legendTranslateGroup) {\n                        legendTranslateGroup.appendChild(legendSeriesGroup);\n                    }\n                    previousLegend = legendOption;\n                }\n                count++;\n            }\n            if (this.isPaging) {\n                this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n            }\n            else {\n                this.totalPages = 1;\n            }\n        }\n        appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n    };\n    /** @private */\n    BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n        var xmlns = 'http://www.w3.org/2000/svg';\n        var previousLegend = this.legendCollections[0];\n        var nextLegend = this.legendCollections[1];\n        var defElement = this.chart.renderer.createDefs();\n        var gradientLegendCount = 0;\n        var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n        var opacity = 1;\n        var fillColors = [];\n        var numberItems = [];\n        if (legend.title) {\n            if (!this.isVertical) {\n                if (legend.titlePosition === 'Left') {\n                    legendBounds.x += this.legendTitleSize.width;\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Right') {\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Top') {\n                    legendBounds.y += this.legendTitleSize.height;\n                    legendBounds.height -= this.legendTitleSize.height;\n                }\n            }\n            else {\n                legendBounds.y += this.legendTitleSize.height;\n                legendBounds.height -= this.legendTitleSize.height;\n            }\n        }\n        for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n            var colorMap = _a[_i];\n            if (numberItems.indexOf(colorMap.start) < 0) {\n                numberItems.push(colorMap.start);\n            }\n            if (colorMap.colors.length > 2) {\n                var diffValue = (colorMap.end - colorMap.start);\n                var colorsLength = colorMap.colors.length - 1;\n                if (diffValue > 0) {\n                    diffValue = diffValue / colorsLength;\n                    for (var index = 1; index < colorsLength; index++) {\n                        var calculatedValue = colorMap.start + (diffValue * index);\n                        numberItems.push(calculatedValue);\n                    }\n                }\n                else {\n                    for (var index = 1; index < colorsLength; index++) {\n                        numberItems.push(colorMap.start);\n                    }\n                }\n            }\n            if (numberItems.indexOf(colorMap.end) < 0) {\n                numberItems.push(colorMap.end);\n            }\n            for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n                var fillColor = _c[_b];\n                if (fillColors.indexOf(fillColor) < 0) {\n                    fillColors.push(fillColor);\n                }\n            }\n            if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n                fillColors.push(colorMap.colors[0]);\n            }\n        }\n        var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n        var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n        var y2 = this.isVertical ? '100%' : '0%';\n        linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n        linerGradientEle.setAttribute('x1', x1);\n        linerGradientEle.setAttribute('y1', '0%');\n        linerGradientEle.setAttribute('x2', x2);\n        linerGradientEle.setAttribute('y2', y2);\n        var full = numberItems[numberItems.length - 1] - numberItems[0];\n        for (var b = 0; b < fillColors.length; b++) {\n            var offsetValue = numberItems[b] - numberItems[0];\n            offsetValue = offsetValue / full;\n            var stopEle = document.createElementNS(xmlns, 'stop');\n            stopEle.setAttribute('offset', offsetValue.toString());\n            stopEle.setAttribute('stop-color', fillColors[b]);\n            stopEle.setAttribute('stop-opacity', opacity.toString());\n            linerGradientEle.appendChild(stopEle);\n        }\n        var startLabel = previousLegend.text.toString();\n        var endLabel = nextLegend.text.toString();\n        var startTextSize = measureText(startLabel, legend.textStyle);\n        var endTextSize = measureText(endLabel, legend.textStyle);\n        var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n        var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n        var otherSpaces = (2 * textWidth) + (4 * legend.padding);\n        var linearBarWidth = legendBounds.width;\n        var linearBarHeight = legendBounds.height;\n        var xValue = legendBounds.x + textWidth + (2 * legend.padding);\n        var yValue = legendBounds.y + legend.padding;\n        var startLabelY;\n        var endLabelY;\n        var startLabelX;\n        var endLabelX;\n        if (this.isVertical) {\n            otherSpaces = (2 * textHeight) + (4 * legend.padding);\n            linearBarWidth = legendBounds.width - (2 * legend.padding);\n            linearBarHeight = legendBounds.height - otherSpaces;\n            xValue = legendBounds.x + legend.padding;\n            yValue = legendBounds.y + textHeight + (2 * legend.padding);\n            startLabelY = legendBounds.y + legend.padding + textHeight;\n            endLabelY = yValue + linearBarHeight + textHeight;\n            startLabelX = (legendBounds.x + (legendBounds.width * 0.5)) - (textWidth * 0.5);\n            endLabelX = startLabelX;\n            if (linearBarWidth > 30) {\n                var diffWidth = linearBarWidth - 30;\n                linearBarWidth = 30;\n                xValue = xValue + (diffWidth / 2);\n            }\n        }\n        else {\n            linearBarWidth = legendBounds.width - otherSpaces;\n            linearBarHeight = legendBounds.height - (2 * legend.padding);\n            startLabelX = legendBounds.x + ((!this.isRtlEnable) ? legend.padding + (textWidth - startTextSize.width) :\n                linearBarWidth + (3 * legend.padding) + textWidth);\n            endLabelX = legendBounds.x + ((!this.isRtlEnable) ? linearBarWidth + (3 * legend.padding) + textWidth :\n                legend.padding + (textWidth - endTextSize.width));\n            startLabelY = legendBounds.y + (legendBounds.height * 0.5) + (textHeight * 0.25);\n            endLabelY = startLabelY;\n            if (linearBarHeight > 30) {\n                var diffHeight = linearBarHeight - 30;\n                linearBarHeight = 30;\n                yValue = yValue + (diffHeight / 2);\n            }\n        }\n        var anchor = chart.enableRtl ? 'end' : '';\n        var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n        var hiddenColor = '#D3D3D3';\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n        var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        var gradientLegend = chart.renderer.drawRectangle({\n            width: linearBarWidth,\n            height: linearBarHeight,\n            x: xValue,\n            y: yValue,\n            fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n        });\n        defElement.appendChild(linerGradientEle);\n        legendTranslateGroup.appendChild(defElement);\n        legendTranslateGroup.appendChild(gradientLegend);\n    };\n    /**\n     * To find first valid legend text index for chart and accumulation chart\n     *\n     * @param legendCollection\n     * @returns {number}\n     * @private\n     */\n    BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n        var count = 0;\n        for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n            var legend = legendCollection_1[_i];\n            if (legend.render && legend.text !== '') {\n                break;\n            }\n            count++;\n        }\n        return count;\n    };\n    /**\n     * To get the legend title text width and height.\n     *\n     * @param legend\n     * @param legendBounds\n     */\n    BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n        if (legend.title) {\n            this.isTop = legend.titlePosition === 'Top';\n            var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n            if (this.isTop || this.isVertical) {\n                this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, (legendBounds.width - padding));\n            }\n            else {\n                this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n            }\n            var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n            this.legendTitleSize = measureText(text, legend.titleStyle);\n            this.legendTitleSize.height *= this.legendTitleCollections.length;\n        }\n        else {\n            this.legendTitleSize = new Size(0, 0);\n        }\n    };\n    /**\n     * Render the legend title\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n        var padding = legend.padding;\n        var alignment = legend.titleStyle.textAlignment;\n        this.isTop = legend.titlePosition === 'Top';\n        var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n        var x = titlePositionX(legendBounds, legend.titleStyle);\n        anchor = this.isTop || this.isVertical ? anchor : (chart.enableRtl) ? 'end' : '';\n        x = alignment === 'Near' ? (x + padding) : alignment === 'Far' ? (x - padding) : x;\n        x = (this.isTop || this.isVertical) ? x : ((legendBounds.x) + (legend.titlePosition === 'Left' ? 5 :\n            (legendBounds.width - this.legendTitleSize.width - 5)));\n        var topPadding = (legendBounds.height / 2) + (this.legendTitleSize.height / 4);\n        var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding :\n            (this.legendTitleSize.height / this.legendTitleCollections.length));\n        var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n        textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n    };\n    /**\n     * To create legend rendering elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendBounds\n     * @param legendGroup\n     * @param legend\n     * @param id\n     * @param redraw\n     */\n    BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n        var padding = legend.padding;\n        var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n        var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n        options.width = (this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width;\n        if (legendGroup) {\n            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n        }\n        else {\n            chart.renderer.drawRectangle(options);\n        }\n        if (legend.title) {\n            this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n        }\n        if (!isCanvas) {\n            legendGroup.appendChild(legendItemsGroup);\n        }\n        this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n        if (!isCanvas) {\n            legendItemsGroup.appendChild(this.legendTranslateGroup);\n        }\n        options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n        options.id += '_clipPath_rect';\n        options.width = ((!this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl) && this.isVertical) ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right\n            : legendBounds.width;\n        if (!isCanvas) {\n            this.clipRect = chart.renderer.drawRectangle(options);\n            clippath.appendChild(this.clipRect);\n        }\n        else {\n            this.pagingClipRect = options;\n        }\n        appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n        if (!isCanvas) {\n            legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n        }\n        return this.legendTranslateGroup;\n    };\n    /**\n     * To render legend symbols for chart and accumulation chart\n     *\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     */\n    BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n        var control = this.isBulletChartControl ? this.chart : null;\n        var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n        var isStrokeWidth = ((this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.shape === 'SeriesType') &&\n            (legendOption.type.toLowerCase().indexOf('line') > -1) && (legendOption.type.toLowerCase().indexOf('area') === -1));\n        var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') &&\n            (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var borderColor;\n        var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n        var strokewidth = isStrokeWidth ? (this.legend.mode === 'Series' ?\n            this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width) :\n            (this.isBulletChartControl && legendOption.shape === 'Multiply') ? 4 : 1;\n        var regionPadding;\n        shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n        if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n            var seriesBorder = this.chart.visibleSeries[legendIndex].border;\n            borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n            strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n        }\n        var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, (isCustomBorder ? borderColor : symbolColor), 1, '', '');\n        var textSize = measureText(legendOption.text, this.legend.textStyle);\n        var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding\n            : legendOption.location.x;\n        var y = legendOption.location.y;\n        if (!isCanvas) {\n            group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n        }\n        else {\n            regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n            drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n            this.legendRegions.push({\n                rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding), index: legendIndex\n            });\n        }\n        if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n            (legendOption.type === 'Doughnut' && shape === 'Doughnut')) {\n            symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n            shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n            symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n            if (!isCanvas) {\n                // eslint-disable-next-line max-len\n                group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n            }\n            else {\n                drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ?\n                    new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n            }\n        }\n    };\n    /**\n     * To render legend text for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     */\n    BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n        var legend = chart.legendSettings;\n        var hiddenColor = '#D3D3D3';\n        var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n        textOptions.text = legendOption.text;\n        if (legend.isInversed && !this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (legend.shapeWidth / 2);\n        }\n        else if (this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (measureText(legendOption.text, legend.textStyle).width + legend.shapeWidth / 2 + legend.shapePadding);\n        }\n        else {\n            textOptions.x = legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n        }\n        textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n        var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        if (element) {\n            element.setAttribute('aria-label', legend.description || this.accessbilityText);\n        }\n        if (isCanvas) {\n            var textSize = measureText(textOptions.text, legend.textStyle);\n            this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n            this.legendRegions[i].rect.width += textSize.width;\n            this.legendRegions[i].rect.height = textSize.height;\n            this.legendRegions[i].rect.y -= textSize.height * 0.5;\n            this.legendRegions[i].rect.x -= (this.isRtlEnable) ? this.legendRegions[i].rect.width : 0;\n        }\n    };\n    /**\n     * To render legend paging elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     */\n    // tslint:disable-next-line:max-func-body-length\n    BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n        var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n        var grayColor = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : '#545454';\n        var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n        var padding = 8; // const padding for paging elements\n        var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n        var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n        var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n        var iconSize = this.pageButtonSize;\n        // Page left arrow drawing calculation started here\n        var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 :\n            (this.rowCount - 1);\n        var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n        this.pagingRegions = [];\n        this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n        this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n        if (!isCanvas) {\n            legendGroup.appendChild(paginggroup);\n        }\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n            this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n        }\n        else {\n            this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n        }\n        if (paginggroup) {\n            paginggroup.style.cursor = 'pointer';\n        }\n        this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n        if (!isCanvas) {\n            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n        }\n        else {\n            //paging clipRect only for canvas mode\n            this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight -\n                (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n            this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n            this.pagingClipRect.x += legend.border.width;\n            this.pagingClipRect.width -= (legend.border.width + legend.border.width / 2);\n            this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n        }\n        var pageTextElement;\n        var x = (bounds.x + iconSize / 2);\n        var y = bounds.y + this.clipPathHeight + ((titleHeight + bounds.height - this.clipPathHeight) / 2);\n        if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n            x = (bounds.x + this.fivePixel + this.pageButtonSize + titleWidth);\n            y = legend.title && this.isTop ? (bounds.y + padding + titleHeight + (iconSize / 1) + 0.5) :\n                (bounds.y + padding + iconSize + 0.5);\n        }\n        var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n        var translateX = (this.isRtlEnable) ? legend.border.width + (iconSize / 2) : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + (iconSize / 2) + padding + titleHeight;\n                symbolOption.opacity = this.backwardArrowOpacity;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n            }\n            else {\n                symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity :\n                    (legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n        // Page numbering rendering calculation started here\n        textOption.x = x + (iconSize / 2) + padding;\n        textOption.y = y + (size.height / 4);\n        textOption.id = this.legendID + '_pagenumber';\n        textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n        var color = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : legend.textStyle.color;\n        if (isCanvas && this.totalNoOfPages) {\n            textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0));\n        }\n        // Page right arrow rendering calculation started here\n        x = textOption.x + padding + (iconSize / 2) + size.width;\n        if (this.isPaging && !legend.enablePages && !this.isVertical) {\n            x = (bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ?\n                this.legendTitleSize.width + this.fivePixel : 0));\n        }\n        symbolOption.id = pageDown;\n        symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + bounds.height - (iconSize / 2) - padding;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n            }\n            else {\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n        if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            //placing the navigation buttons and page numbering in legend right corner\n            paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n        }\n        else {\n            if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n                this.totalNoOfPages = this.totalPages;\n                this.calTotalPage = false;\n            }\n            if (!legend.enablePages && !this.isBulletChartControl) { // For new legend page navigation\n                this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n            }\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n        }\n    };\n    /**\n     * To translate legend pages for chart and accumulation chart\n     *\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     */\n    BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n        var size = (this.clipPathHeight) * page;\n        var translate = 'translate(0,-' + size + ')';\n        if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n            var pageX = this.pageXCollections[page * this.maxColumns];\n            size = (!this.isRtlEnable) ? pageX - this.legendBounds.x : (this.legendBounds.x + this.maxWidth) - pageX;\n            size = size < 0 ? 0 : size; // to avoid small pixel variation\n            translate = ((!this.isRtlEnable) ? 'translate(-' : 'translate(') + size + ',0)';\n        }\n        if (!this.chart.enableCanvas) {\n            this.legendTranslateGroup.setAttribute('transform', translate);\n        }\n        if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            pagingText.textContent = !this.isRtlEnable ? (pageNumber) + '/' + this.totalPages : this.totalPages + '/' + pageNumber;\n        }\n        this.currentPage = pageNumber;\n        return size;\n    };\n    /**\n     * To change legend pages for chart and accumulation chart\n     *\n     * @param event\n     * @param pageUp\n     * @param event\n     * @param pageUp\n     */\n    BaseLegend.prototype.changePage = function (event, pageUp) {\n        var legend = this.chart.legendSettings;\n        var backwardArrow = document.getElementById(this.legendID + '_pageup');\n        var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n        var pageText = (legend.enablePages || this.isBulletChartControl) ?\n            document.getElementById(this.legendID + '_pagenumber') : null;\n        var page = (legend.enablePages || this.isBulletChartControl) ? parseInt(pageText.textContent.split('/')[!this.isRtlEnable ? 0 : 1], 10) :\n            this.currentPage;\n        if (pageUp && page > 1) {\n            this.translatePage(pageText, (page - 2), (page - 1), legend);\n        }\n        else if (!pageUp && page < this.totalPages) {\n            this.translatePage(pageText, page, (page + 1), legend);\n        }\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n        }\n    };\n    /**\n     * To hide the backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.hideArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '0');\n    };\n    /**\n     * To show the  backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.showArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '1');\n    };\n    /**\n     * To find legend elements id based on chart or accumulation chart\n     *\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @private\n     */\n    BaseLegend.prototype.generateId = function (option, prefix, count) {\n        if (this.isChartControl || this.isStockChartControl) {\n            return prefix + count;\n        }\n        else {\n            return prefix + option.pointIndex;\n        }\n    };\n    /**\n     * To show or hide trimmed text tooltip for legend.\n     *\n     * @param event\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.move = function (event) {\n        var _this = this;\n        var x = this.chart.mouseX;\n        var y = this.chart.mouseY;\n        if (event.target.textContent.indexOf('...') > -1) {\n            var targetId = event.target.id.split(this.legendID + '_text_');\n            if (targetId.length === 2) {\n                var index = parseInt(targetId[1], 10);\n                var element = this.chart.element;\n                if (!isNaN(index)) {\n                    if (this.chart.isTouch) {\n                        removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n                    }\n                    if (this.isChartControl) {\n                        showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                    else {\n                        showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                }\n            }\n        }\n        else {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n        }\n        if (this.chart.isTouch) {\n            clearTimeout(this.clearTooltip);\n            this.clearTooltip = +setTimeout(function () { removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n        }\n    };\n    return BaseLegend;\n}());\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */ (function () {\n    function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n        this.location = { x: 0, y: 0 };\n        this.text = text;\n        this.fill = fill;\n        this.shape = shape;\n        this.url = url;\n        this.visible = visible;\n        this.type = type;\n        this.markerVisibility = markerVisibility;\n        this.markerShape = markerShape;\n        this.pointIndex = pointIndex;\n        this.seriesIndex = seriesIndex;\n    }\n    return LegendOptions;\n}());\nexport { LegendOptions };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}