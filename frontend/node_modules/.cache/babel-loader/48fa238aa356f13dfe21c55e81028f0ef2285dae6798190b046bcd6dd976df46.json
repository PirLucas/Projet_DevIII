{"ast":null,"code":"/**\n * Defines util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport { Browser, detach, SanitizeHtmlHelper, extend } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as model from '../models/items';\nimport { toolsLocale, fontNameLocale, formatsLocale, numberFormatListLocale, bulletFormatListLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button', 'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress', 'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @param {string} val - specifies the string value\n * @param {string} items - specifies the value\n * @returns {number} - returns the number value\n * @hidden\n */\nexport function getIndex(val, items) {\n  var index = -1;\n  items.some(function (item, i) {\n    if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n      index = i;\n      return true;\n    }\n    return false;\n  });\n  return index;\n}\n/**\n * @param {Element} element - specifies the element\n * @param {string} className - specifies the string value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function hasClass(element, className) {\n  var hasClass = false;\n  if (element.classList.contains(className)) {\n    hasClass = true;\n  }\n  return hasClass;\n}\n/**\n * @param {IDropDownItemModel} items - specifies the item model\n * @param {string} value - specifies the string value\n * @param {string} type - specifies the string value\n * @param {string} returnType - specifies the return type\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getDropDownValue(items, value, type, returnType) {\n  var data;\n  var result;\n  for (var k = 0; k < items.length; k++) {\n    if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    } else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    } else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    }\n  }\n  if (!isNOU(data)) {\n    switch (returnType) {\n      case 'text':\n        result = data.text;\n        break;\n      case 'value':\n        result = data.value;\n        break;\n      case 'iconCss':\n        result = data.iconCss;\n        break;\n    }\n  }\n  return result;\n}\n/**\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isIDevice() {\n  var result = false;\n  if (Browser.isDevice && Browser.isIos) {\n    result = true;\n  }\n  return result;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getFormattedFontSize(value) {\n  if (isNOU(value)) {\n    return '';\n  }\n  return value;\n}\n/**\n * @param {MouseEvent} e - specifies the mouse event\n * @param {HTMLElement} parentElement - specifies the parent element\n * @param {boolean} isIFrame - specifies the boolean value\n * @returns {number} - returns the number\n * @hidden\n */\nexport function pageYOffset(e, parentElement, isIFrame) {\n  var y = 0;\n  if (isIFrame) {\n    y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n  } else {\n    y = e.pageY;\n  }\n  return y;\n}\n/**\n * @param {string} item - specifies the string\n * @param {ServiceLocator} serviceLocator - specifies the service locator\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getTooltipText(item, serviceLocator) {\n  var i10n = serviceLocator.getService('rteLocale');\n  var itemLocale = toolsLocale[item];\n  var tooltipText = i10n.getConstant(itemLocale);\n  return tooltipText;\n}\n/**\n * @param {ISetToolbarStatusArgs} e - specifies the e element\n * @param {boolean} isPopToolbar - specifies the boolean value\n * @param {IRichTextEditor} self - specifies the parent element\n * @returns {void}\n * @hidden\n */\nexport function setToolbarStatus(e, isPopToolbar, self) {\n  updateDropDownFontFormatLocale(self);\n  var dropDown = e.dropDownModule;\n  var data = e.args;\n  var keys = Object.keys(e.args);\n  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n    var key = keys_1[_i];\n    for (var j = 0; j < e.tbItems.length; j++) {\n      var item = e.tbItems[j].subCommand;\n      var itemStr = item && item.toLocaleLowerCase();\n      if (item && itemStr === key || item === 'UL' && key === 'unorderedlist' || item === 'OL' && key === 'orderedlist' || itemStr === 'pre' && key === 'insertcode') {\n        if (typeof data[key] === 'boolean') {\n          if (data[key] === true) {\n            addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n          } else {\n            removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n          }\n        } else if ((typeof data[key] === 'string' || data[key] === null) && getIndex(key, e.parent.toolbarSettings.items) > -1) {\n          var value = data[key] ? data[key] : '';\n          var result = '';\n          switch (key) {\n            case 'formats':\n              {\n                if (isNOU(dropDown.formatDropDown) || isPopToolbar || !isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed) {\n                  break;\n                }\n                var formatItems = e.parent.format.types;\n                var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text : e.parent.format.default;\n                result = getDropDownValue(formatItems, value, 'subCommand', 'text');\n                dropDown.formatDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.format.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text\">' + (isNOU(result) ? formatContent : result) + '</span></span>';\n                dropDown.formatDropDown.dataBind();\n                break;\n              }\n            case 'alignments':\n              {\n                if (isNOU(dropDown.alignDropDown) || !isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed) {\n                  break;\n                }\n                var alignItems = model.alignmentItems;\n                result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                dropDown.alignDropDown.dataBind();\n                break;\n              }\n            case 'fontname':\n              {\n                if (isNOU(dropDown.fontNameDropDown) || isPopToolbar || !isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed) {\n                  break;\n                }\n                var fontNameItems = e.parent.fontFamily.items;\n                result = getDropDownValue(fontNameItems, value, 'value', 'text');\n                var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems[0].text : e.parent.fontFamily.default;\n                var name_1 = isNOU(result) ? fontNameContent : result;\n                e.tbElements[j].title = name_1;\n                dropDown.fontNameDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.fontFamily.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text\">' + name_1 + '</span></span>';\n                dropDown.fontNameDropDown.dataBind();\n                break;\n              }\n            case 'fontsize':\n              {\n                if (isNOU(dropDown.fontSizeDropDown) || !isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed) {\n                  break;\n                }\n                var fontSizeItems = e.parent.fontSize.items;\n                var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems[1].text : e.parent.fontSize.default;\n                result = getDropDownValue(fontSizeItems, value === '' ? fontSizeContent.replace(/\\s/g, '') : value, 'value', 'text');\n                dropDown.fontSizeDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.fontSize.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text\">' + getFormattedFontSize(result) + '</span></span>';\n                dropDown.fontSizeDropDown.dataBind();\n                break;\n              }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * @param {string} items - specifies the string value\n * @returns {string[]} - returns the array value\n * @hidden\n */\nexport function getCollection(items) {\n  if (typeof items === 'object') {\n    return items;\n  } else {\n    return [items];\n  }\n}\n/**\n * @param {string[]} items - specifies the array of string value\n * @param {IToolbarItemModel} toolbarItems - specifies the tool bar model\n * @returns {number} - returns the number\n * @hidden\n */\nexport function getTBarItemsIndex(items, toolbarItems) {\n  var itemsIndex = [];\n  for (var i = 0; i < items.length; i++) {\n    for (var j = 0; j < toolbarItems.length; j++) {\n      if (toolbarItems[j].type === 'Separator') {\n        continue;\n      } else {\n        if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'InsertCode' && toolbarItems[j].subCommand === 'Pre') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'FileManager' && toolbarItems[j].subCommand === 'File') {\n          itemsIndex.push(j);\n          break;\n        } else if (typeof items[i] === 'object' && items[i].command === 'Custom') {\n          itemsIndex.push(i);\n          break;\n        } else if (items[i] === toolbarItems[j].subCommand) {\n          itemsIndex.push(j);\n          break;\n        }\n      }\n    }\n  }\n  return itemsIndex;\n}\n/**\n * @param {BaseToolbar} baseToolbar - specifies the base\n * @param {boolean} undoRedoStatus - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n  var i = 0;\n  var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n  var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n  var keys = Object.keys(undoRedoStatus);\n  for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n    var key = keys_2[_i];\n    var target = tbItems[trgItems[i]];\n    if (target) {\n      baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[key]);\n    }\n    i++;\n  }\n}\n/**\n * To dispatch the event manually\n *\n * @param {Element} element - specifies the element.\n * @param {string} type - specifies the string type.\n * @returns {void}\n * @hidden\n\n */\nexport function dispatchEvent(element, type) {\n  var evt = document.createEvent('HTMLEvents');\n  evt.initEvent(type, false, true);\n  element.dispatchEvent(evt);\n}\n/**\n * To parse the HTML\n *\n * @param {string} value - specifies the string value\n * @returns {DocumentFragment} - returns the document\n * @hidden\n */\nexport function parseHtml(value) {\n  var tempNode = createElement('template');\n  tempNode.innerHTML = value;\n  if (tempNode.content instanceof DocumentFragment) {\n    return tempNode.content;\n  } else {\n    return document.createRange().createContextualFragment(value);\n  }\n}\n/**\n * @param {Document} docElement - specifies the document element\n * @param {Element} node - specifies the node\n * @returns {Node[]} - returns the node array\n * @hidden\n */\nexport function getTextNodesUnder(docElement, node) {\n  var nodes = [];\n  for (node = node.firstChild; node; node = node.nextSibling) {\n    if (node.nodeType === 3) {\n      nodes.push(node);\n    } else {\n      nodes = nodes.concat(getTextNodesUnder(docElement, node));\n    }\n  }\n  return nodes;\n}\n/**\n * @param {IToolsItemConfigs} obj - specifies the configuration\n * @returns {void}\n * @hidden\n */\nexport function toObjectLowerCase(obj) {\n  var convertedValue = {};\n  var keys = Object.keys(obj);\n  for (var i = 0; i < Object.keys(obj).length; i++) {\n    convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n  }\n  return convertedValue;\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getEditValue(value, rteObj) {\n  var val;\n  if (value !== null && value !== '') {\n    val = rteObj.enableHtmlEncode ? updateTextNode(decode(value), rteObj) : updateTextNode(value, rteObj);\n    rteObj.setProperties({\n      value: val\n    }, true);\n  } else {\n    if (rteObj.enterKey === 'DIV') {\n      val = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n    } else if (rteObj.enterKey === 'BR') {\n      val = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n    } else {\n      val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n  }\n  return val;\n}\n/**\n * @param {string} value - specifies the value\n * @param {IRichTextEditor} rteObj - specifies the rich text editor instance.\n * @returns {string} - returns the string\n * @hidden\n */\nexport function updateTextNode(value, rteObj) {\n  var tempNode = document.createElement('div');\n  var resultElm = document.createElement('div');\n  var childNodes = tempNode.childNodes;\n  tempNode.innerHTML = value;\n  tempNode.setAttribute('class', 'tempDiv');\n  if (childNodes.length > 0) {\n    var isPreviousInlineElem = void 0;\n    var previousParent = void 0;\n    var insertElem = void 0;\n    while (tempNode.firstChild) {\n      if (rteObj.enterKey !== 'BR' && (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '') || inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n        if (!isPreviousInlineElem) {\n          if (rteObj.enterKey === 'DIV') {\n            insertElem = createElement('div');\n          } else {\n            insertElem = createElement('p');\n          }\n          resultElm.appendChild(insertElem);\n          insertElem.appendChild(tempNode.firstChild);\n        } else {\n          previousParent.appendChild(tempNode.firstChild);\n        }\n        previousParent = insertElem;\n        isPreviousInlineElem = true;\n      } else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' || tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === '')) {\n        detach(tempNode.firstChild);\n      } else {\n        resultElm.appendChild(tempNode.firstChild);\n        isPreviousInlineElem = false;\n      }\n    }\n    var imageElm = resultElm.querySelectorAll('img');\n    for (var i = 0; i < imageElm.length; i++) {\n      if (!imageElm[i].classList.contains(classes.CLS_RTE_IMAGE)) {\n        imageElm[i].classList.add(classes.CLS_RTE_IMAGE);\n      }\n      if (!(imageElm[i].classList.contains(classes.CLS_IMGINLINE) || imageElm[i].classList.contains(classes.CLS_IMGBREAK))) {\n        imageElm[i].classList.add(classes.CLS_IMGINLINE);\n      }\n    }\n  }\n  return resultElm.innerHTML;\n}\n/**\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the value based on enter configuration.\n * @hidden\n */\nexport function getDefaultValue(rteObj) {\n  var currentVal;\n  if (rteObj.enterKey === 'DIV') {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n  } else if (rteObj.enterKey === 'BR') {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n  } else {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n  }\n  return currentVal;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isEditableValueEmpty(value) {\n  return value === '<p><br></p>' || value === '&lt;p&gt;&lt;br&gt;&lt;/p&gt;' || value === '<div><br></div>' || value === '&lt;div&gt;&lt;br&gt;&lt;/div&gt;' || value === '<br>' || value === '&lt;br&gt;' || value === '' ? true : false;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string\n * @hidden\n */\nexport function decode(value) {\n  return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<').replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>').replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ').replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} parent - specifies the rte\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function sanitizeHelper(value, parent) {\n  if (parent.enableHtmlSanitizer) {\n    var item = SanitizeHtmlHelper.beforeSanitize();\n    var beforeEvent = {\n      cancel: false,\n      helper: null\n    };\n    extend(item, item, beforeEvent);\n    parent.trigger('beforeSanitizeHtml', item);\n    if (item.cancel && !isNOU(item.helper)) {\n      value = item.helper(value);\n    } else if (!item.cancel) {\n      value = SanitizeHtmlHelper.serializeValue(item, value);\n    }\n  }\n  return value;\n}\n/**\n * @param {string} dataUrl - specifies the string value\n * @returns {BaseToolbar} - returns the value\n * @hidden\n */\n//Converting the base64 url to blob\nexport function convertToBlob(dataUrl) {\n  var arr = dataUrl.split(',');\n  var mime = arr[0].match(/:(.*?);/)[1];\n  var bstr = atob(arr[1]);\n  var n = bstr.length;\n  var u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], {\n    type: mime\n  });\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @param {string} localeItems - specifies the locale items\n * @param {IDropDownItemModel} item - specifies the dropdown item\n * @returns {string} - returns the value\n * @hidden\n */\nexport function getLocaleFontFormat(self, localeItems, item) {\n  for (var i = 0; localeItems.length > i; i++) {\n    if (localeItems[i].value === item.value || localeItems[i].value === item.subCommand) {\n      return self.localeObj.getConstant(localeItems[i].locale);\n    }\n  }\n  return item.text;\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @returns {void}\n * @hidden\n */\nexport function updateDropDownFontFormatLocale(self) {\n  model.fontFamily.forEach(function (item, i) {\n    model.fontFamily[i].text = getLocaleFontFormat(self, fontNameLocale, model.fontFamily[i]);\n  });\n  model.formatItems.forEach(function (item, i) {\n    model.formatItems[i].text = getLocaleFontFormat(self, formatsLocale, model.formatItems[i]);\n  });\n  model.numberFormatList.forEach(function (item, i) {\n    model.numberFormatList[i].text = getLocaleFontFormat(self, numberFormatListLocale, model.numberFormatList[i]);\n  });\n  model.bulletFormatList.forEach(function (item, i) {\n    model.bulletFormatList[i].text = getLocaleFontFormat(self, bulletFormatListLocale, model.bulletFormatList[i]);\n  });\n}","map":{"version":3,"names":["isNullOrUndefined","isNOU","addClass","removeClass","selectAll","createElement","Browser","detach","SanitizeHtmlHelper","extend","classes","model","toolsLocale","fontNameLocale","formatsLocale","numberFormatListLocale","bulletFormatListLocale","undoRedoItems","inlineNode","getIndex","val","items","index","some","item","i","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","value","type","returnType","data","result","k","length","text","subCommand","iconCss","isIDevice","isDevice","isIos","getFormattedFontSize","pageYOffset","e","parentElement","isIFrame","y","window","getBoundingClientRect","top","clientY","pageY","getTooltipText","serviceLocator","i10n","getService","itemLocale","tooltipText","getConstant","setToolbarStatus","isPopToolbar","self","updateDropDownFontFormatLocale","dropDown","dropDownModule","args","keys","Object","_i","keys_1","key","j","tbItems","itemStr","tbElements","CLS_ACTIVE","parent","toolbarSettings","formatDropDown","isDestroyed","formatItems","format","types","formatContent","default","content","width","dataBind","alignDropDown","alignItems","alignmentItems","fontNameDropDown","fontNameItems","fontFamily","fontNameContent","name_1","title","fontSizeDropDown","fontSizeItems","fontSize","fontSizeContent","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","command","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","toolbarObj","CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","getEditValue","rteObj","enableHtmlEncode","updateTextNode","decode","setProperties","enterKey","resultElm","childNodes","setAttribute","isPreviousInlineElem","previousParent","insertElem","nodeName","textContent","indexOf","trim","appendChild","imageElm","querySelectorAll","CLS_RTE_IMAGE","add","CLS_IMGINLINE","CLS_IMGBREAK","getDefaultValue","currentVal","isEditableValueEmpty","sanitizeHelper","enableHtmlSanitizer","beforeSanitize","beforeEvent","cancel","helper","trigger","serializeValue","convertToBlob","dataUrl","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","getLocaleFontFormat","localeItems","localeObj","locale","forEach","numberFormatList","bulletFormatList"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/base/util.js"],"sourcesContent":["/**\n * Defines util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport { Browser, detach, SanitizeHtmlHelper, extend } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as model from '../models/items';\nimport { toolsLocale, fontNameLocale, formatsLocale, numberFormatListLocale, bulletFormatListLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n    'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n    'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n    'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg',\n    'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @param {string} val - specifies the string value\n * @param {string} items - specifies the value\n * @returns {number} - returns the number value\n * @hidden\n */\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\n/**\n * @param {Element} element - specifies the element\n * @param {string} className - specifies the string value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\n/**\n * @param {IDropDownItemModel} items - specifies the item model\n * @param {string} value - specifies the string value\n * @param {string} type - specifies the string value\n * @param {string} returnType - specifies the return type\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\n/**\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\n/**\n * @param {MouseEvent} e - specifies the mouse event\n * @param {HTMLElement} parentElement - specifies the parent element\n * @param {boolean} isIFrame - specifies the boolean value\n * @returns {number} - returns the number\n * @hidden\n */\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\n/**\n * @param {string} item - specifies the string\n * @param {ServiceLocator} serviceLocator - specifies the service locator\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\n/**\n * @param {ISetToolbarStatusArgs} e - specifies the e element\n * @param {boolean} isPopToolbar - specifies the boolean value\n * @param {IRichTextEditor} self - specifies the parent element\n * @returns {void}\n * @hidden\n */\nexport function setToolbarStatus(e, isPopToolbar, self) {\n    updateDropDownFontFormatLocale(self);\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist') ||\n                (itemStr === 'pre' && key === 'insertcode')) {\n                if (typeof data[key] === 'boolean') {\n                    if (data[key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[key] === 'string' || data[key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) > -1) {\n                    var value = ((data[key]) ? data[key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats': {\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var formatItems = e.parent.format.types;\n                            var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text :\n                                e.parent.format.default;\n                            result = getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + (isNOU(result) ? formatContent : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        }\n                        case 'alignments': {\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontname': {\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems[0].text :\n                                e.parent.fontFamily.default;\n                            var name_1 = (isNOU(result) ? fontNameContent : result);\n                            e.tbElements[j].title = name_1;\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontsize': {\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems[1].text :\n                                e.parent.fontSize.default;\n                            result = getDropDownValue(fontSizeItems, (value === '' ? fontSizeContent.replace(/\\s/g, '') : value), 'value', 'text');\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n/**\n * @param {string} items - specifies the string value\n * @returns {string[]} - returns the array value\n * @hidden\n */\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\n/**\n * @param {string[]} items - specifies the array of string value\n * @param {IToolbarItemModel} toolbarItems - specifies the tool bar model\n * @returns {number} - returns the number\n * @hidden\n */\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if (items[i] === 'OrderedList' && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'UnorderedList' && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'InsertCode' && toolbarItems[j].subCommand === 'Pre') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'FileManager' && toolbarItems[j].subCommand === 'File') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (typeof (items[i]) === 'object' && items[i].command === 'Custom') {\n                    itemsIndex.push(i);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\n/**\n * @param {BaseToolbar} baseToolbar - specifies the base\n * @param {boolean} undoRedoStatus - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n *\n * @param {Element} element - specifies the element.\n * @param {string} type - specifies the string type.\n * @returns {void}\n * @hidden\n\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\n/**\n * To parse the HTML\n *\n * @param {string} value - specifies the string value\n * @returns {DocumentFragment} - returns the document\n * @hidden\n */\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\n/**\n * @param {Document} docElement - specifies the document element\n * @param {Element} node - specifies the node\n * @returns {Node[]} - returns the node array\n * @hidden\n */\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\n/**\n * @param {IToolsItemConfigs} obj - specifies the configuration\n * @returns {void}\n * @hidden\n */\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getEditValue(value, rteObj) {\n    var val;\n    if (value !== null && value !== '') {\n        val = rteObj.enableHtmlEncode ? updateTextNode(decode(value), rteObj) : updateTextNode(value, rteObj);\n        rteObj.setProperties({ value: val }, true);\n    }\n    else {\n        if (rteObj.enterKey === 'DIV') {\n            val = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n        }\n        else if (rteObj.enterKey === 'BR') {\n            val = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n        }\n        else {\n            val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n        }\n    }\n    return val;\n}\n/**\n * @param {string} value - specifies the value\n * @param {IRichTextEditor} rteObj - specifies the rich text editor instance.\n * @returns {string} - returns the string\n * @hidden\n */\nexport function updateTextNode(value, rteObj) {\n    var tempNode = document.createElement('div');\n    var resultElm = document.createElement('div');\n    var childNodes = tempNode.childNodes;\n    tempNode.innerHTML = value;\n    tempNode.setAttribute('class', 'tempDiv');\n    if (childNodes.length > 0) {\n        var isPreviousInlineElem = void 0;\n        var previousParent = void 0;\n        var insertElem = void 0;\n        while (tempNode.firstChild) {\n            if (rteObj.enterKey !== 'BR' && ((tempNode.firstChild.nodeName === '#text' &&\n                (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '')) ||\n                inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n                if (!isPreviousInlineElem) {\n                    if (rteObj.enterKey === 'DIV') {\n                        insertElem = createElement('div');\n                    }\n                    else {\n                        insertElem = createElement('p');\n                    }\n                    resultElm.appendChild(insertElem);\n                    insertElem.appendChild(tempNode.firstChild);\n                }\n                else {\n                    previousParent.appendChild(tempNode.firstChild);\n                }\n                previousParent = insertElem;\n                isPreviousInlineElem = true;\n            }\n            else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' ||\n                (tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === ''))) {\n                detach(tempNode.firstChild);\n            }\n            else {\n                resultElm.appendChild(tempNode.firstChild);\n                isPreviousInlineElem = false;\n            }\n        }\n        var imageElm = resultElm.querySelectorAll('img');\n        for (var i = 0; i < imageElm.length; i++) {\n            if (!imageElm[i].classList.contains(classes.CLS_RTE_IMAGE)) {\n                imageElm[i].classList.add(classes.CLS_RTE_IMAGE);\n            }\n            if (!(imageElm[i].classList.contains(classes.CLS_IMGINLINE) ||\n                imageElm[i].classList.contains(classes.CLS_IMGBREAK))) {\n                imageElm[i].classList.add(classes.CLS_IMGINLINE);\n            }\n        }\n    }\n    return resultElm.innerHTML;\n}\n/**\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the value based on enter configuration.\n * @hidden\n */\nexport function getDefaultValue(rteObj) {\n    var currentVal;\n    if (rteObj.enterKey === 'DIV') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n    }\n    else if (rteObj.enterKey === 'BR') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n    }\n    else {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n    return currentVal;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isEditableValueEmpty(value) {\n    return (value === '<p><br></p>' || value === '&lt;p&gt;&lt;br&gt;&lt;/p&gt;'\n        || value === '<div><br></div>' || value === '&lt;div&gt;&lt;br&gt;&lt;/div&gt;'\n        || value === '<br>' || value === '&lt;br&gt;'\n        || value === '') ? true : false;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string\n * @hidden\n */\nexport function decode(value) {\n    return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n        .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n        .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n        .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} parent - specifies the rte\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function sanitizeHelper(value, parent) {\n    if (parent.enableHtmlSanitizer) {\n        var item = SanitizeHtmlHelper.beforeSanitize();\n        var beforeEvent = {\n            cancel: false,\n            helper: null\n        };\n        extend(item, item, beforeEvent);\n        parent.trigger('beforeSanitizeHtml', item);\n        if (item.cancel && !isNOU(item.helper)) {\n            value = item.helper(value);\n        }\n        else if (!item.cancel) {\n            value = SanitizeHtmlHelper.serializeValue(item, value);\n        }\n    }\n    return value;\n}\n/**\n * @param {string} dataUrl - specifies the string value\n * @returns {BaseToolbar} - returns the value\n * @hidden\n */\n//Converting the base64 url to blob\nexport function convertToBlob(dataUrl) {\n    var arr = dataUrl.split(',');\n    var mime = arr[0].match(/:(.*?);/)[1];\n    var bstr = atob(arr[1]);\n    var n = bstr.length;\n    var u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new Blob([u8arr], { type: mime });\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @param {string} localeItems - specifies the locale items\n * @param {IDropDownItemModel} item - specifies the dropdown item\n * @returns {string} - returns the value\n * @hidden\n */\nexport function getLocaleFontFormat(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.value || localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @returns {void}\n * @hidden\n */\nexport function updateDropDownFontFormatLocale(self) {\n    model.fontFamily.forEach(function (item, i) {\n        model.fontFamily[i].text = getLocaleFontFormat(self, fontNameLocale, model.fontFamily[i]);\n    });\n    model.formatItems.forEach(function (item, i) {\n        model.formatItems[i].text = getLocaleFontFormat(self, formatsLocale, model.formatItems[i]);\n    });\n    model.numberFormatList.forEach(function (item, i) {\n        model.numberFormatList[i].text = getLocaleFontFormat(self, numberFormatListLocale, model.numberFormatList[i]);\n    });\n    model.bulletFormatList.forEach(function (item, i) {\n        model.bulletFormatList[i].text = getLocaleFontFormat(self, bulletFormatListLocale, model.bulletFormatList[i]);\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}