{"ast":null,"code":"import * as events from '../base/constant';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach, extend, addClass } from '@syncfusion/ej2-base';\nimport { getUniqueID, Browser } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { sanitizeHelper, convertToBlob, getDefaultValue } from '../base/util';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */function () {\n  function PasteCleanup(parent, serviceLocator) {\n    this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button', 'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress', 'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n    this.blockNode = ['div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset', 'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript', 'object', 'ol', 'pre', 'td', 'tr', 'th', 'tbody', 'tfoot', 'thead', 'table', 'ul', 'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n    this.isNotFromHtml = false;\n    this.containsHtml = false;\n    this.parent = parent;\n    this.locator = serviceLocator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.i10n = serviceLocator.getService('rteLocale');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n  }\n  PasteCleanup.prototype.addEventListener = function () {\n    this.nodeSelectionObj = new NodeSelection();\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.pasteClean, this.pasteClean, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  PasteCleanup.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  PasteCleanup.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.pasteClean, this.pasteClean);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  PasteCleanup.prototype.pasteClean = function (e) {\n    var _this = this;\n    var args = {\n      requestType: 'Paste',\n      editorMode: this.parent.editorMode,\n      event: e\n    };\n    var value = null;\n    var imageproperties;\n    if (e.args && !isNOU(e.args.clipboardData)) {\n      value = e.args.clipboardData.getData('text/html');\n    }\n    this.parent.trigger(events.beforePasteCleanup, {\n      value: value\n    });\n    if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n      if (value.length === 0) {\n        var htmlRegex = new RegExp(/<\\/[a-z][\\s\\S]*>/i);\n        value = e.args.clipboardData.getData('text/plain');\n        this.isNotFromHtml = value !== '' ? true : false;\n        value = value.replace(/</g, '&lt;');\n        value = value.replace(/>/g, '&gt;');\n        this.containsHtml = htmlRegex.test(value);\n        var file = e && e.args.clipboardData && e.args.clipboardData.items.length > 0 ? e.args.clipboardData.items[0].getAsFile() : null;\n        this.parent.notify(events.paste, {\n          file: file,\n          args: e.args,\n          text: value,\n          callBack: function (b) {\n            imageproperties = b;\n            if (typeof imageproperties === 'object') {\n              _this.parent.formatter.editorManager.execCommand('Images', 'Image', e.args, _this.imageFormatting.bind(_this, args), 'pasteCleanup', imageproperties, 'pasteCleanupModule');\n            } else {\n              value = imageproperties;\n            }\n          }\n        });\n        if (!htmlRegex.test(value)) {\n          var divElement = this.parent.createElement('div');\n          divElement.innerHTML = this.splitBreakLine(value);\n          value = divElement.innerHTML;\n        }\n      } else if (value.length > 0) {\n        this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n          args: e.args,\n          text: e.text,\n          allowedStylePropertiesArray: this.parent.pasteCleanupSettings.allowedStyleProps,\n          callBack: function (a) {\n            value = a.trim();\n          }\n        });\n      }\n      this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n      var currentDocument = this.contentRenderer.getDocument();\n      var range = this.nodeSelectionObj.getRange(currentDocument);\n      this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n      this.parent.trigger(events.afterPasteCleanup, {\n        value: value\n      }, function (updatedArgs) {\n        value = updatedArgs.value;\n      });\n      if (this.parent.pasteCleanupSettings.prompt) {\n        e.args.preventDefault();\n        var tempDivElem = this.parent.createElement('div');\n        tempDivElem.innerHTML = value;\n        if (tempDivElem.textContent !== '' || !isNOU(tempDivElem.querySelector('img')) || !isNOU(tempDivElem.querySelector('table'))) {\n          this.pasteDialog(value, args);\n        }\n      } else if (this.parent.pasteCleanupSettings.plainText) {\n        e.args.preventDefault();\n        this.plainFormatting(value, args);\n      } else if (this.parent.pasteCleanupSettings.keepFormat) {\n        e.args.preventDefault();\n        this.formatting(value, false, args);\n      } else {\n        e.args.preventDefault();\n        this.formatting(value, true, args);\n      }\n    }\n  };\n  PasteCleanup.prototype.splitBreakLine = function (value) {\n    var enterSplitText = value.split('\\n');\n    var contentInnerElem = '';\n    for (var i = 0; i < enterSplitText.length; i++) {\n      if (enterSplitText[i].trim() === '') {\n        contentInnerElem += getDefaultValue(this.parent);\n      } else {\n        var contentWithSpace = this.makeSpace(enterSplitText[i]);\n        contentInnerElem += '<p>' + contentWithSpace.trim() + '</p>';\n      }\n    }\n    return contentInnerElem;\n  };\n  PasteCleanup.prototype.makeSpace = function (enterSplitText) {\n    var contentWithSpace = '';\n    var spaceBetweenContent = true;\n    var spaceSplit = enterSplitText.split(' ');\n    for (var j = 0; j < spaceSplit.length; j++) {\n      if (spaceSplit[j].trim() === '') {\n        contentWithSpace += spaceBetweenContent ? '&nbsp;' : ' ';\n      } else {\n        spaceBetweenContent = false;\n        contentWithSpace += spaceSplit[j] + ' ';\n      }\n    }\n    return contentWithSpace;\n  };\n  PasteCleanup.prototype.imgUploading = function (elm) {\n    var allImgElm = elm.querySelectorAll('.pasteContent_Img');\n    if (this.parent.insertImageSettings.saveUrl && allImgElm.length > 0) {\n      var base64Src = [];\n      var imgName = [];\n      var uploadImg = [];\n      for (var i = 0; i < allImgElm.length; i++) {\n        if (allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n          base64Src.push(allImgElm[i].getAttribute('src'));\n          imgName.push(getUniqueID('rte_image'));\n          uploadImg.push(allImgElm[i]);\n        }\n      }\n      var fileList = [];\n      for (var i = 0; i < base64Src.length; i++) {\n        fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n      }\n      for (var i = 0; i < fileList.length; i++) {\n        this.uploadMethod(fileList[i], uploadImg[i]);\n      }\n      if (isNOU(this.parent.insertImageSettings.path) && this.parent.insertImageSettings.saveFormat === 'Blob') {\n        this.getBlob(allImgElm);\n      }\n    } else if (this.parent.insertImageSettings.saveFormat === 'Blob') {\n      this.getBlob(allImgElm);\n    }\n    var allImgElmId = elm.querySelectorAll('.pasteContent_Img');\n    for (var i = 0; i < allImgElmId.length; i++) {\n      allImgElmId[i].classList.remove('pasteContent_Img');\n      if (allImgElmId[i].getAttribute('class').trim() === '') {\n        allImgElm[i].removeAttribute('class');\n      }\n    }\n  };\n  PasteCleanup.prototype.getBlob = function (allImgElm) {\n    for (var i = 0; i < allImgElm.length; i++) {\n      if (!isNOU(allImgElm[i].getAttribute('src')) && allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n        var blopUrl = URL.createObjectURL(convertToBlob(allImgElm[i].getAttribute('src')));\n        allImgElm[i].setAttribute('src', blopUrl);\n      }\n    }\n  };\n  PasteCleanup.prototype.toolbarEnableDisable = function (state) {\n    if (!this.parent.inlineMode.enable) {\n      this.parent.toolbarModule.baseToolbar.toolbarObj.disable(state);\n    }\n  };\n  PasteCleanup.prototype.uploadMethod = function (fileList, imgElem) {\n    var _this = this;\n    var uploadEle = document.createElement('div');\n    document.body.appendChild(uploadEle);\n    uploadEle.setAttribute('display', 'none');\n    imgElem.style.opacity = '0.5';\n    var popupEle = this.parent.createElement('div');\n    this.parent.element.appendChild(popupEle);\n    var contentEle = this.parent.createElement('input', {\n      id: this.parent.element.id + '_upload',\n      attrs: {\n        type: 'File',\n        name: 'UploadFiles'\n      }\n    });\n    var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n    var popupObj = new Popup(popupEle, {\n      relateTo: imgElem,\n      height: '85px',\n      width: '300px',\n      offsetY: offsetY,\n      content: contentEle,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'center',\n        Y: 'top'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        _this.parent.isBlur = false;\n        popupObj.destroy();\n        detach(popupObj.element);\n      }\n    });\n    popupObj.element.style.display = 'none';\n    addClass([popupObj.element], [classes.CLS_POPUP_OPEN, classes.CLS_RTE_UPLOAD_POPUP]);\n    var timeOut = fileList.size > 1000000 ? 300 : 100;\n    setTimeout(function () {\n      _this.refreshPopup(imgElem, popupObj);\n    }, timeOut);\n    var rawFile;\n    var beforeUploadArgs;\n    var uploadObj = new Uploader({\n      asyncSettings: {\n        saveUrl: this.parent.insertImageSettings.saveUrl,\n        removeUrl: this.parent.insertImageSettings.removeUrl\n      },\n      cssClass: classes.CLS_RTE_DIALOG_UPLOAD,\n      dropArea: this.parent.inputElement,\n      allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n      success: function (e) {\n        setTimeout(function () {\n          _this.popupClose(popupObj, uploadObj, imgElem, e);\n        }, 900);\n      },\n      uploading: function (e) {\n        if (!_this.parent.isServerRendered) {\n          _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n            if (imageUploadingArgs.cancel) {\n              if (!isNullOrUndefined(imgElem)) {\n                detach(imgElem);\n              }\n              if (!isNullOrUndefined(popupObj.element)) {\n                detach(popupObj.element);\n              }\n            } else {\n              _this.parent.inputElement.contentEditable = 'false';\n            }\n          });\n        }\n      },\n      beforeUpload: function (args) {\n        if (_this.parent.isServerRendered) {\n          beforeUploadArgs = JSON.parse(JSON.stringify(args));\n          beforeUploadArgs.filesData = rawFile;\n          args.cancel = true;\n          _this.parent.trigger(events.imageUploading, beforeUploadArgs, function (beforeUploadArgs) {\n            if (beforeUploadArgs.cancel) {\n              return;\n            }\n            _this.toolbarEnableDisable(true);\n            /* eslint-disable */\n            uploadObj.currentRequestHeader = beforeUploadArgs.currentRequest ? beforeUploadArgs.currentRequest : uploadObj.currentRequestHeader;\n            uploadObj.customFormDatas = beforeUploadArgs.customFormData && beforeUploadArgs.customFormData.length > 0 ? beforeUploadArgs.customFormData : uploadObj.customFormDatas;\n            uploadObj.uploadFiles(rawFile, null);\n            /* eslint-enable */\n          });\n        } else {\n          _this.parent.trigger(events.beforeImageUpload, args);\n          _this.toolbarEnableDisable(true);\n        }\n      },\n      // eslint-disable-next-line\n      failure: function (e) {\n        setTimeout(function () {\n          _this.uploadFailure(imgElem, uploadObj, popupObj, e);\n        }, 900);\n      },\n      canceling: function () {\n        _this.parent.inputElement.contentEditable = 'true';\n        if (imgElem.nextSibling.textContent === ' ') {\n          detach(imgElem.nextSibling);\n        }\n        detach(imgElem);\n        popupObj.close();\n      },\n      selected: function (e) {\n        e.cancel = true;\n        if (_this.parent.isServerRendered) {\n          rawFile = e.filesData;\n        }\n      },\n      removing: function () {\n        _this.parent.inputElement.contentEditable = 'true';\n        if (imgElem.nextSibling.textContent === ' ') {\n          detach(imgElem.nextSibling);\n        }\n        detach(imgElem);\n        popupObj.close();\n      }\n    });\n    uploadObj.appendTo(popupObj.element.childNodes[0]);\n    /* eslint-disable */\n    var fileData = [{\n      name: fileList.name,\n      rawFile: fileList,\n      size: fileList.size,\n      type: fileList.type,\n      validationMessages: {\n        minSize: \"\",\n        maxSize: \"\"\n      },\n      statusCode: '1'\n    }];\n    uploadObj.createFileList(fileData);\n    uploadObj.filesData.push(fileData[0]);\n    /* eslint-enable */\n    rawFile = fileData;\n    uploadObj.upload(fileData);\n    popupObj.element.getElementsByClassName('e-file-select-wrap')[0].style.display = 'none';\n    detach(popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap'));\n  };\n  PasteCleanup.prototype.uploadFailure = function (imgElem, uploadObj, popupObj, e) {\n    this.parent.inputElement.contentEditable = 'true';\n    detach(imgElem);\n    if (popupObj) {\n      popupObj.close();\n    }\n    this.parent.trigger(events.imageUploadFailed, e);\n    uploadObj.destroy();\n  };\n  PasteCleanup.prototype.popupClose = function (popupObj, uploadObj, imgElem, e) {\n    var _this = this;\n    this.parent.inputElement.contentEditable = 'true';\n    e.element = imgElem;\n    this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n      if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n        var url = _this.parent.insertImageSettings.path + e.file.name;\n        imgElem.src = url;\n        imgElem.setAttribute('alt', e.file.name);\n      }\n    });\n    popupObj.close();\n    imgElem.style.opacity = '1';\n    uploadObj.destroy();\n    this.toolbarEnableDisable(false);\n  };\n  PasteCleanup.prototype.refreshPopup = function (imageElement, popupObj) {\n    var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop + imageElement.offsetTop : imageElement.offsetTop;\n    var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n    if (imgPosition > rtePosition) {\n      popupObj.relateTo = this.parent.inputElement;\n      popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n      popupObj.element.style.display = 'block';\n    } else {\n      if (popupObj) {\n        popupObj.refreshPosition(imageElement);\n        popupObj.element.style.display = 'block';\n      }\n    }\n  };\n  PasteCleanup.prototype.base64ToFile = function (base64, filename) {\n    var baseStr = base64.split(',');\n    var typeStr = baseStr[0].match(/:(.*?);/)[1];\n    var extension = typeStr.split('/')[1];\n    var decodeStr = atob(baseStr[1]);\n    var strLen = decodeStr.length;\n    var decodeArr = new Uint8Array(strLen);\n    while (strLen--) {\n      decodeArr[strLen] = decodeStr.charCodeAt(strLen);\n    }\n    if (Browser.isIE || navigator.appVersion.indexOf('Edge') > -1) {\n      var blob = new Blob([decodeArr], {\n        type: extension\n      });\n      extend(blob, {\n        name: filename + '.' + (!isNOU(extension) ? extension : '')\n      });\n      return blob;\n    } else {\n      return new File([decodeArr], filename + '.' + (!isNOU(extension) ? extension : ''), {\n        type: extension\n      });\n    }\n  };\n  /**\n   * Method for image formatting when pasting\n   *\n   * @param {Object} pasteArgs - specifies the paste arguments.\n   * @param {Element []} imgElement - specifies the array elements.\n   * @returns {void}\n   * @hidden\n    */\n  PasteCleanup.prototype.imageFormatting = function (pasteArgs, imgElement) {\n    var imageElement = this.parent.createElement('span');\n    imageElement.appendChild(imgElement.elements[0]);\n    var imageValue = imageElement.innerHTML;\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    var currentDocument = this.contentRenderer.getDocument();\n    var range = this.nodeSelectionObj.getRange(currentDocument);\n    this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    if (this.parent.pasteCleanupSettings.prompt) {\n      this.pasteDialog(imageValue, pasteArgs);\n    } else if (this.parent.pasteCleanupSettings.plainText) {\n      this.plainFormatting(imageValue, pasteArgs);\n    } else if (this.parent.pasteCleanupSettings.keepFormat) {\n      this.formatting(imageValue, false, pasteArgs);\n    } else {\n      this.formatting(imageValue, true, pasteArgs);\n    }\n  };\n  PasteCleanup.prototype.radioRender = function () {\n    var keepRadioButton = new RadioButton({\n      label: this.i10n.getConstant('keepFormat'),\n      name: 'pasteOption',\n      checked: true\n    });\n    keepRadioButton.isStringTemplate = true;\n    var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n    keepRadioButton.appendTo(keepFormatElement);\n    var cleanRadioButton = new RadioButton({\n      label: this.i10n.getConstant('cleanFormat'),\n      name: 'pasteOption'\n    });\n    cleanRadioButton.isStringTemplate = true;\n    var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n    cleanRadioButton.appendTo(cleanFormatElement);\n    var plainTextRadioButton = new RadioButton({\n      label: this.i10n.getConstant('plainText'),\n      name: 'pasteOption'\n    });\n    plainTextRadioButton.isStringTemplate = true;\n    var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n    plainTextRadioButton.appendTo(plainTextElement);\n  };\n  PasteCleanup.prototype.selectFormatting = function (value, args, keepChecked, cleanChecked) {\n    if (keepChecked) {\n      this.formatting(value, false, args);\n    } else if (cleanChecked) {\n      this.formatting(value, true, args);\n    } else {\n      this.plainFormatting(value, args);\n    }\n  };\n  PasteCleanup.prototype.pasteDialog = function (value, args) {\n    var _this = this;\n    var isHeight = false;\n    var preRTEHeight = this.parent.height;\n    var dialogModel = {\n      buttons: [{\n        click: function () {\n          if (!dialog.isDestroyed) {\n            var keepChecked = _this.parent.element.querySelector('#keepFormating').checked;\n            var cleanChecked = _this.parent.element.querySelector('#cleanFormat').checked;\n            dialog.hide();\n            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n            isHeight = false;\n            var argument = dialog;\n            _this.dialogRenderObj.close(argument);\n            dialog.destroy();\n            _this.selectFormatting(value, args, keepChecked, cleanChecked);\n          }\n        },\n        buttonModel: {\n          isPrimary: true,\n          cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n          content: this.i10n.getConstant('pasteDialogOk')\n        }\n      }, {\n        click: function () {\n          if (!dialog.isDestroyed) {\n            dialog.hide();\n            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n            isHeight = false;\n            var args_1 = dialog;\n            _this.dialogRenderObj.close(args_1);\n            dialog.destroy();\n          }\n        },\n        buttonModel: {\n          cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n          content: this.i10n.getConstant('pasteDialogCancel')\n        }\n      }],\n      header: this.i10n.getConstant('pasteFormat'),\n      content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' + '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' + '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' + '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n      target: this.parent.element,\n      width: '300px',\n      height: '265px',\n      cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n      isModal: true,\n      visible: false\n    };\n    var dialog = this.dialogRenderObj.render(dialogModel);\n    var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID() + '_pasteCleanupDialog');\n    if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n      this.destroyDialog(rteDialogWrapper);\n    }\n    if (rteDialogWrapper === null) {\n      rteDialogWrapper = this.parent.createElement('div', {\n        id: this.parent.getID() + '_pasteCleanupDialog'\n      });\n      this.parent.element.appendChild(rteDialogWrapper);\n    }\n    dialog.appendTo(rteDialogWrapper);\n    this.radioRender();\n    /* eslint-disable */\n    if (this.parent.element.offsetHeight < parseInt(dialog.height.split('px')[0], null)) {\n      this.parent.height = parseInt(dialog.height.split('px')[0], null) + 40;\n      /* eslint-enable */\n      isHeight = true;\n    }\n    dialog.show();\n  };\n  PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n    var rteDialogContainer = this.parent.element.querySelector('.e-dlg-container');\n    detach(rteDialogContainer);\n    var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n    for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n      detach(rteDialogWrapper.children[0]);\n    }\n  };\n  PasteCleanup.prototype.formatting = function (value, clean, args) {\n    var _this = this;\n    var clipBoardElem = this.parent.createElement('div', {\n      className: 'pasteContent',\n      styles: 'display:inline;'\n    });\n    if (this.isNotFromHtml && this.containsHtml) {\n      value = this.splitBreakLine(value);\n    }\n    clipBoardElem.innerHTML = value;\n    if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n      clipBoardElem = this.deniedTags(clipBoardElem);\n    }\n    if (clean) {\n      clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n    } else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n      clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n    }\n    if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n      clipBoardElem = this.allowedStyle(clipBoardElem);\n    }\n    this.saveSelection.restore();\n    clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n    var allImg = clipBoardElem.querySelectorAll('img');\n    for (var i = 0; i < allImg.length; i++) {\n      allImg[i].classList.add('pasteContent_Img');\n      if (this.parent.insertImageSettings.width !== 'auto') {\n        allImg[i].setAttribute('width', this.parent.insertImageSettings.width);\n      }\n      if (this.parent.insertImageSettings.minWidth !== '0' && this.parent.insertImageSettings.minWidth !== 0) {\n        allImg[i].style.minWidth = this.parent.insertImageSettings.minWidth.toString();\n      }\n      if (this.parent.insertImageSettings.maxWidth !== null) {\n        allImg[i].style.maxWidth = this.parent.getInsertImgMaxWidth().toString();\n      }\n      if (this.parent.insertImageSettings.height !== 'auto') {\n        allImg[i].setAttribute('height', this.parent.insertImageSettings.height);\n      }\n      if (this.parent.insertImageSettings.minHeight !== '0' && this.parent.insertImageSettings.minHeight !== 0) {\n        allImg[i].style.minHeight = this.parent.insertImageSettings.minHeight.toString();\n      }\n      if (this.parent.insertImageSettings.maxHeight !== null) {\n        allImg[i].style.maxHeight = this.parent.insertImageSettings.maxHeight.toString();\n      }\n    }\n    this.addTempClass(clipBoardElem);\n    if (clipBoardElem.textContent !== '' || !isNOU(clipBoardElem.querySelector('img')) || !isNOU(clipBoardElem.querySelector('table'))) {\n      this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n        extend(args, {\n          elements: returnArgs.elements,\n          imageElements: returnArgs.imgElem\n        }, true);\n        _this.parent.formatter.onSuccess(_this.parent, args);\n      }, clipBoardElem);\n      this.removeTempClass();\n      this.parent.notify(events.toolbarRefresh, {});\n      this.imgUploading(this.parent.inputElement);\n      if (this.parent.iframeSettings.enable) {\n        this.parent.updateValue();\n      }\n    }\n  };\n  PasteCleanup.prototype.addTempClass = function (clipBoardElem) {\n    var allChild = clipBoardElem.children;\n    for (var i = 0; i < allChild.length; i++) {\n      allChild[i].classList.add('pasteContent_RTE');\n    }\n  };\n  PasteCleanup.prototype.removeTempClass = function () {\n    var classElm = this.parent.inputElement.querySelectorAll('.pasteContent_RTE');\n    for (var i = 0; i < classElm.length; i++) {\n      classElm[i].classList.remove('pasteContent_RTE');\n      if (classElm[i].getAttribute('class') === '') {\n        classElm[i].removeAttribute('class');\n      }\n    }\n  };\n  PasteCleanup.prototype.sanitizeHelper = function (value) {\n    value = sanitizeHelper(value, this.parent);\n    return value;\n  };\n  //Plain Formatting\n  PasteCleanup.prototype.plainFormatting = function (value, args) {\n    var _this = this;\n    var clipBoardElem = this.parent.createElement('div', {\n      className: 'pasteContent',\n      styles: 'display:inline;'\n    });\n    clipBoardElem.innerHTML = value;\n    this.detachInlineElements(clipBoardElem);\n    this.getTextContent(clipBoardElem);\n    if (clipBoardElem.textContent.trim() !== '') {\n      if (!isNOU(clipBoardElem.firstElementChild) && clipBoardElem.firstElementChild.tagName !== 'BR') {\n        var firstElm = clipBoardElem.firstElementChild;\n        if (!isNOU(clipBoardElem.firstElementChild)) {\n          var spanElm = this.parent.createElement('span');\n          for (var i = 0, j = 0; i < firstElm.childNodes.length; i++, j++) {\n            if (firstElm.childNodes[i].nodeName === '#text') {\n              spanElm.appendChild(firstElm.childNodes[i]);\n              clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n              i--;\n            } else if (firstElm.childNodes[i].nodeName !== '#text' && j === 0) {\n              for (var k = 0; k < firstElm.childNodes[i].childNodes.length; k++) {\n                spanElm.appendChild(firstElm.childNodes[i].childNodes[k]);\n                clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                k--;\n              }\n              i--;\n            } else {\n              break;\n            }\n          }\n          if (!firstElm.hasChildNodes()) {\n            detach(firstElm);\n          }\n        }\n      }\n      this.removeEmptyElements(clipBoardElem);\n      this.saveSelection.restore();\n      clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n      this.addTempClass(clipBoardElem);\n      this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n        extend(args, {\n          elements: returnArgs.elements,\n          imageElements: returnArgs.imgElem\n        }, true);\n        _this.parent.formatter.onSuccess(_this.parent, args);\n      }, clipBoardElem);\n      this.removeTempClass();\n    } else {\n      this.saveSelection.restore();\n      extend(args, {\n        elements: []\n      }, true);\n      this.parent.formatter.onSuccess(this.parent, args);\n    }\n  };\n  PasteCleanup.prototype.getTextContent = function (clipBoardElem) {\n    for (var i = 0; i < this.blockNode.length; i++) {\n      var inElem = clipBoardElem.querySelectorAll(this.blockNode[i]);\n      for (var j = 0; j < inElem.length; j++) {\n        var parElem = void 0;\n        for (var k = 0, l = 0, preNode = void 0; k < inElem[j].childNodes.length; k++, l++) {\n          if (inElem[j].childNodes[k].nodeName === 'DIV' || inElem[j].childNodes[k].nodeName === 'P' || inElem[j].childNodes[k].nodeName === '#text' && inElem[j].childNodes[k].nodeValue.replace(/\\u00a0/g, '&nbsp;') !== '&nbsp;' && inElem[j].childNodes[k].textContent.trim() === '') {\n            parElem = inElem[j].childNodes[k].parentElement;\n            inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n            k--;\n          } else {\n            parElem = inElem[j].childNodes[k].parentElement;\n            if (preNode === 'text') {\n              var previousElem = parElem.previousElementSibling;\n              previousElem.appendChild(inElem[j].childNodes[k]);\n            } else {\n              var divElement = this.parent.createElement('div', {\n                id: 'newDiv'\n              });\n              divElement.appendChild(inElem[j].childNodes[k]);\n              parElem.parentElement.insertBefore(divElement, parElem);\n            }\n            k--;\n            preNode = 'text';\n          }\n        }\n        if (!isNOU(parElem)) {\n          detach(parElem);\n        }\n      }\n    }\n    var allElems = clipBoardElem.querySelectorAll('*');\n    for (var i = 0; i < allElems.length; i++) {\n      var allAtr = allElems[i].attributes;\n      for (var j = 0; j < allAtr.length; j++) {\n        allElems[i].removeAttribute(allAtr[j].name);\n        j--;\n      }\n    }\n  };\n  PasteCleanup.prototype.detachInlineElements = function (clipBoardElem) {\n    for (var i = 0; i < this.inlineNode.length; i++) {\n      var inElem = clipBoardElem.querySelectorAll(this.inlineNode[i]);\n      for (var j = 0; j < inElem.length; j++) {\n        var parElem = void 0;\n        for (var k = 0; k < inElem[j].childNodes.length; k++) {\n          parElem = inElem[j].childNodes[k].parentElement;\n          inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n          k--;\n        }\n        if (!isNOU(parElem)) {\n          detach(parElem);\n        }\n      }\n    }\n  };\n  PasteCleanup.prototype.findDetachEmptyElem = function (element) {\n    var removableElement;\n    if (!isNOU(element.parentElement)) {\n      if (element.parentElement.textContent.trim() === '' && element.parentElement.getAttribute('class') !== 'pasteContent') {\n        removableElement = this.findDetachEmptyElem(element.parentElement);\n      } else {\n        removableElement = element;\n      }\n    } else {\n      removableElement = null;\n    }\n    return removableElement;\n  };\n  PasteCleanup.prototype.removeEmptyElements = function (element) {\n    var emptyElements = element.querySelectorAll(':empty');\n    for (var i = 0; i < emptyElements.length; i++) {\n      if (emptyElements[i].tagName !== 'BR') {\n        var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n        if (!isNOU(detachableElement)) {\n          detach(detachableElement);\n        }\n      }\n    }\n  };\n  //GroupingTags\n  PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n    var groupingTags = deniedTags.slice();\n    var keys = Object.keys(pasteCleanupGroupingTags);\n    var values = keys.map(function (key) {\n      return pasteCleanupGroupingTags[key];\n    });\n    var addTags = [];\n    for (var i = 0; i < groupingTags.length; i++) {\n      //The value split using '[' because to retrieve the tag name from the user given format which may contain tag with attributes\n      if (groupingTags[i].split('[').length > 1) {\n        groupingTags[i] = groupingTags[i].split('[')[0].trim();\n      }\n      if (keys.indexOf(groupingTags[i]) > -1) {\n        for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n          if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 && addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n            addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n          }\n        }\n      }\n    }\n    return deniedTags = deniedTags.concat(addTags);\n  };\n  //Filter Attributes in Denied Tags\n  PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n    for (var i = 0; i < deniedTags.length; i++) {\n      if (deniedTags[i].split('[').length > 1) {\n        var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n        var allowedAttributeArray = [];\n        var deniedAttributeArray = [];\n        for (var j = 0; j < userAttributes.length; j++) {\n          // eslint-disable-next-line\n          userAttributes[j].indexOf('!') < 0 ? allowedAttributeArray.push(userAttributes[j].trim()) : deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n        }\n        var allowedAttribute = allowedAttributeArray.length > 1 ? allowedAttributeArray.join('][') : allowedAttributeArray.join();\n        var deniedAttribute = deniedAttributeArray.length > 1 ? deniedAttributeArray.join('][') : deniedAttributeArray.join();\n        if (deniedAttribute.length > 0) {\n          var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n          deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n        } else {\n          deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n        }\n      }\n    }\n    return deniedTags;\n  };\n  //Denied Tags\n  PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n    var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n    deniedTags = this.attributesfilter(deniedTags);\n    deniedTags = this.tagGrouping(deniedTags);\n    for (var i = 0; i < deniedTags.length; i++) {\n      var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n      for (var j = removableElement.length - 1; j >= 0; j--) {\n        var parentElem = removableElement[j].parentNode;\n        while (removableElement[j].firstChild) {\n          parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n        }\n        parentElem.removeChild(removableElement[j]);\n      }\n    }\n    return clipBoardElem;\n  };\n  //Denied Attributes\n  PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n    var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n    if (clean) {\n      deniedAttrs.push('style');\n    }\n    for (var i = 0; i < deniedAttrs.length; i++) {\n      var removableAttrElement = clipBoardElem.querySelectorAll('[' + deniedAttrs[i] + ']');\n      for (var j = 0; j < removableAttrElement.length; j++) {\n        removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n      }\n    }\n    return clipBoardElem;\n  };\n  //Allowed Style Properties\n  PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n    var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n    allowedStyleProps.push('list-style-type', 'list-style');\n    var styleElement = clipBoardElem.querySelectorAll('[style]');\n    for (var i = 0; i < styleElement.length; i++) {\n      var allowedStyleValue = '';\n      var allowedStyleValueArray = [];\n      var styleValue = styleElement[i].getAttribute('style').split(';');\n      for (var k = 0; k < styleValue.length; k++) {\n        if (allowedStyleProps.indexOf(styleValue[k].split(':')[0].trim()) >= 0) {\n          allowedStyleValueArray.push(styleValue[k]);\n        }\n      }\n      styleElement[i].removeAttribute('style');\n      allowedStyleValue = allowedStyleValueArray.join(';').trim() === '' ? allowedStyleValueArray.join(';') : allowedStyleValueArray.join(';') + ';';\n      if (allowedStyleValue) {\n        styleElement[i].setAttribute('style', allowedStyleValue);\n      }\n    }\n    return clipBoardElem;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  PasteCleanup.prototype.getModuleName = function () {\n    return 'pasteCleanup';\n  };\n  return PasteCleanup;\n}();\nexport { PasteCleanup };","map":{"version":3,"names":["events","Popup","RadioButton","isNullOrUndefined","isNOU","detach","extend","addClass","getUniqueID","Browser","CLS_RTE_PASTE_KEEP_FORMAT","CLS_RTE_PASTE_REMOVE_FORMAT","CLS_RTE_PASTE_PLAIN_FORMAT","CLS_RTE_PASTE_OK","CLS_RTE_PASTE_CANCEL","CLS_RTE_DIALOG_MIN_HEIGHT","pasteCleanupGroupingTags","NodeSelection","EVENTS","RenderType","Uploader","classes","sanitizeHelper","convertToBlob","getDefaultValue","PasteCleanup","parent","serviceLocator","inlineNode","blockNode","isNotFromHtml","containsHtml","locator","renderFactory","getService","i10n","dialogRenderObj","addEventListener","prototype","nodeSelectionObj","isDestroyed","on","pasteClean","destroy","removeEventListener","off","e","_this","args","requestType","editorMode","event","value","imageproperties","clipboardData","getData","trigger","beforePasteCleanup","length","htmlRegex","RegExp","replace","test","file","items","getAsFile","notify","paste","text","callBack","b","formatter","editorManager","execCommand","imageFormatting","bind","divElement","createElement","innerHTML","splitBreakLine","observer","MS_WORD_CLEANUP","allowedStylePropertiesArray","pasteCleanupSettings","allowedStyleProps","a","trim","contentRenderer","getRenderer","Content","currentDocument","getDocument","range","getRange","saveSelection","save","afterPasteCleanup","updatedArgs","prompt","preventDefault","tempDivElem","textContent","querySelector","pasteDialog","plainText","plainFormatting","keepFormat","formatting","enterSplitText","split","contentInnerElem","i","contentWithSpace","makeSpace","spaceBetweenContent","spaceSplit","j","imgUploading","elm","allImgElm","querySelectorAll","insertImageSettings","saveUrl","base64Src","imgName","uploadImg","getAttribute","indexOf","push","fileList","base64ToFile","uploadMethod","path","saveFormat","getBlob","allImgElmId","classList","remove","removeAttribute","blopUrl","URL","createObjectURL","setAttribute","toolbarEnableDisable","state","inlineMode","enable","toolbarModule","baseToolbar","toolbarObj","disable","imgElem","uploadEle","document","body","appendChild","style","opacity","popupEle","element","contentEle","id","attrs","type","name","offsetY","iframeSettings","popupObj","relateTo","height","width","content","viewPortElement","position","X","Y","enableRtl","zIndex","close","isBlur","display","CLS_POPUP_OPEN","CLS_RTE_UPLOAD_POPUP","timeOut","size","setTimeout","refreshPopup","rawFile","beforeUploadArgs","uploadObj","asyncSettings","removeUrl","cssClass","CLS_RTE_DIALOG_UPLOAD","dropArea","inputElement","allowedExtensions","allowedTypes","toString","success","popupClose","uploading","isServerRendered","imageUploading","imageUploadingArgs","cancel","contentEditable","beforeUpload","JSON","parse","stringify","filesData","currentRequestHeader","currentRequest","customFormDatas","customFormData","uploadFiles","beforeImageUpload","failure","uploadFailure","canceling","nextSibling","selected","removing","appendTo","childNodes","fileData","validationMessages","minSize","maxSize","statusCode","createFileList","upload","getElementsByClassName","imageUploadFailed","imageUploadSuccess","url","src","imageElement","imgPosition","offsetTop","rtePosition","offsetHeight","refreshPosition","base64","filename","baseStr","typeStr","match","extension","decodeStr","atob","strLen","decodeArr","Uint8Array","charCodeAt","isIE","navigator","appVersion","blob","Blob","File","pasteArgs","imgElement","elements","imageValue","radioRender","keepRadioButton","label","getConstant","checked","isStringTemplate","keepFormatElement","cleanRadioButton","cleanFormatElement","plainTextRadioButton","plainTextElement","selectFormatting","keepChecked","cleanChecked","isHeight","preRTEHeight","dialogModel","buttons","click","dialog","hide","argument","buttonModel","isPrimary","args_1","header","target","isModal","visible","render","rteDialogWrapper","getID","destroyDialog","parseInt","show","rteDialogContainer","rteDialogWrapperChildLength","children","clean","clipBoardElem","className","styles","deniedTags","deniedAttributes","deniedAttrs","allowedStyle","restore","allImg","add","minWidth","maxWidth","getInsertImgMaxWidth","minHeight","maxHeight","addTempClass","returnArgs","imageElements","onSuccess","removeTempClass","toolbarRefresh","updateValue","allChild","classElm","detachInlineElements","getTextContent","firstElementChild","tagName","firstElm","spanElm","nodeName","insertBefore","k","hasChildNodes","removeEmptyElements","inElem","parElem","l","preNode","nodeValue","parentElement","previousElem","previousElementSibling","allElems","allAtr","attributes","findDetachEmptyElem","removableElement","emptyElements","detachableElement","tagGrouping","groupingTags","slice","keys","Object","values","map","key","addTags","concat","attributesfilter","userAttributes","allowedAttributeArray","deniedAttributeArray","allowedAttribute","join","deniedAttribute","select","parentElem","parentNode","firstChild","removeChild","removableAttrElement","styleElement","allowedStyleValue","allowedStyleValueArray","styleValue","getModuleName"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/paste-clean-up.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach, extend, addClass } from '@syncfusion/ej2-base';\nimport { getUniqueID, Browser } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { sanitizeHelper, convertToBlob, getDefaultValue } from '../base/util';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */ (function () {\n    function PasteCleanup(parent, serviceLocator) {\n        this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n            'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n            'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n            'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n            'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n        this.blockNode = ['div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'td', 'tr', 'th', 'tbody', 'tfoot', 'thead', 'table', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.isNotFromHtml = false;\n        this.containsHtml = false;\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    PasteCleanup.prototype.addEventListener = function () {\n        this.nodeSelectionObj = new NodeSelection();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pasteClean, this.pasteClean, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    PasteCleanup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    PasteCleanup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pasteClean, this.pasteClean);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    PasteCleanup.prototype.pasteClean = function (e) {\n        var _this = this;\n        var args = {\n            requestType: 'Paste',\n            editorMode: this.parent.editorMode,\n            event: e\n        };\n        var value = null;\n        var imageproperties;\n        if (e.args && !isNOU(e.args.clipboardData)) {\n            value = e.args.clipboardData.getData('text/html');\n        }\n        this.parent.trigger(events.beforePasteCleanup, { value: value });\n        if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n            if (value.length === 0) {\n                var htmlRegex = new RegExp(/<\\/[a-z][\\s\\S]*>/i);\n                value = e.args.clipboardData.getData('text/plain');\n                this.isNotFromHtml = value !== '' ? true : false;\n                value = value.replace(/</g, '&lt;');\n                value = value.replace(/>/g, '&gt;');\n                this.containsHtml = htmlRegex.test(value);\n                var file = e && e.args.clipboardData &&\n                    e.args.clipboardData.items.length > 0 ?\n                    e.args.clipboardData.items[0].getAsFile() : null;\n                this.parent.notify(events.paste, {\n                    file: file,\n                    args: e.args,\n                    text: value,\n                    callBack: function (b) {\n                        imageproperties = b;\n                        if (typeof (imageproperties) === 'object') {\n                            _this.parent.formatter.editorManager.execCommand('Images', 'Image', e.args, _this.imageFormatting.bind(_this, args), 'pasteCleanup', imageproperties, 'pasteCleanupModule');\n                        }\n                        else {\n                            value = imageproperties;\n                        }\n                    }\n                });\n                if (!htmlRegex.test(value)) {\n                    var divElement = this.parent.createElement('div');\n                    divElement.innerHTML = this.splitBreakLine(value);\n                    value = divElement.innerHTML;\n                }\n            }\n            else if (value.length > 0) {\n                this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n                    args: e.args,\n                    text: e.text,\n                    allowedStylePropertiesArray: this.parent.pasteCleanupSettings.allowedStyleProps,\n                    callBack: function (a) {\n                        value = a.trim();\n                    }\n                });\n            }\n            this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n            var currentDocument = this.contentRenderer.getDocument();\n            var range = this.nodeSelectionObj.getRange(currentDocument);\n            this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n            this.parent.trigger(events.afterPasteCleanup, { value: value }, function (updatedArgs) {\n                value = updatedArgs.value;\n            });\n            if (this.parent.pasteCleanupSettings.prompt) {\n                e.args.preventDefault();\n                var tempDivElem = this.parent.createElement('div');\n                tempDivElem.innerHTML = value;\n                if (tempDivElem.textContent !== '' || !isNOU(tempDivElem.querySelector('img')) ||\n                    !isNOU(tempDivElem.querySelector('table'))) {\n                    this.pasteDialog(value, args);\n                }\n            }\n            else if (this.parent.pasteCleanupSettings.plainText) {\n                e.args.preventDefault();\n                this.plainFormatting(value, args);\n            }\n            else if (this.parent.pasteCleanupSettings.keepFormat) {\n                e.args.preventDefault();\n                this.formatting(value, false, args);\n            }\n            else {\n                e.args.preventDefault();\n                this.formatting(value, true, args);\n            }\n        }\n    };\n    PasteCleanup.prototype.splitBreakLine = function (value) {\n        var enterSplitText = value.split('\\n');\n        var contentInnerElem = '';\n        for (var i = 0; i < enterSplitText.length; i++) {\n            if (enterSplitText[i].trim() === '') {\n                contentInnerElem += getDefaultValue(this.parent);\n            }\n            else {\n                var contentWithSpace = this.makeSpace(enterSplitText[i]);\n                contentInnerElem += '<p>' + contentWithSpace.trim() + '</p>';\n            }\n        }\n        return contentInnerElem;\n    };\n    PasteCleanup.prototype.makeSpace = function (enterSplitText) {\n        var contentWithSpace = '';\n        var spaceBetweenContent = true;\n        var spaceSplit = enterSplitText.split(' ');\n        for (var j = 0; j < spaceSplit.length; j++) {\n            if (spaceSplit[j].trim() === '') {\n                contentWithSpace += spaceBetweenContent ? '&nbsp;' : ' ';\n            }\n            else {\n                spaceBetweenContent = false;\n                contentWithSpace += spaceSplit[j] + ' ';\n            }\n        }\n        return contentWithSpace;\n    };\n    PasteCleanup.prototype.imgUploading = function (elm) {\n        var allImgElm = elm.querySelectorAll('.pasteContent_Img');\n        if (this.parent.insertImageSettings.saveUrl && allImgElm.length > 0) {\n            var base64Src = [];\n            var imgName = [];\n            var uploadImg = [];\n            for (var i = 0; i < allImgElm.length; i++) {\n                if (allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                    base64Src.push(allImgElm[i].getAttribute('src'));\n                    imgName.push(getUniqueID('rte_image'));\n                    uploadImg.push(allImgElm[i]);\n                }\n            }\n            var fileList = [];\n            for (var i = 0; i < base64Src.length; i++) {\n                fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n            }\n            for (var i = 0; i < fileList.length; i++) {\n                this.uploadMethod(fileList[i], uploadImg[i]);\n            }\n            if (isNOU(this.parent.insertImageSettings.path) &&\n                this.parent.insertImageSettings.saveFormat === 'Blob') {\n                this.getBlob(allImgElm);\n            }\n        }\n        else if (this.parent.insertImageSettings.saveFormat === 'Blob') {\n            this.getBlob(allImgElm);\n        }\n        var allImgElmId = elm.querySelectorAll('.pasteContent_Img');\n        for (var i = 0; i < allImgElmId.length; i++) {\n            allImgElmId[i].classList.remove('pasteContent_Img');\n            if (allImgElmId[i].getAttribute('class').trim() === '') {\n                allImgElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.getBlob = function (allImgElm) {\n        for (var i = 0; i < allImgElm.length; i++) {\n            if (!isNOU(allImgElm[i].getAttribute('src')) &&\n                allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                var blopUrl = URL.createObjectURL(convertToBlob(allImgElm[i].getAttribute('src')));\n                allImgElm[i].setAttribute('src', blopUrl);\n            }\n        }\n    };\n    PasteCleanup.prototype.toolbarEnableDisable = function (state) {\n        if (!this.parent.inlineMode.enable) {\n            this.parent.toolbarModule.baseToolbar.toolbarObj.disable(state);\n        }\n    };\n    PasteCleanup.prototype.uploadMethod = function (fileList, imgElem) {\n        var _this = this;\n        var uploadEle = document.createElement('div');\n        document.body.appendChild(uploadEle);\n        uploadEle.setAttribute('display', 'none');\n        imgElem.style.opacity = '0.5';\n        var popupEle = this.parent.createElement('div');\n        this.parent.element.appendChild(popupEle);\n        var contentEle = this.parent.createElement('input', {\n            id: this.parent.element.id + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n        var popupObj = new Popup(popupEle, {\n            relateTo: imgElem,\n            height: '85px',\n            width: '300px',\n            offsetY: offsetY,\n            content: contentEle,\n            viewPortElement: this.parent.element,\n            position: { X: 'center', Y: 'top' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                popupObj.destroy();\n                detach(popupObj.element);\n            }\n        });\n        popupObj.element.style.display = 'none';\n        addClass([popupObj.element], [classes.CLS_POPUP_OPEN, classes.CLS_RTE_UPLOAD_POPUP]);\n        var timeOut = fileList.size > 1000000 ? 300 : 100;\n        setTimeout(function () {\n            _this.refreshPopup(imgElem, popupObj);\n        }, timeOut);\n        var rawFile;\n        var beforeUploadArgs;\n        var uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n                removeUrl: this.parent.insertImageSettings.removeUrl\n            },\n            cssClass: classes.CLS_RTE_DIALOG_UPLOAD,\n            dropArea: this.parent.inputElement,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            success: function (e) {\n                setTimeout(function () {\n                    _this.popupClose(popupObj, uploadObj, imgElem, e);\n                }, 900);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n                        if (imageUploadingArgs.cancel) {\n                            if (!isNullOrUndefined(imgElem)) {\n                                detach(imgElem);\n                            }\n                            if (!isNullOrUndefined(popupObj.element)) {\n                                detach(popupObj.element);\n                            }\n                        }\n                        else {\n                            _this.parent.inputElement.contentEditable = 'false';\n                        }\n                    });\n                }\n            },\n            beforeUpload: function (args) {\n                if (_this.parent.isServerRendered) {\n                    beforeUploadArgs = JSON.parse(JSON.stringify(args));\n                    beforeUploadArgs.filesData = rawFile;\n                    args.cancel = true;\n                    _this.parent.trigger(events.imageUploading, beforeUploadArgs, function (beforeUploadArgs) {\n                        if (beforeUploadArgs.cancel) {\n                            return;\n                        }\n                        _this.toolbarEnableDisable(true);\n                        /* eslint-disable */\n                        uploadObj.currentRequestHeader = beforeUploadArgs.currentRequest ?\n                            beforeUploadArgs.currentRequest : uploadObj.currentRequestHeader;\n                        uploadObj.customFormDatas = beforeUploadArgs.customFormData && beforeUploadArgs.customFormData.length > 0 ?\n                            beforeUploadArgs.customFormData : uploadObj.customFormDatas;\n                        uploadObj.uploadFiles(rawFile, null);\n                        /* eslint-enable */\n                    });\n                }\n                else {\n                    _this.parent.trigger(events.beforeImageUpload, args);\n                    _this.toolbarEnableDisable(true);\n                }\n            },\n            // eslint-disable-next-line\n            failure: function (e) {\n                setTimeout(function () {\n                    _this.uploadFailure(imgElem, uploadObj, popupObj, e);\n                }, 900);\n            },\n            canceling: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                popupObj.close();\n            },\n            selected: function (e) {\n                e.cancel = true;\n                if (_this.parent.isServerRendered) {\n                    rawFile = e.filesData;\n                }\n            },\n            removing: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                popupObj.close();\n            }\n        });\n        uploadObj.appendTo(popupObj.element.childNodes[0]);\n        /* eslint-disable */\n        var fileData = [{\n                name: fileList.name,\n                rawFile: fileList,\n                size: fileList.size,\n                type: fileList.type,\n                validationMessages: { minSize: \"\", maxSize: \"\" },\n                statusCode: '1'\n            }];\n        uploadObj.createFileList(fileData);\n        uploadObj.filesData.push(fileData[0]);\n        /* eslint-enable */\n        rawFile = fileData;\n        uploadObj.upload(fileData);\n        popupObj.element.getElementsByClassName('e-file-select-wrap')[0].style.display = 'none';\n        detach(popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap'));\n    };\n    PasteCleanup.prototype.uploadFailure = function (imgElem, uploadObj, popupObj, e) {\n        this.parent.inputElement.contentEditable = 'true';\n        detach(imgElem);\n        if (popupObj) {\n            popupObj.close();\n        }\n        this.parent.trigger(events.imageUploadFailed, e);\n        uploadObj.destroy();\n    };\n    PasteCleanup.prototype.popupClose = function (popupObj, uploadObj, imgElem, e) {\n        var _this = this;\n        this.parent.inputElement.contentEditable = 'true';\n        e.element = imgElem;\n        this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n            if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                var url = _this.parent.insertImageSettings.path + e.file.name;\n                imgElem.src = url;\n                imgElem.setAttribute('alt', e.file.name);\n            }\n        });\n        popupObj.close();\n        imgElem.style.opacity = '1';\n        uploadObj.destroy();\n        this.toolbarEnableDisable(false);\n    };\n    PasteCleanup.prototype.refreshPopup = function (imageElement, popupObj) {\n        var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop +\n            imageElement.offsetTop : imageElement.offsetTop;\n        var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n        if (imgPosition > rtePosition) {\n            popupObj.relateTo = this.parent.inputElement;\n            popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n            popupObj.element.style.display = 'block';\n        }\n        else {\n            if (popupObj) {\n                popupObj.refreshPosition(imageElement);\n                popupObj.element.style.display = 'block';\n            }\n        }\n    };\n    PasteCleanup.prototype.base64ToFile = function (base64, filename) {\n        var baseStr = base64.split(',');\n        var typeStr = baseStr[0].match(/:(.*?);/)[1];\n        var extension = typeStr.split('/')[1];\n        var decodeStr = atob(baseStr[1]);\n        var strLen = decodeStr.length;\n        var decodeArr = new Uint8Array(strLen);\n        while (strLen--) {\n            decodeArr[strLen] = decodeStr.charCodeAt(strLen);\n        }\n        if (Browser.isIE || navigator.appVersion.indexOf('Edge') > -1) {\n            var blob = new Blob([decodeArr], { type: extension });\n            extend(blob, { name: filename + '.' + (!isNOU(extension) ? extension : '') });\n            return blob;\n        }\n        else {\n            return new File([decodeArr], filename + '.' + (!isNOU(extension) ? extension : ''), { type: extension });\n        }\n    };\n    /**\n     * Method for image formatting when pasting\n     *\n     * @param {Object} pasteArgs - specifies the paste arguments.\n     * @param {Element []} imgElement - specifies the array elements.\n     * @returns {void}\n     * @hidden\n\n     */\n    PasteCleanup.prototype.imageFormatting = function (pasteArgs, imgElement) {\n        var imageElement = this.parent.createElement('span');\n        imageElement.appendChild(imgElement.elements[0]);\n        var imageValue = imageElement.innerHTML;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n        if (this.parent.pasteCleanupSettings.prompt) {\n            this.pasteDialog(imageValue, pasteArgs);\n        }\n        else if (this.parent.pasteCleanupSettings.plainText) {\n            this.plainFormatting(imageValue, pasteArgs);\n        }\n        else if (this.parent.pasteCleanupSettings.keepFormat) {\n            this.formatting(imageValue, false, pasteArgs);\n        }\n        else {\n            this.formatting(imageValue, true, pasteArgs);\n        }\n    };\n    PasteCleanup.prototype.radioRender = function () {\n        var keepRadioButton = new RadioButton({ label: this.i10n.getConstant('keepFormat'),\n            name: 'pasteOption', checked: true });\n        keepRadioButton.isStringTemplate = true;\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        keepRadioButton.appendTo(keepFormatElement);\n        var cleanRadioButton = new RadioButton({ label: this.i10n.getConstant('cleanFormat'), name: 'pasteOption' });\n        cleanRadioButton.isStringTemplate = true;\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        cleanRadioButton.appendTo(cleanFormatElement);\n        var plainTextRadioButton = new RadioButton({ label: this.i10n.getConstant('plainText'), name: 'pasteOption' });\n        plainTextRadioButton.isStringTemplate = true;\n        var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n        plainTextRadioButton.appendTo(plainTextElement);\n    };\n    PasteCleanup.prototype.selectFormatting = function (value, args, keepChecked, cleanChecked) {\n        if (keepChecked) {\n            this.formatting(value, false, args);\n        }\n        else if (cleanChecked) {\n            this.formatting(value, true, args);\n        }\n        else {\n            this.plainFormatting(value, args);\n        }\n    };\n    PasteCleanup.prototype.pasteDialog = function (value, args) {\n        var _this = this;\n        var isHeight = false;\n        var preRTEHeight = this.parent.height;\n        var dialogModel = {\n            buttons: [\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            var keepChecked = _this.parent.element.querySelector('#keepFormating').checked;\n                            var cleanChecked = _this.parent.element.querySelector('#cleanFormat').checked;\n                            dialog.hide();\n                            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n                            isHeight = false;\n                            var argument = dialog;\n                            _this.dialogRenderObj.close(argument);\n                            dialog.destroy();\n                            _this.selectFormatting(value, args, keepChecked, cleanChecked);\n                        }\n                    },\n                    buttonModel: {\n                        isPrimary: true,\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n                        content: this.i10n.getConstant('pasteDialogOk')\n                    }\n                },\n                {\n                    click: function () {\n                        if (!dialog.isDestroyed) {\n                            dialog.hide();\n                            _this.parent.height = isHeight ? preRTEHeight : _this.parent.height;\n                            isHeight = false;\n                            var args_1 = dialog;\n                            _this.dialogRenderObj.close(args_1);\n                            dialog.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n                        content: this.i10n.getConstant('pasteDialogCancel')\n                    }\n                }\n            ],\n            header: this.i10n.getConstant('pasteFormat'),\n            content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' +\n                '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' +\n                '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' +\n                '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n            target: this.parent.element,\n            width: '300px',\n            height: '265px',\n            cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n            isModal: true,\n            visible: false\n        };\n        var dialog = this.dialogRenderObj.render(dialogModel);\n        var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID()\n            + '_pasteCleanupDialog');\n        if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n            this.destroyDialog(rteDialogWrapper);\n        }\n        if (rteDialogWrapper === null) {\n            rteDialogWrapper = this.parent.createElement('div', {\n                id: this.parent.getID() + '_pasteCleanupDialog'\n            });\n            this.parent.element.appendChild(rteDialogWrapper);\n        }\n        dialog.appendTo(rteDialogWrapper);\n        this.radioRender();\n        /* eslint-disable */\n        if (this.parent.element.offsetHeight < parseInt(dialog.height.split('px')[0], null)) {\n            this.parent.height = parseInt(dialog.height.split('px')[0], null) + 40;\n            /* eslint-enable */\n            isHeight = true;\n        }\n        dialog.show();\n    };\n    PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n        var rteDialogContainer = this.parent.element.querySelector('.e-dlg-container');\n        detach(rteDialogContainer);\n        var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n        for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n            detach(rteDialogWrapper.children[0]);\n        }\n    };\n    PasteCleanup.prototype.formatting = function (value, clean, args) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        if (this.isNotFromHtml && this.containsHtml) {\n            value = this.splitBreakLine(value);\n        }\n        clipBoardElem.innerHTML = value;\n        if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n            clipBoardElem = this.deniedTags(clipBoardElem);\n        }\n        if (clean) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n            clipBoardElem = this.allowedStyle(clipBoardElem);\n        }\n        this.saveSelection.restore();\n        clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n        var allImg = clipBoardElem.querySelectorAll('img');\n        for (var i = 0; i < allImg.length; i++) {\n            allImg[i].classList.add('pasteContent_Img');\n            if (this.parent.insertImageSettings.width !== 'auto') {\n                allImg[i].setAttribute('width', this.parent.insertImageSettings.width);\n            }\n            if (this.parent.insertImageSettings.minWidth !== '0' && this.parent.insertImageSettings.minWidth !== 0) {\n                allImg[i].style.minWidth = this.parent.insertImageSettings.minWidth.toString();\n            }\n            if (this.parent.insertImageSettings.maxWidth !== null) {\n                allImg[i].style.maxWidth = this.parent.getInsertImgMaxWidth().toString();\n            }\n            if (this.parent.insertImageSettings.height !== 'auto') {\n                allImg[i].setAttribute('height', this.parent.insertImageSettings.height);\n            }\n            if (this.parent.insertImageSettings.minHeight !== '0' && this.parent.insertImageSettings.minHeight !== 0) {\n                allImg[i].style.minHeight = this.parent.insertImageSettings.minHeight.toString();\n            }\n            if (this.parent.insertImageSettings.maxHeight !== null) {\n                allImg[i].style.maxHeight = this.parent.insertImageSettings.maxHeight.toString();\n            }\n        }\n        this.addTempClass(clipBoardElem);\n        if (clipBoardElem.textContent !== '' || !isNOU(clipBoardElem.querySelector('img')) ||\n            !isNOU(clipBoardElem.querySelector('table'))) {\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem);\n            this.removeTempClass();\n            this.parent.notify(events.toolbarRefresh, {});\n            this.imgUploading(this.parent.inputElement);\n            if (this.parent.iframeSettings.enable) {\n                this.parent.updateValue();\n            }\n        }\n    };\n    PasteCleanup.prototype.addTempClass = function (clipBoardElem) {\n        var allChild = clipBoardElem.children;\n        for (var i = 0; i < allChild.length; i++) {\n            allChild[i].classList.add('pasteContent_RTE');\n        }\n    };\n    PasteCleanup.prototype.removeTempClass = function () {\n        var classElm = this.parent.inputElement.querySelectorAll('.pasteContent_RTE');\n        for (var i = 0; i < classElm.length; i++) {\n            classElm[i].classList.remove('pasteContent_RTE');\n            if (classElm[i].getAttribute('class') === '') {\n                classElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.sanitizeHelper = function (value) {\n        value = sanitizeHelper(value, this.parent);\n        return value;\n    };\n    //Plain Formatting\n    PasteCleanup.prototype.plainFormatting = function (value, args) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        clipBoardElem.innerHTML = value;\n        this.detachInlineElements(clipBoardElem);\n        this.getTextContent(clipBoardElem);\n        if (clipBoardElem.textContent.trim() !== '') {\n            if (!isNOU(clipBoardElem.firstElementChild) && clipBoardElem.firstElementChild.tagName !== 'BR') {\n                var firstElm = clipBoardElem.firstElementChild;\n                if (!isNOU(clipBoardElem.firstElementChild)) {\n                    var spanElm = this.parent.createElement('span');\n                    for (var i = 0, j = 0; i < firstElm.childNodes.length; i++, j++) {\n                        if (firstElm.childNodes[i].nodeName === '#text') {\n                            spanElm.appendChild(firstElm.childNodes[i]);\n                            clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                            i--;\n                        }\n                        else if (firstElm.childNodes[i].nodeName !== '#text' && j === 0) {\n                            for (var k = 0; k < firstElm.childNodes[i].childNodes.length; k++) {\n                                spanElm.appendChild(firstElm.childNodes[i].childNodes[k]);\n                                clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                                k--;\n                            }\n                            i--;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    if (!firstElm.hasChildNodes()) {\n                        detach(firstElm);\n                    }\n                }\n            }\n            this.removeEmptyElements(clipBoardElem);\n            this.saveSelection.restore();\n            clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n            this.addTempClass(clipBoardElem);\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem);\n            this.removeTempClass();\n        }\n        else {\n            this.saveSelection.restore();\n            extend(args, { elements: [] }, true);\n            this.parent.formatter.onSuccess(this.parent, args);\n        }\n    };\n    PasteCleanup.prototype.getTextContent = function (clipBoardElem) {\n        for (var i = 0; i < this.blockNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.blockNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                var parElem = void 0;\n                for (var k = 0, l = 0, preNode = void 0; k < inElem[j].childNodes.length; k++, l++) {\n                    if (inElem[j].childNodes[k].nodeName === 'DIV' || inElem[j].childNodes[k].nodeName === 'P' ||\n                        (inElem[j].childNodes[k].nodeName === '#text' &&\n                            (inElem[j].childNodes[k].nodeValue.replace(/\\u00a0/g, '&nbsp;') !== '&nbsp;') &&\n                            inElem[j].childNodes[k].textContent.trim() === '')) {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                        k--;\n                    }\n                    else {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        if (preNode === 'text') {\n                            var previousElem = parElem.previousElementSibling;\n                            previousElem.appendChild(inElem[j].childNodes[k]);\n                        }\n                        else {\n                            var divElement = this.parent.createElement('div', { id: 'newDiv' });\n                            divElement.appendChild(inElem[j].childNodes[k]);\n                            parElem.parentElement.insertBefore(divElement, parElem);\n                        }\n                        k--;\n                        preNode = 'text';\n                    }\n                }\n                if (!isNOU(parElem)) {\n                    detach(parElem);\n                }\n            }\n        }\n        var allElems = clipBoardElem.querySelectorAll('*');\n        for (var i = 0; i < allElems.length; i++) {\n            var allAtr = allElems[i].attributes;\n            for (var j = 0; j < allAtr.length; j++) {\n                allElems[i].removeAttribute(allAtr[j].name);\n                j--;\n            }\n        }\n    };\n    PasteCleanup.prototype.detachInlineElements = function (clipBoardElem) {\n        for (var i = 0; i < this.inlineNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.inlineNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                var parElem = void 0;\n                for (var k = 0; k < inElem[j].childNodes.length; k++) {\n                    parElem = inElem[j].childNodes[k].parentElement;\n                    inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                    k--;\n                }\n                if (!isNOU(parElem)) {\n                    detach(parElem);\n                }\n            }\n        }\n    };\n    PasteCleanup.prototype.findDetachEmptyElem = function (element) {\n        var removableElement;\n        if (!isNOU(element.parentElement)) {\n            if (element.parentElement.textContent.trim() === '' &&\n                element.parentElement.getAttribute('class') !== 'pasteContent') {\n                removableElement = this.findDetachEmptyElem(element.parentElement);\n            }\n            else {\n                removableElement = element;\n            }\n        }\n        else {\n            removableElement = null;\n        }\n        return removableElement;\n    };\n    PasteCleanup.prototype.removeEmptyElements = function (element) {\n        var emptyElements = element.querySelectorAll(':empty');\n        for (var i = 0; i < emptyElements.length; i++) {\n            if (emptyElements[i].tagName !== 'BR') {\n                var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n                if (!isNOU(detachableElement)) {\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    //GroupingTags\n    PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n        var groupingTags = deniedTags.slice();\n        var keys = Object.keys(pasteCleanupGroupingTags);\n        var values = keys.map(function (key) {\n            return pasteCleanupGroupingTags[key];\n        });\n        var addTags = [];\n        for (var i = 0; i < groupingTags.length; i++) {\n            //The value split using '[' because to retrieve the tag name from the user given format which may contain tag with attributes\n            if (groupingTags[i].split('[').length > 1) {\n                groupingTags[i] = groupingTags[i].split('[')[0].trim();\n            }\n            if (keys.indexOf(groupingTags[i]) > -1) {\n                for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n                    if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 &&\n                        addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n                        addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n                    }\n                }\n            }\n        }\n        return deniedTags = deniedTags.concat(addTags);\n    };\n    //Filter Attributes in Denied Tags\n    PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n        for (var i = 0; i < deniedTags.length; i++) {\n            if (deniedTags[i].split('[').length > 1) {\n                var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n                var allowedAttributeArray = [];\n                var deniedAttributeArray = [];\n                for (var j = 0; j < userAttributes.length; j++) {\n                    // eslint-disable-next-line\n                    userAttributes[j].indexOf('!') < 0 ? allowedAttributeArray.push(userAttributes[j].trim())\n                        : deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n                }\n                var allowedAttribute = allowedAttributeArray.length > 1 ?\n                    (allowedAttributeArray.join('][')) : (allowedAttributeArray.join());\n                var deniedAttribute = deniedAttributeArray.length > 1 ?\n                    deniedAttributeArray.join('][') : (deniedAttributeArray.join());\n                if (deniedAttribute.length > 0) {\n                    var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] +\n                        '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n                    deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n                }\n                else {\n                    deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n                }\n            }\n        }\n        return deniedTags;\n    };\n    //Denied Tags\n    PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n        var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n        deniedTags = this.attributesfilter(deniedTags);\n        deniedTags = this.tagGrouping(deniedTags);\n        for (var i = 0; i < deniedTags.length; i++) {\n            var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n            for (var j = removableElement.length - 1; j >= 0; j--) {\n                var parentElem = removableElement[j].parentNode;\n                while (removableElement[j].firstChild) {\n                    parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n                }\n                parentElem.removeChild(removableElement[j]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Denied Attributes\n    PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n        var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n        if (clean) {\n            deniedAttrs.push('style');\n        }\n        for (var i = 0; i < deniedAttrs.length; i++) {\n            var removableAttrElement = clipBoardElem.\n                querySelectorAll('[' + deniedAttrs[i] + ']');\n            for (var j = 0; j < removableAttrElement.length; j++) {\n                removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Allowed Style Properties\n    PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n        var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n        allowedStyleProps.push('list-style-type', 'list-style');\n        var styleElement = clipBoardElem.querySelectorAll('[style]');\n        for (var i = 0; i < styleElement.length; i++) {\n            var allowedStyleValue = '';\n            var allowedStyleValueArray = [];\n            var styleValue = styleElement[i].getAttribute('style').split(';');\n            for (var k = 0; k < styleValue.length; k++) {\n                if (allowedStyleProps.indexOf(styleValue[k].split(':')[0].trim()) >= 0) {\n                    allowedStyleValueArray.push(styleValue[k]);\n                }\n            }\n            styleElement[i].removeAttribute('style');\n            allowedStyleValue = allowedStyleValueArray.join(';').trim() === '' ?\n                allowedStyleValueArray.join(';') : allowedStyleValueArray.join(';') + ';';\n            if (allowedStyleValue) {\n                styleElement[i].setAttribute('style', allowedStyleValue);\n            }\n        }\n        return clipBoardElem;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    PasteCleanup.prototype.getModuleName = function () {\n        return 'pasteCleanup';\n    };\n    return PasteCleanup;\n}());\nexport { PasteCleanup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}