{"ast":null,"code":"import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar ClearFormat = /** @class */function () {\n  /**\n   * Constructor for creating the clear format plugin\n   *\n   * @param {MarkdownParser} parent - specifies the parent element\n   * @hidden\n    */\n  function ClearFormat(parent) {\n    this.parent = parent;\n    this.selection = this.parent.markdownSelection;\n    this.addEventListener();\n  }\n  ClearFormat.prototype.addEventListener = function () {\n    this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n  };\n  ClearFormat.prototype.replaceRegex = function (data) {\n    /* eslint-disable */\n    return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&').replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^').replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.').replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?').replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-').replace(/\\&/ig, '\\\\&');\n    /* eslint-enable */\n  };\n\n  ClearFormat.prototype.clearSelectionTags = function (text) {\n    var data = this.parent.selectionTags;\n    var keys = Object.keys(data);\n    for (var num = 0; num < keys.length; num++) {\n      var key = keys[num];\n      // eslint-disable-next-line\n      if (data.hasOwnProperty(key) && data[key] !== '') {\n        var expString = this.replaceRegex(data[key]);\n        var regExp = void 0;\n        var startExp = data[key].length;\n        var endExp = data[key] === '<sup>' || data[key] === '<sub>' ? data[key].length + 1 : data[key].length;\n        if (data[key] === '<sup>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n        } else if (data[key] === '<sub>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n        } else {\n          regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n        }\n        var val = text.match(regExp);\n        for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n          text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n        }\n      }\n    }\n    return text;\n  };\n  ClearFormat.prototype.clearFormatTags = function (text) {\n    var lines = text.split('\\n');\n    return this.clearFormatLines(lines);\n  };\n  ClearFormat.prototype.clearFormatLines = function (lines) {\n    var tags = [this.parent.formatTags, this.parent.listTags];\n    var str = '';\n    for (var len = 0; len < lines.length; len++) {\n      for (var num = 0; num < tags.length; num++) {\n        var data = tags[num];\n        var keys = Object.keys(data);\n        for (var index = 0; index < keys.length; index++) {\n          var key = keys[index];\n          // eslint-disable-next-line\n          if (data.hasOwnProperty(key) && data[key] !== '') {\n            if (lines[len].indexOf(data[key]) === 0) {\n              lines[len] = lines[len].replace(data[key], '');\n              lines[len] = this.clearFormatLines([lines[len]]);\n            }\n          }\n        }\n      }\n      str = str + lines[len] + (len !== lines.length - 1 ? '\\n' : '');\n    }\n    return str;\n  };\n  ClearFormat.prototype.clear = function (e) {\n    var textArea = this.parent.element;\n    textArea.focus();\n    var start = textArea.selectionStart;\n    var end = textArea.selectionEnd;\n    var text = this.selection.getSelectedText(textArea);\n    text = this.clearSelectionTags(text);\n    text = this.clearFormatTags(text);\n    textArea.value = textArea.value.substr(0, start) + text + textArea.value.substr(end, textArea.value.length);\n    this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n    this.restore(textArea, start, start + text.length, e);\n  };\n  ClearFormat.prototype.restore = function (textArea, start, end, event) {\n    this.selection.save(start, end);\n    this.selection.restore(textArea);\n    if (event && event.callBack) {\n      event.callBack({\n        requestType: event.subCommand,\n        selectedText: this.selection.getSelectedText(textArea),\n        editorMode: 'Markdown',\n        event: event.event\n      });\n    }\n  };\n  return ClearFormat;\n}();\nexport { ClearFormat };","map":{"version":3,"names":["CONSTANT","ClearFormat","parent","selection","markdownSelection","addEventListener","prototype","observer","on","CLEAR_COMMAND","clear","replaceRegex","data","replace","clearSelectionTags","text","selectionTags","keys","Object","num","length","key","hasOwnProperty","expString","regExp","startExp","endExp","RegExp","val","match","index","substr","clearFormatTags","lines","split","clearFormatLines","tags","formatTags","listTags","str","len","indexOf","e","textArea","element","focus","start","selectionStart","end","selectionEnd","getSelectedText","value","setSelection","restore","event","save","callBack","requestType","subCommand","selectedText","editorMode"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/markdown-parser/plugin/clearformat.js"],"sourcesContent":["import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        /* eslint-disable */\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n        /* eslint-enable */\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            // eslint-disable-next-line\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[key]);\n                var regExp = void 0;\n                var startExp = data[key].length;\n                var endExp = (data[key] === '<sup>' || data[key] === '<sub>') ? data[key].length + 1 : data[key].length;\n                if (data[key] === '<sup>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[key] === '<sub>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    // eslint-disable-next-line\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[key]) === 0) {\n                            lines[len] = lines[len].replace(data[key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}