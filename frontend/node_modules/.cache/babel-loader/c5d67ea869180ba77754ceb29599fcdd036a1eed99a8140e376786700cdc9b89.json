{"ast":null,"code":"import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */function () {\n  function Count(parent, serviceLocator) {\n    this.parent = parent;\n    this.locator = serviceLocator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.addEventListener();\n  }\n  Count.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editPanel = this.contentRenderer.getEditPanel();\n    this.addEventListener();\n  };\n  /**\n   * renderCount method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Count.prototype.renderCount = function () {\n    this.initializeInstance();\n    this.element = this.parent.createElement('span', {\n      className: CLS_COUNT\n    });\n    this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n    this.appendCount();\n    if (this.parent.maxLength !== -1) {\n      this.charCountBackground(this.htmlLength);\n    }\n  };\n  Count.prototype.appendCount = function () {\n    var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() : this.editPanel.textContent.trim();\n    if (this.parent.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n      this.htmlLength = htmlText.replace(/\\u200B/g, '').length;\n    } else {\n      this.htmlLength = htmlText.length;\n    }\n    var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n    this.element.innerHTML = string;\n  };\n  Count.prototype.charCountBackground = function (htmlLength) {\n    var percentage = htmlLength / this.parent.maxLength * 100;\n    if (percentage < 85) {\n      this.element.classList.remove(CLS_WARNING);\n      this.element.classList.remove(CLS_ERROR);\n    } else if (percentage > 85 && percentage <= 90) {\n      this.element.classList.remove(CLS_ERROR);\n      this.element.classList.add(CLS_WARNING);\n    } else if (percentage > 90) {\n      this.element.classList.remove(CLS_WARNING);\n      this.element.classList.add(CLS_ERROR);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n    */\n  Count.prototype.refresh = function () {\n    if (!isNullOrUndefined(this.editPanel)) {\n      this.appendCount();\n      if (this.parent.maxLength !== -1) {\n        this.charCountBackground(this.htmlLength);\n      }\n    }\n  };\n  /**\n   * Destroys the Count.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Count.prototype.destroy = function () {\n    if (this.element && !isNullOrUndefined(this.parent.element.querySelector('.' + CLS_COUNT))) {\n      detach(this.element);\n    }\n    this.removeEventListener();\n  };\n  Count.prototype.toggle = function (e) {\n    this.element.style.display = e.member === 'viewSource' ? 'none' : 'block';\n  };\n  Count.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.initialEnd, this.renderCount, this);\n    this.parent.on(events.keyUp, this.refresh, this);\n    this.parent.on(events.count, this.refresh, this);\n    this.parent.on(events.refreshBegin, this.refresh, this);\n    this.parent.on(events.mouseDown, this.refresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.sourceCode, this.toggle, this);\n    this.parent.on(events.updateSource, this.toggle, this);\n  };\n  Count.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.initialEnd, this.renderCount);\n    this.parent.off(events.keyUp, this.refresh);\n    this.parent.off(events.refreshBegin, this.refresh);\n    this.parent.off(events.count, this.refresh);\n    this.parent.off(events.mouseDown, this.refresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.sourceCode, this.toggle);\n    this.parent.off(events.updateSource, this.toggle);\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the string value\n   */\n  Count.prototype.getModuleName = function () {\n    return 'count';\n  };\n  return Count;\n}();\nexport { Count };","map":{"version":3,"names":["detach","isNullOrUndefined","events","RenderType","CLS_COUNT","CLS_WARNING","CLS_ERROR","Count","parent","serviceLocator","locator","renderFactory","getService","addEventListener","prototype","initializeInstance","contentRenderer","getRenderer","Content","editPanel","getEditPanel","renderCount","element","createElement","className","getPanel","parentElement","appendChild","appendCount","maxLength","charCountBackground","htmlLength","htmlText","editorMode","value","trim","textContent","indexOf","replace","length","string","innerHTML","percentage","classList","remove","add","refresh","destroy","querySelector","removeEventListener","toggle","e","style","display","member","isDestroyed","on","initialEnd","keyUp","count","refreshBegin","mouseDown","sourceCode","updateSource","off","getModuleName"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/count.js"],"sourcesContent":["import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n        this.addEventListener();\n    };\n    /**\n     * renderCount method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() :\n            this.editPanel.textContent.trim();\n        if (this.parent.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n            this.htmlLength = htmlText.replace(/\\u200B/g, '').length;\n        }\n        else {\n            this.htmlLength = htmlText.length;\n        }\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.destroy = function () {\n        if (this.element && !isNullOrUndefined(this.parent.element.querySelector('.' + CLS_COUNT))) {\n            detach(this.element);\n        }\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.renderCount, this);\n        this.parent.on(events.keyUp, this.refresh, this);\n        this.parent.on(events.count, this.refresh, this);\n        this.parent.on(events.refreshBegin, this.refresh, this);\n        this.parent.on(events.mouseDown, this.refresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.sourceCode, this.toggle, this);\n        this.parent.on(events.updateSource, this.toggle, this);\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}