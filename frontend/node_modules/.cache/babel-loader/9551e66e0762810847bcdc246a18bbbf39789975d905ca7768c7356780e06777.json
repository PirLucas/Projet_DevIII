{"ast":null,"code":"import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */function () {\n  function Toolbar(parent, serviceLocator) {\n    this.parent = parent;\n    this.isToolbar = false;\n    this.locator = serviceLocator;\n    this.isTransformChild = false;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    model.updateDropDownLocale(this.parent);\n    updateDropDownFontFormatLocale(this.parent);\n    this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n    this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n    this.addEventListener();\n    if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n      extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n    } else {\n      this.tools = model.tools;\n    }\n  }\n  Toolbar.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editableElement = this.contentRenderer.getEditPanel();\n    this.editPanel = this.contentRenderer.getPanel();\n  };\n  Toolbar.prototype.toolbarBindEvent = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n        keyAction: this.toolBarKeyDown.bind(this),\n        keyConfigs: this.parent.formatter.keyConfig,\n        eventName: 'keydown'\n      });\n    }\n  };\n  Toolbar.prototype.toolBarKeyDown = function (e) {\n    switch (e.action) {\n      case 'escape':\n        this.parent.contentModule.getEditPanel().focus();\n        break;\n    }\n  };\n  Toolbar.prototype.createToolbarElement = function () {\n    this.tbElement = this.parent.createElement('div', {\n      id: this.parent.getID() + '_toolbar'\n    });\n    if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    } else {\n      if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n        this.tbWrapper = this.parent.createElement('div', {\n          id: this.parent.getID() + '_toolbar_wrapper',\n          innerHTML: this.tbElement.outerHTML,\n          className: classes.CLS_TB_WRAP\n        });\n        this.tbElement = this.tbWrapper.firstElementChild;\n        this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n      } else {\n        this.parent.element.insertBefore(this.tbElement, this.editPanel);\n      }\n    }\n  };\n  Toolbar.prototype.getToolbarMode = function () {\n    var tbMode;\n    switch (this.parent.toolbarSettings.type) {\n      case ToolbarType.Expand:\n        tbMode = 'Extended';\n        break;\n      case ToolbarType.Scrollable:\n        tbMode = 'Scrollable';\n        break;\n      default:\n        tbMode = 'MultiRow';\n    }\n    if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tbMode = ToolbarType.Scrollable;\n    }\n    return tbMode;\n  };\n  Toolbar.prototype.checkToolbarResponsive = function (ele) {\n    if (!Browser.isDevice || isIDevice()) {\n      return false;\n    }\n    var tBarMode;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tBarMode = ToolbarType.MultiRow;\n    } else {\n      tBarMode = this.parent.toolbarSettings.type;\n    }\n    this.baseToolbar.render({\n      container: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items,\n      mode: tBarMode,\n      target: ele\n    });\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      addClass([ele], ['e-rte-tb-mobile']);\n      if (this.parent.inlineMode.enable) {\n        this.addFixedTBarClass();\n      } else {\n        addClass([ele], [classes.CLS_TB_STATIC]);\n      }\n    }\n    this.wireEvents();\n    this.dropDownModule.renderDropDowns({\n      container: ele,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    this.parent.notify(events.renderColorPicker, {\n      container: this.tbElement,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    return true;\n  };\n  Toolbar.prototype.checkIsTransformChild = function () {\n    this.isTransformChild = false;\n    var transformElements = selectAll('[style*=\"transform\"]', document);\n    for (var i = 0; i < transformElements.length; i++) {\n      if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n        this.isTransformChild = true;\n        break;\n      }\n    }\n  };\n  Toolbar.prototype.toggleFloatClass = function (e) {\n    var topValue;\n    var isBody = false;\n    var isFloat = false;\n    var scrollParent;\n    var floatOffset = this.parent.floatingToolbarOffset;\n    if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n      scrollParent = e.target.body;\n    } else if (e && e.target !== document) {\n      scrollParent = e.target;\n    } else {\n      isBody = true;\n      scrollParent = document.body;\n    }\n    var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n    if (this.isTransformChild) {\n      topValue = 0;\n      var scrollParentRelativeTop = 0;\n      var trgHeight = this.parent.element.offsetHeight;\n      if (isBody) {\n        var bodyStyle = window.getComputedStyle(scrollParent);\n        scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n      }\n      var targetTop = this.parent.element.getBoundingClientRect().top;\n      var scrollParentYOffset = Browser.isMSPointer && isBody ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n      var scrollParentRect = scrollParent.getBoundingClientRect();\n      var scrollParentTop = !isBody ? scrollParentRect.top : scrollParentRect.top + scrollParentYOffset;\n      var outOfRange = targetTop - (!isBody ? scrollParentTop : 0) + trgHeight > tbHeight + floatOffset ? false : true;\n      if (targetTop > scrollParentTop + floatOffset || targetTop < -trgHeight || (targetTop < 0 ? outOfRange : false)) {\n        isFloat = false;\n        removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n      } else if (targetTop < scrollParentTop + floatOffset) {\n        if (targetTop < 0) {\n          topValue = -targetTop + scrollParentTop;\n        } else {\n          topValue = scrollParentTop - targetTop;\n        }\n        topValue = isBody ? topValue - scrollParentRelativeTop : topValue;\n        addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n        isFloat = true;\n      }\n    } else {\n      var parent_1 = this.parent.element.getBoundingClientRect();\n      if (window.innerHeight < parent_1.top) {\n        return;\n      }\n      topValue = e && e.target !== document ? scrollParent.getBoundingClientRect().top : 0;\n      if (parent_1.bottom < floatOffset + tbHeight + topValue || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n        isFloat = false;\n      } else if (parent_1.top < floatOffset) {\n        isFloat = true;\n      }\n    }\n    if (!isFloat) {\n      removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        top: 0 + 'px',\n        width: '100%'\n      });\n    } else {\n      addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        width: this.parent.element.offsetWidth + 'px',\n        top: floatOffset + topValue + 'px'\n      });\n    }\n  };\n  Toolbar.prototype.renderToolbar = function () {\n    this.initializeInstance();\n    this.createToolbarElement();\n    if (this.checkToolbarResponsive(this.tbElement)) {\n      return;\n    }\n    if (this.parent.inlineMode.enable) {\n      this.parent.notify(events.renderInlineToolbar, {});\n    } else {\n      this.baseToolbar.render({\n        container: 'toolbar',\n        items: this.parent.toolbarSettings.items,\n        mode: this.getToolbarMode(),\n        target: this.tbElement\n      });\n      if (!this.parent.inlineMode.enable) {\n        if (this.parent.toolbarSettings.enableFloating) {\n          this.checkIsTransformChild();\n          this.toggleFloatClass();\n        }\n        addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n          addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n        }\n      }\n    }\n    this.wireEvents();\n    if (this.parent.inlineMode.enable && !isIDevice()) {\n      this.addFixedTBarClass();\n    }\n    if (!this.parent.inlineMode.enable) {\n      this.dropDownModule.renderDropDowns({\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.parent.notify(events.renderColorPicker, {\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.refreshToolbarOverflow();\n    }\n    var divEle = this.parent.element.querySelector('.e-rte-srctextarea');\n    var iframeEle = this.parent.element.querySelector('.e-source-content');\n    if (!this.parent.iframeSettings.enable && !isNOU(divEle) && divEle.style.display === 'block' || this.parent.iframeSettings.enable && !isNOU(iframeEle) && iframeEle.style.display === 'block') {\n      this.parent.notify(events.updateToolbarItem, {\n        targetItem: 'SourceCode',\n        updateItem: 'Preview',\n        baseToolbar: this.parent.getBaseToolbarObject()\n      });\n      this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n    }\n  };\n  /**\n   * addFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addFixedTBarClass = function () {\n    addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  /**\n   * removeFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeFixedTBarClass = function () {\n    removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  Toolbar.prototype.showFixedTBar = function () {\n    addClass([this.tbElement], [classes.CLS_SHOW]);\n    if (Browser.isIos) {\n      addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n    }\n  };\n  Toolbar.prototype.hideFixedTBar = function () {\n    // eslint-disable-next-line\n    !this.isToolbar ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n  };\n  /**\n   * updateItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.updateItem = function (args) {\n    var item = this.tools[args.updateItem.toLocaleLowerCase()];\n    var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n    var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n    if (!isNOU(index)) {\n      var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n      args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n      args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n      args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n      args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n      args.baseToolbar.toolbarObj.dataBind();\n    } else {\n      this.addTBarItem(args, 0);\n    }\n  };\n  Toolbar.prototype.updateToolbarStatus = function (args) {\n    if (!this.tbElement || this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice)) {\n      return;\n    }\n    var options = {\n      args: args,\n      dropDownModule: this.dropDownModule,\n      parent: this.parent,\n      tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n      tbItems: this.baseToolbar.toolbarObj.items\n    };\n    setToolbarStatus(options, this.parent.inlineMode.enable ? true : false, this.parent);\n  };\n  Toolbar.prototype.fullScreen = function (e) {\n    this.parent.fullScreenModule.showFullScreen(e);\n  };\n  Toolbar.prototype.hideScreen = function (e) {\n    this.parent.fullScreenModule.hideFullScreen(e);\n  };\n  /**\n   * getBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getBaseToolbar = function () {\n    return this.baseToolbar;\n  };\n  /**\n   * addTBarItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @param {number} index - specifies the index value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addTBarItem = function (args, index) {\n    args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n  };\n  /**\n   * enableTBarItems method\n   *\n   * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n   * @param {string} items - specifies the string value.\n   * @param {boolean} isEnable - specifies the boolean value.\n   * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n    var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n    this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      var item = this.tbItems[trgItems[i]];\n      if (item) {\n        baseToolbar.toolbarObj.enableItems(item, isEnable);\n      }\n    }\n    if (!select('.e-rte-srctextarea', this.parent.element) && !muteToolbarUpdate) {\n      updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n    }\n  };\n  /**\n   * removeTBarItems method\n   *\n   * @param {string} items - specifies the string value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeTBarItems = function (items) {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n    this.tbItems = this.parent.inlineMode.enable ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element) : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n    }\n  };\n  /**\n   * getExpandTBarPopHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getExpandTBarPopHeight = function () {\n    var popHeight = 0;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n      var expandPopup = select('.e-toolbar-extended', this.tbElement);\n      if (expandPopup && this.tbElement.classList.contains('e-expand-open') || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n        addClass([expandPopup], [classes.CLS_VISIBLE]);\n        popHeight = popHeight + expandPopup.offsetHeight;\n        removeClass([expandPopup], [classes.CLS_VISIBLE]);\n      } else {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      }\n    }\n    return popHeight;\n  };\n  /**\n   * getToolbarHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarHeight = function () {\n    return this.tbElement.offsetHeight;\n  };\n  /**\n   * getToolbarElement method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarElement = function () {\n    return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n  };\n  /**\n   * refreshToolbarOverflow method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.refreshToolbarOverflow = function () {\n    this.baseToolbar.toolbarObj.refreshOverflow();\n  };\n  Toolbar.prototype.isToolbarDestroyed = function () {\n    return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n  };\n  Toolbar.prototype.destroyToolbar = function () {\n    if (this.isToolbarDestroyed()) {\n      this.parent.unWireScrollElementsEvents();\n      this.unWireEvents();\n      this.parent.notify(events.destroyColorPicker, {});\n      this.dropDownModule.destroyDropDowns();\n      this.baseToolbar.toolbarObj.destroy();\n      this.removeEventListener();\n      removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n      removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n      var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n      var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n      if (!isNullOrUndefined(tbWrapper)) {\n        detach(tbWrapper);\n      } else if (!isNullOrUndefined(tbElement)) {\n        detach(tbElement);\n      }\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.destroy = function () {\n    if (this.isToolbarDestroyed()) {\n      this.destroyToolbar();\n      if (this.keyBoardModule) {\n        this.keyBoardModule.destroy();\n      }\n    }\n  };\n  Toolbar.prototype.scrollHandler = function (e) {\n    if (!this.parent.inlineMode.enable) {\n      if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n        this.toggleFloatClass(e.args);\n      }\n    }\n  };\n  Toolbar.prototype.getDOMVisibility = function (el) {\n    if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n      return false;\n    }\n    return true;\n  };\n  Toolbar.prototype.mouseDownHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.showFixedTBar();\n    }\n  };\n  Toolbar.prototype.focusChangeHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.isToolbar = false;\n      this.hideFixedTBar();\n    }\n  };\n  Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n    this.isToolbar = true;\n  };\n  // eslint-disable-next-line\n  Toolbar.prototype.tbFocusHandler = function (e) {\n    var activeElm = document.activeElement;\n    var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n    if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n      var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n      for (var i = 0; i < toolbarItem.length; i++) {\n        if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n          toolbarItem[i].setAttribute('tabindex', '0');\n        } else {\n          toolbarItem[i].setAttribute('tabindex', '1');\n        }\n      }\n    }\n  };\n  Toolbar.prototype.tbKeydownHandler = function (e) {\n    if (e.target.classList.contains('e-dropdown-btn') || e.target.getAttribute('id') === this.parent.getID() + '_toolbar_CreateTable') {\n      e.target.setAttribute('tabindex', '0');\n    }\n  };\n  Toolbar.prototype.toolbarClickHandler = function (e) {\n    var trg = closest(e.originalEvent.target, '.e-hor-nav');\n    if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n      if (!trg.classList.contains('e-nav-active')) {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        this.parent.setContentHeight('toolbar', false);\n      } else {\n        addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        this.parent.setContentHeight('toolbar', true);\n      }\n    } else if (Browser.isDevice || this.parent.inlineMode.enable) {\n      this.isToolbar = true;\n    }\n    if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n    }\n  };\n  Toolbar.prototype.wireEvents = function () {\n    if (this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    }\n    EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n    EventHandler.add(this.tbElement, 'keydown', this.tbKeydownHandler, this);\n  };\n  Toolbar.prototype.unWireEvents = function () {\n    EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n    EventHandler.remove(this.tbElement, 'keydown', this.tbKeydownHandler);\n  };\n  Toolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n    this.toolbarActionModule = new ToolbarAction(this.parent);\n    this.parent.on(events.initialEnd, this.renderToolbar, this);\n    this.parent.on(events.scroll, this.scrollHandler, this);\n    this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n    this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.refreshBegin, this.onRefresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.enableFullScreen, this.fullScreen, this);\n    this.parent.on(events.disableFullScreen, this.hideScreen, this);\n    this.parent.on(events.updateToolbarItem, this.updateItem, this);\n    this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n    this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n    this.parent.on(events.focusChange, this.focusChangeHandler, this);\n    this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n    }\n  };\n  Toolbar.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.initialEnd, this.renderToolbar);\n    this.parent.off(events.scroll, this.scrollHandler);\n    this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n    this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.refreshBegin, this.onRefresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n    this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n    this.parent.off(events.updateToolbarItem, this.updateItem);\n    this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n    this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n    this.parent.off(events.focusChange, this.focusChangeHandler);\n    this.parent.off(events.mouseDown, this.mouseDownHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n    }\n  };\n  Toolbar.prototype.onRefresh = function () {\n    this.refreshToolbarOverflow();\n    this.parent.setContentHeight('', true);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the string value\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.inlineMode)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n        var prop = _a[_i];\n        switch (prop) {\n          case 'enable':\n            this.refreshToolbar();\n            break;\n        }\n      }\n    }\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    this.refreshToolbar();\n  };\n  Toolbar.prototype.refreshToolbar = function () {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n    var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    if (tbElement || tbWrapper) {\n      this.destroyToolbar();\n    }\n    if (this.parent.toolbarSettings.enable) {\n      this.addEventListener();\n      this.renderToolbar();\n      this.parent.wireScrollElementsEvents();\n      if (!select('.e-rte-srctextarea', this.parent.element)) {\n        updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n      }\n      this.parent.notify(events.dynamicModule, {});\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n  return Toolbar;\n}();\nexport { Toolbar };","map":{"version":3,"names":["addClass","Browser","EventHandler","detach","removeClass","select","selectAll","KeyboardEvents","isNullOrUndefined","isNOU","closest","setStyleAttribute","extend","events","classes","RenderType","ToolbarType","setToolbarStatus","updateUndoRedoStatus","getTBarItemsIndex","getCollection","toObjectLowerCase","isIDevice","updateDropDownFontFormatLocale","model","ToolbarRenderer","BaseToolbar","DropDownButtons","ToolbarAction","Toolbar","parent","serviceLocator","isToolbar","locator","isTransformChild","renderFactory","getService","updateDropDownLocale","addRenderer","toolbarRenderer","getRenderer","baseToolbar","addEventListener","toolbarSettings","Object","keys","itemConfigs","length","tools","prototype","initializeInstance","contentRenderer","Content","editableElement","getEditPanel","editPanel","getPanel","toolbarBindEvent","inlineMode","enable","keyBoardModule","getToolbarElement","keyAction","toolBarKeyDown","bind","keyConfigs","formatter","keyConfig","eventName","e","action","contentModule","focus","createToolbarElement","tbElement","createElement","id","getID","isDevice","enableFloating","tbWrapper","innerHTML","outerHTML","className","CLS_TB_WRAP","firstElementChild","element","insertBefore","getToolbarMode","tbMode","type","Expand","Scrollable","checkToolbarResponsive","ele","tBarMode","MultiRow","render","container","items","mode","target","addFixedTBarClass","CLS_TB_STATIC","wireEvents","dropDownModule","renderDropDowns","containerType","notify","renderColorPicker","checkIsTransformChild","transformElements","document","i","contains","toggleFloatClass","topValue","isBody","isFloat","scrollParent","floatOffset","floatingToolbarOffset","iframeSettings","inputElement","ownerDocument","body","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","window","getComputedStyle","parseFloat","marginTop","split","paddingTop","targetTop","getBoundingClientRect","top","scrollParentYOffset","isMSPointer","pageYOffset","parentElement","scrollTop","scrollParentRect","scrollParentTop","outOfRange","CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","CLS_TB_FLOAT","width","offsetWidth","renderToolbar","renderInlineToolbar","CLS_RTE_TB_ENABLED","CLS_RTE_EXPAND_TB","refreshToolbarOverflow","divEle","querySelector","iframeEle","style","display","updateToolbarItem","targetItem","updateItem","getBaseToolbarObject","disableToolbarItem","CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","CLS_SHOW","isIos","CLS_TB_IOS_FIX","hideFixedTBar","args","item","toLocaleLowerCase","trgItem","index","subCommand","toolbarObj","prefixId","prefixIcon","icon","tooltipText","tooltip","dataBind","addTBarItem","updateToolbarStatus","options","tbElements","CLS_TB_ITEM","tbItems","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","getObject","enableTBarItems","isEnable","muteToolbarUpdate","trgItems","enableItems","editorManager","undoRedoManager","getUndoStatus","removeTBarItems","removeItems","popHeight","classList","expandPopup","CLS_VISIBLE","CLS_EXPAND_OPEN","CLS_TOOLBAR","refreshOverflow","isToolbarDestroyed","isDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","destroyColorPicker","destroyDropDowns","destroy","removeEventListener","scrollHandler","getDOMVisibility","el","offsetParent","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","tbFocusHandler","activeElm","activeElement","isToolbaractive","toolbarItem","querySelectorAll","setAttribute","tbKeydownHandler","getAttribute","toolbarClickHandler","trg","originalEvent","setContentHeight","add","remove","toolbarActionModule","on","initialEnd","scroll","bindOnEnd","toolbarUpdated","modelChanged","onPropertyChanged","refreshBegin","onRefresh","enableFullScreen","disableFullScreen","beforeDropDownOpen","expandPopupClick","focusChange","mouseDown","sourceCodeMouseDown","toolbarClick","off","newProp","_i","_a","prop","refreshToolbar","module","getModuleName","wireScrollElementsEvents","dynamicModule"],"sources":["D:/USPERSO IMPLEMENTATION/Projet_DevIII/frontend/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/toolbar.js"],"sourcesContent":["import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        updateDropDownFontFormatLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            case ToolbarType.Scrollable:\n                tbMode = 'Scrollable';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tbMode = ToolbarType.Scrollable;\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        var tBarMode;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tBarMode = ToolbarType.MultiRow;\n        }\n        else {\n            tBarMode = this.parent.toolbarSettings.type;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: tBarMode,\n            target: ele\n        });\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            addClass([ele], ['e-rte-tb-mobile']);\n            if (this.parent.inlineMode.enable) {\n                this.addFixedTBarClass();\n            }\n            else {\n                addClass([ele], [classes.CLS_TB_STATIC]);\n            }\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n            scrollParent = e.target.body;\n        }\n        else if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0))\n                + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n        var divEle = this.parent.element.querySelector('.e-rte-srctextarea');\n        var iframeEle = this.parent.element.querySelector('.e-source-content');\n        if ((!this.parent.iframeSettings.enable && (!isNOU(divEle) && divEle.style.display === 'block')) ||\n            (this.parent.iframeSettings.enable && (!isNOU(iframeEle) && iframeEle.style.display === 'block'))) {\n            this.parent.notify(events.updateToolbarItem, {\n                targetItem: 'SourceCode', updateItem: 'Preview',\n                baseToolbar: this.parent.getBaseToolbarObject()\n            });\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        }\n    };\n    /**\n     * addFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    /**\n     * removeFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        // eslint-disable-next-line\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    /**\n     * updateItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false), this.parent);\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    /**\n     * getBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    /**\n     * addTBarItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @param {number} index - specifies the index value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    /**\n     * enableTBarItems method\n     *\n     * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n     * @param {string} items - specifies the string value.\n     * @param {boolean} isEnable - specifies the boolean value.\n     * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element) && !muteToolbarUpdate) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * removeTBarItems method\n     *\n     * @param {string} items - specifies the string value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    /**\n     * getExpandTBarPopHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    /**\n     * getToolbarHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    /**\n     * getToolbarElement method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    /**\n     * refreshToolbarOverflow method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.baseToolbar.toolbarObj.refreshOverflow();\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.getDOMVisibility = function (el) {\n        if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n            return false;\n        }\n        return true;\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    // eslint-disable-next-line\n    Toolbar.prototype.tbFocusHandler = function (e) {\n        var activeElm = document.activeElement;\n        var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n        if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n            var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n                    toolbarItem[i].setAttribute('tabindex', '0');\n                }\n                else {\n                    toolbarItem[i].setAttribute('tabindex', '1');\n                }\n            }\n        }\n    };\n    Toolbar.prototype.tbKeydownHandler = function (e) {\n        if (e.target.classList.contains('e-dropdown-btn') ||\n            e.target.getAttribute('id') === this.parent.getID() + '_toolbar_CreateTable') {\n            e.target.setAttribute('tabindex', '0');\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (e) {\n        var trg = closest(e.originalEvent.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n        EventHandler.add(this.tbElement, 'keydown', this.tbKeydownHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n        EventHandler.remove(this.tbElement, 'keydown', this.tbKeydownHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n        }\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.refreshBegin, this.onRefresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n        }\n    };\n    Toolbar.prototype.onRefresh = function () {\n        this.refreshToolbarOverflow();\n        this.parent.setContentHeight('', true);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the string value\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n            this.parent.notify(events.dynamicModule, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}